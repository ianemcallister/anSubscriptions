config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("ansub",["ngRoute","ui.bootstrap"]);function mainController(e,t,n,i,r,s,o){e.userData=r,e.state=s,o.init()}function successController(e,t,n){e.confirmationCode=n.confirmationCode,console.log("success controler",n.confirmationCode,e.confirmationCode)}function billingAddress(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/billingAddress.htm",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t,n,i){this.userData=n,this.state=i}return n.$inject=["$scope","$log","userDataService","stateService"],e}function billingInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/billingInput.htm",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t,n,i){this.userData=n,this.state=i}return n.$inject=["$scope","$log","userDataService","stateService"],e}function contactInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/contactInput.htm",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t,n,i,r){var s=this;s.userData=n,s.state=i,s.validate=function(e,t){console.log("got these",e,t);var n=r.contact[e](t);s.state.contactInput[e].input["is-invalid"]=n?!(s.state.contactInput[e].input["is-valid"]=!0):!(s.state.contactInput[e].input["is-valid"]=!1)}}return n.$inject=["$scope","$log","userDataService","stateService","validationService"],e}function frequencySelection(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/frequencySelection.htm",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t){this.frequencies=["month","quarter","year"],this.starts={month:["January","February","March","April","May","June","July","August","September","October","November","December"],quarter:["Winter","Spring","Summer","Fall"],year:["2018","2019","2020"]},this.selectedFrequency="",this.startsIn=""}return n.$inject=["$scope","$log"],e}function productSelection(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/productSelection.htm",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(t,e,n,i,r){var s=this;s.userData=n,s.state=i.productSelection,s.state.infoBox=i.infoBoxes.flavorDefs,r.download.productList().then(function(e){s.flavors=e,t.$apply()}).catch(function(e){console.log("product list error, ",e)}),s.orderList=n.order,s.productPrice=1699,s.order=n.tender;var o={id:1,sqrId:"",sqVarId:"",flavor:"",mixflvrCount:0,mixflvrs:{srpec:{id:"srpec",name:"SR Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}},sralm:{id:"sralm",name:"SR Almonds",selected:!1,classes:{"list-group-item":!0,active:!1}},srcsh:{id:"srcsh",name:"SR Cashews",selected:!1,classes:{"list-group-item":!0,active:!1}},srpea:{id:"srpea",name:"SR Peanuts",selected:!1,classes:{"list-group-item":!0,active:!1}},cnpec:{id:"cnpec",name:"Cin Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}},cnalm:{id:"cnalm",name:"Cin Almonds",selected:!1,classes:{"list-group-item":!0,active:!1}},drpec:{id:"drpec",name:"Drunk Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}}},mixFlvrsSelected:[],mix:""};function a(){s.order.total=s.orderList.length*s.productPrice-s.order.discounts,4==s.orderList.length&&(s.order.total=s.order.total-s.productPrice)}s.addAProduct=function(){var e=s.orderList.length;e<4&&s.orderList.push(Object.create(o)),3==e&&(s.state.addAProductBtn.visible=!1),0<e&&(s.state.removeLastProductBtn.visible=!0);for(var t=0;t<=e;t++)s.orderList[t].id=t+1;a()},s.removeLastProduct=function(){var e=s.orderList.length,t=e-1;1<e&&s.orderList.splice(t,1),2==e&&(s.state.removeLastProductBtn.visible=!1),s.state.addAProductBtn.visible=!0,4==e&&(s.order.discounts=0),a()},s.removeAProduct=function(e){var t=e-1;1<s.orderList.length&&s.orderList.splice(t,1);for(var n=0;n<=s.orderList.length-1;n++)s.orderList[n].id=n+1;a()},s.validateProducts=function(){},s.countMixFlavors=function(t){var n=0;return Object.keys(t).forEach(function(e){t[e].selected&&n++}),n},s.updateShoppingCart=function(){s.orderList.forEach(function(t){s.flavors.forEach(function(e){e.name==t.flavor&&(t.sqrId=e.id,t.id<4?t.sqVarId=e.variations[0].id:t.sqVarId=e.variations[1].id)})}),console.log(s.orderList)},s.buildFlavorList=function(t){s.orderList[t].mixFlvrsSelected=[],Object.keys(s.orderList[t].mixflvrs).forEach(function(e){s.orderList[t].mixflvrs[e].selected&&s.orderList[t].mixFlvrsSelected.push(s.orderList[t].mixflvrs[e].name)})},s.orderList.push(Object.create(o)),a()}return n.$inject=["$scope","$log","userDataService","stateService","squareService"],e}function shipDest(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",template:"<div>testing</div>",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t,n){this.zipCheck=n}return n.$inject=["$scope","$log","zipcomplete"],e}function singleAddressInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/singleAddressInput.htm",replace:!0,scope:{address:"="},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t,n,i,r){var s=this;s.userData=n,s.state=i,console.log("in singleAddressInputController",r),s.validate=function(e,t){var n=r.physicalAddresses[e](t);s.state.singleAddressInput[e].input["is-invalid"]=n?!(s.state.singleAddressInput[e].input["is-valid"]=!0):!(s.state.singleAddressInput[e].input["is-valid"]=!1)},s.updateBillingAddress=function(){s.state.shipingSameAsBilling&&(s.userData.billingAddress.street=s.userData.shippingDestination.street,s.userData.billingAddress.zip=s.userData.shippingDestination.zip,s.userData.billingAddress.city=s.userData.shippingDestination.city,s.userData.billingAddress.state=s.userData.shippingDestination.state)}}return n.$inject=["$scope","$log","userDataService","stateService","validationService"],e}function subTermsCond(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/subTermsCond.htm",replace:!0,scope:{},link:t,controller:n,controllerAs:"vm",bindToController:!0};function t(e,t,n,i){}function n(e,t,n,i,r,s,o,a){this.state=i,this.userData=r,this.validate=s,this.square=a}return n.$inject=["$scope","$log","$location","stateService","userDataService","validationService","submissionService","squareService"],e}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/monthlySub.htm",controller:"mainController",controllerAs:"vm"}).when("/success/:confirmationCode",{templateUrl:"views/success.htm",controller:"successController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function errorHandlingService(){return{}}function modalService(e){var r={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/modal.htm"},s={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(e,t){var n={},i={};return angular.extend(n,r,e),angular.extend(i,s,t),n.controller||(n.controller=function(e,t){e.modalOptions=i,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.dismiss("cancel")}}),$modal.open(n).result}}function serverService(r){return{chargeCard:function(e,i){return new Promise(function(t,n){r({method:"POST",url:e,headers:{"Content-Type":"application/json"},data:i}).then(function(e){console.log("got this response",e),t(e.data)},function(e){n(e)})})},get:{sqrAppId:function(){return new Promise(function(t,n){r({method:"GET",url:"/api/squareId"}).then(function(e){console.log("got this response",e),t(e.data)},function(e){n(e)})})},sqrPrdctList:function(){return new Promise(function(t,n){r({method:"GET",url:"/api/productList"}).then(function(e){console.log("got this response",e),t(e.data)},function(e){n(e)})})}}}}function squareService(n,i,r,t){var s=this;function o(e){t.card.nonce=e,r.chargeCard("/api/charge_card",t).then(function(e){var t="/success/"+e.data;console.log("got this path back",t),i.path(t),n.$apply()}).catch(function(e){console.log("Error:",e)})}return{_chargeCardWithNonce:o,submitForm:function(){console.log("submitting form"),s.paymentForm.requestCardNonce()},download:{productList:function(){return new Promise(function(t,n){r.get.sqrPrdctList().then(function(e){t(e)}).catch(function(e){n(e)})})}},init:function(){r.get.sqrAppId().then(function(e){s.paymentForm=new SqPaymentForm({applicationId:e.id,inputClass:"sq-input",inputStyles:[{fontSize:"14px",padding:"7px 12px",backgroundColor:"transparent"}],cardNumber:{elementId:"sq-card-number",placeholder:"•••• •••• •••• ••••"},cvv:{elementId:"sq-cvv",placeholder:"CVV"},expirationDate:{elementId:"sq-expiration-date",placeholder:"MM/YY"},postalCode:{elementId:"sq-postal-code"},callbacks:{cardNonceResponseReceived:function(e,t,n){e?(console.log("Encountered errors:",e),s.card_errors=e,s.isProcessing=!1):(s.card_errors=[],o(t))},unsupportedBrowserDetected:function(){},inputEventReceived:function(e){e.eventType},paymentFormLoaded:function(){}}}),s.paymentForm.build()}).catch(function(e){console.log(e)})}}}function stateService(e){return{shipingSameAsBilling:!0,productSelection:{addAProductBtn:{classes:{btn:!0,"btn-success":!0,"btn-warning":!1},visible:!0},removeLastProductBtn:{classes:{btn:!0,"btn-success":!1,"btn-warning":!1,"btn-danger":!0},visible:!1},headerStyle:{color:"rgb(51,51,51)"}},contactInfo:{firstname:{classes:{"form-control":!0,"is-valid":!1,"is-invalid":!1},addressed:!1,isValid:!1,isInvalid:!1}},infoBoxes:{flavorDefs:!1,termsConds:!1},sectionsAddressed:{productSelection:!1,singleShippingAddress:!1,contactInfo:!1,termsConds:!1},sectionsCompleted:{productSelection:!0,singleShippingAddress:!0,contactInfo:!0,termsConds:!1},sectionHeaders:{productSelection:{showError:!1,showCompleted:!1},singleShippingAddress:{showError:!1,showCompleted:!1},contactInfo:{showError:!1,showCompleted:!1},termsConds:{showError:!1,showCompleted:!1}},checkCompletness:function(){var t=this,n=!0;Object.keys(t.sectionsCompleted).forEach(function(e){0==t.sectionsCompleted[e]&&(n=!1)}),t.submissionBtn["btn-secondary"]=n?(readyForSubmission=!0,t.submissionBtn["btn-success"]=!0,!1):(readyForSubmission=!1,t.submissionBtn["btn-success"]=!1,!0)},readyForSubmission:!1,submissionBtn:{btn:!0,"btn-block":!0,"btn-success":!1,"btn-secondary":!0},contactInput:{first:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}},last:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}},phone:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}},email:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}}},singleAddressInput:{street:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}},zip:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}},city:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}},state:{field:{"was-validated":!1,"needs-validation":!0},input:{"is-valid":!1,"is-invalid":!1}}}}}function submissionService(i){this.submit=function(e){return new Promise(function(t,n){i({method:"POST",url:"/subscription-application-submission",headers:{"Content-Type":"application/json"},data:e}).then(function(e){console.log("got this response",e),t(e)},function(e){n(e)})})}}function userDataService(){return{name:{first:"",last:""},contact:{email:"",phone:""},shippingDestination:{street:"",city:"",state:"",zip:""},billingAddress:{street:"",city:"",state:"",zip:""},card:{nonce:"",last4:"",type:""},orderNo:"",orderDate:"",order:[],tender:{discounts:0,shipping:0,total:0},agreedToTerms:!1}}function validationService(e,t){function n(e){var t=!1;return 0<e.length&&(t=!0),t}return{physicalAddresses:{street:n,zip:function(e){return/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e)},city:function(e){return/^[a-zA-Z]+(?:[\s-][a-zA-Z]+)*$/.test(e)},state:function(e){return/^((A[LKZR])|(C[AOT])|(D[EC])|(FL)|(GA)|(HI)|(I[DLNA])|(K[SY])|(LA)|(M[EDAINSOT])|(N[EVHJMYCD])|(O[HKR])|(PA)|(RI)|(S[CD])|(T[NX])|(UT)|(V[TA])|(W[AVIY]))$/.test(e)}},contact:{first:n,last:n,phone:function(e){return/^[2-9]\d{2}-\d{3}-\d{4}$/.test(e)},email:function(e){return/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/.test(e)}},termsAndCond:function(){console.log("validating terms and conditions"),e.sectionsAddressed.termsConds=!0,e.sectionsCompleted.termsConds=t.agreedToTerms,e.sectionsCompleted.termsConds?(e.sectionHeaders.termsConds.showError=!1,e.sectionHeaders.termsConds.showCompleted=!0):(e.sectionHeaders.termsConds.showError=!0,e.sectionHeaders.termsConds.showCompleted=!1)}}}function zipcomplete(){this.handleResp=function(e){e.error_msg?console.log(e.error_msg):"city"in e&&(container.find("input[name='city']").val(e.city),container.find("input[name='state']").val(e.state))},this.checkZip=function(e){var t=e.substring(0,5);5==t.length&&/^[0-9]+$/.test(t)&&console.log("checking zip",t)}}angular.module("ansub").controller("mainController",mainController),mainController.$inject=["$scope","$log","$location","submissionService","userDataService","stateService","squareService"],angular.module("ansub").controller("successController",successController),successController.$inject=["$scope","$log","$routeParams"],angular.module("ansub").directive("billingAddress",billingAddress),angular.module("ansub").directive("billingInput",billingInput),angular.module("ansub").directive("contactInput",contactInput),angular.module("ansub").directive("frequencySelection",frequencySelection),angular.module("ansub").directive("productSelection",productSelection),angular.module("ansub").directive("shipDest",shipDest),angular.module("ansub").directive("singleAddressInput",singleAddressInput),angular.module("ansub").directive("subTermsCond",subTermsCond),angular.module("ansub").config(config),angular.module("ansub").service("errorHandlingService",errorHandlingService),errorHandlingService.$inject=[],angular.module("ansub").service("modalService",modalService),modalService.$inject=["$uibModal"],angular.module("ansub").service("serverService",serverService),serverService.$inject=["$http"],angular.module("ansub").service("squareService",squareService),squareService.$inject=["$rootScope","$location","serverService","userDataService"],angular.module("ansub").service("stateService",stateService),stateService.$inject=["userDataService"],angular.module("ansub").service("submissionService",submissionService),submissionService.$inject=["$http"],angular.module("ansub").service("userDataService",userDataService),userDataService.$inject=[],angular.module("ansub").service("validationService",validationService),validationService.$inject=["stateService","userDataService"],angular.module("ansub").service("zipcomplete",zipcomplete),zipcomplete.$inject=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9tYWluLmNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL2NvbnRyb2xsZXJzL3N1Y2Nlc3MuY29udHJvbGxlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9iaWxsaW5nQWRkcmVzcy5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvYmlsbGluZ0lucHV0LmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jb250YWN0SW5wdXQuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2ZyZXF1ZW5jeVNlbGVjdGlvbi5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvcHJvZHVjdFNlbGVjdGlvbi5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2hpcERlc3QuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL3NpbmdsZUFkZHJlc3NJbnB1dC5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc3VidGVybXNjb25kLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvcm91dGVzL3JvdXRlcy5jb25maWcuanMiLCJzY3JpcHRzL3NlcnZpY2VzL2Vycm9ySGFuZGxpbmcuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvbW9yZGFscy5zZXJ2aWNlLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy9zZXJ2ZXIuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvc3F1YXJlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3N0YXRlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3N1Ym1pc3Npb25TZXJpdmNlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3VzZXJEYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3ZhbGlkYXRpb24uc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvemlwY29tcGxldGUuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwibWFpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9nIiwiJGxvY2F0aW9uIiwic3VibWlzc2lvblNlcnZpY2UiLCJ1c2VyRGF0YVNlcnZpY2UiLCJzdGF0ZVNlcnZpY2UiLCJzcXVhcmVTZXJ2aWNlIiwidXNlckRhdGEiLCJzdGF0ZSIsImluaXQiLCJzdWNjZXNzQ29udHJvbGxlciIsIiRyb3V0ZVBhcmFtcyIsImNvbmZpcm1hdGlvbkNvZGUiLCJjb25zb2xlIiwibG9nIiwiYmlsbGluZ0FkZHJlc3MiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwicmVwbGFjZSIsInNjb3BlIiwibGluayIsImxpbmtGdW5jIiwiY29udHJvbGxlciIsImJpbGxpbmdBZGRyZXNzQ29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJlbCIsImF0dHIiLCJjdHJsIiwidGhpcyIsIiRpbmplY3QiLCJiaWxsaW5nSW5wdXQiLCJiaWxsaW5nSW5wdXRDb250cm9sbGVyIiwiY29udGFjdElucHV0IiwiY29udGFjdElucHV0dENvbnRyb2xsZXIiLCJ2YWxpZGF0aW9uU2VydmljZSIsInNlbGYiLCJ2YWxpZGF0ZSIsImZpZWxkIiwidmFsdWUiLCJpc1ZhbGlkIiwiY29udGFjdCIsImlucHV0IiwiZnJlcXVlbmN5U2VsZWN0aW9uIiwiZnJlcXVlbmN5U2VsZWN0aW9uQ29udHJvbGxlciIsImZyZXF1ZW5jaWVzIiwic3RhcnRzIiwibW9udGgiLCJxdWFydGVyIiwieWVhciIsInNlbGVjdGVkRnJlcXVlbmN5Iiwic3RhcnRzSW4iLCJwcm9kdWN0U2VsZWN0aW9uIiwicHJvZHVjdFNlbGVjdGlvbkNvbnRyb2xsZXIiLCJpbmZvQm94ZXMiLCJmbGF2b3JEZWZzIiwiZG93bmxvYWQiLCJwcm9kdWN0TGlzdCIsInRoZW4iLCJzIiwiZmxhdm9ycyIsIiRhcHBseSIsImNhdGNoIiwiZSIsIm9yZGVyTGlzdCIsIm9yZGVyIiwicHJvZHVjdFByaWNlIiwidGVuZGVyIiwicHJvZHVjdE9iamVjdCIsImlkIiwic3FySWQiLCJzcVZhcklkIiwiZmxhdm9yIiwibWl4Zmx2ckNvdW50IiwibWl4Zmx2cnMiLCJzcnBlYyIsIm5hbWUiLCJzZWxlY3RlZCIsImNsYXNzZXMiLCJsaXN0LWdyb3VwLWl0ZW0iLCJhY3RpdmUiLCJzcmFsbSIsInNyY3NoIiwic3JwZWEiLCJjbnBlYyIsImNuYWxtIiwiZHJwZWMiLCJtaXhGbHZyc1NlbGVjdGVkIiwibWl4Iiwic3VtT3JkZXIiLCJ0b3RhbCIsImxlbmd0aCIsImRpc2NvdW50cyIsImFkZEFQcm9kdWN0Iiwibm9PZlByb2R1Y3RzIiwicHVzaCIsIk9iamVjdCIsImNyZWF0ZSIsImFkZEFQcm9kdWN0QnRuIiwidmlzaWJsZSIsInJlbW92ZUxhc3RQcm9kdWN0QnRuIiwiaSIsInJlbW92ZUxhc3RQcm9kdWN0IiwicmVtb3ZlSW5kZXgiLCJzcGxpY2UiLCJyZW1vdmVBUHJvZHVjdCIsInZhbGlkYXRlUHJvZHVjdHMiLCJjb3VudE1peEZsYXZvcnMiLCJmbGF2b3JPYmplY3QiLCJjb3VudGVyIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ1cGRhdGVTaG9wcGluZ0NhcnQiLCJwcm9kdWN0IiwidmFyaWF0aW9ucyIsImJ1aWxkRmxhdm9yTGlzdCIsInNoaXBEZXN0IiwidGVtcGxhdGUiLCJzaGlwRGVzdENvbnRyb2xsZXIiLCJ6aXBjb21wbGV0ZSIsInppcENoZWNrIiwic2luZ2xlQWRkcmVzc0lucHV0IiwiYWRkcmVzcyIsInNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXIiLCJwaHlzaWNhbEFkZHJlc3NlcyIsInVwZGF0ZUJpbGxpbmdBZGRyZXNzIiwic2hpcGluZ1NhbWVBc0JpbGxpbmciLCJzdHJlZXQiLCJzaGlwcGluZ0Rlc3RpbmF0aW9uIiwiemlwIiwiY2l0eSIsInN1YlRlcm1zQ29uZCIsInN1YlRlcm1zQ29uZENvbnRyb2xsZXIiLCJzcXVhcmUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaGFzaFByZWZpeCIsIndoZW4iLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZXJyb3JIYW5kbGluZ1NlcnZpY2UiLCJtb2RhbFNlcnZpY2UiLCIkdWliTW9kYWwiLCJtb2RhbERlZmF1bHRzIiwiYmFja2Ryb3AiLCJrZXlib2FyZCIsIm1vZGFsRmFkZSIsIm1vZGFsT3B0aW9ucyIsImNsb3NlQnV0dG9uVGV4dCIsImFjdGlvbkJ1dHRvblRleHQiLCJoZWFkZXJUZXh0IiwiYm9keVRleHQiLCJzaG93TW9kYWwiLCJjdXN0b21Nb2RhbERlZmF1bHRzIiwiY3VzdG9tTW9kYWxPcHRpb25zIiwic2hvdyIsInRlbXBNb2RhbERlZmF1bHRzIiwidGVtcE1vZGFsT3B0aW9ucyIsImV4dGVuZCIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJyZXN1bHQiLCJjbG9zZSIsImRpc21pc3MiLCIkbW9kYWwiLCJvcGVuIiwic2VydmVyU2VydmljZSIsIiRodHRwIiwiY2hhcmdlQ2FyZCIsInVybCIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJyZXNwb25zZSIsImVycm9yIiwiZ2V0Iiwic3FyQXBwSWQiLCJzcXJQcmRjdExpc3QiLCIkcm9vdFNjb3BlIiwiX2NoYXJnZUNhcmRXaXRoTm9uY2UiLCJub25jZSIsImNhcmQiLCJuZXdQYXRoIiwicGF0aCIsInN1Ym1pdEZvcm0iLCJwYXltZW50Rm9ybSIsInJlcXVlc3RDYXJkTm9uY2UiLCJzcUFwcCIsIlNxUGF5bWVudEZvcm0iLCJhcHBsaWNhdGlvbklkIiwiaW5wdXRDbGFzcyIsImlucHV0U3R5bGVzIiwiZm9udFNpemUiLCJwYWRkaW5nIiwiYmFja2dyb3VuZENvbG9yIiwiY2FyZE51bWJlciIsImVsZW1lbnRJZCIsInBsYWNlaG9sZGVyIiwiY3Z2IiwiZXhwaXJhdGlvbkRhdGUiLCJwb3N0YWxDb2RlIiwiY2FsbGJhY2tzIiwiY2FyZE5vbmNlUmVzcG9uc2VSZWNlaXZlZCIsImVycm9ycyIsImNhcmREYXRhIiwiY2FyZF9lcnJvcnMiLCJpc1Byb2Nlc3NpbmciLCJ1bnN1cHBvcnRlZEJyb3dzZXJEZXRlY3RlZCIsImlucHV0RXZlbnRSZWNlaXZlZCIsImlucHV0RXZlbnQiLCJldmVudFR5cGUiLCJwYXltZW50Rm9ybUxvYWRlZCIsImJ1aWxkIiwiYnRuIiwiYnRuLXN1Y2Nlc3MiLCJidG4td2FybmluZyIsImJ0bi1kYW5nZXIiLCJoZWFkZXJTdHlsZSIsImNvbG9yIiwiY29udGFjdEluZm8iLCJmaXJzdG5hbWUiLCJmb3JtLWNvbnRyb2wiLCJpcy12YWxpZCIsImlzLWludmFsaWQiLCJhZGRyZXNzZWQiLCJpc0ludmFsaWQiLCJ0ZXJtc0NvbmRzIiwic2VjdGlvbnNBZGRyZXNzZWQiLCJzaW5nbGVTaGlwcGluZ0FkZHJlc3MiLCJzZWN0aW9uc0NvbXBsZXRlZCIsInNlY3Rpb25IZWFkZXJzIiwic2hvd0Vycm9yIiwic2hvd0NvbXBsZXRlZCIsImNoZWNrQ29tcGxldG5lc3MiLCJub0ZsYWdzIiwic3VibWlzc2lvbkJ0biIsInJlYWR5Rm9yU3VibWlzc2lvbiIsImJ0bi1ibG9jayIsImJ0bi1zZWNvbmRhcnkiLCJmaXJzdCIsIndhcy12YWxpZGF0ZWQiLCJuZWVkcy12YWxpZGF0aW9uIiwibGFzdCIsInBob25lIiwiZW1haWwiLCJzdWJtaXQiLCJsYXN0NCIsInR5cGUiLCJvcmRlck5vIiwib3JkZXJEYXRlIiwic2hpcHBpbmciLCJhZ3JlZWRUb1Rlcm1zIiwiaXNWYWxpZFN0cmluZyIsImFTdHJpbmciLCJ0ZXN0IiwidGVybXNBbmRDb25kIiwiaGFuZGxlUmVzcCIsImVycm9yX21zZyIsImNvbnRhaW5lciIsImZpbmQiLCJ2YWwiLCJjaGVja1ppcCIsImVudGVyZWRaaXAiLCJ6aXBjb2RlIiwic3Vic3RyaW5nIiwic2VydmljZSJdLCJtYXBwaW5ncyI6InNEQUVBLElBQUFBLE9BQUFDLFFBQUFDLE9BQUEsUUFB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ZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9kZWZpbmUgdGhlIG1vZHVsZVxuXG52YXIgYWhOdXRzID0gYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJywgWyduZ1JvdXRlJywgJ3VpLmJvb3RzdHJhcCddKTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5jb250cm9sbGVyKCdtYWluQ29udHJvbGxlcicsIG1haW5Db250cm9sbGVyKTtcblxuXHRtYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRsb2NhdGlvbicsICdzdWJtaXNzaW9uU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJywgJ3NxdWFyZVNlcnZpY2UnXTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sIHN1Ym1pc3Npb25TZXJ2aWNlLCB1c2VyRGF0YVNlcnZpY2UsIHN0YXRlU2VydmljZSwgc3F1YXJlU2VydmljZSkge1xuXHRcdC8vbm90aWZ5IHByb2dyZXNzXG5cblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHQvL2RlZmluZSB1c2VyZGF0YSBtb2RlbCB2YXJpYWJsZVxuXHRcdCRzY29wZS51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHQkc2NvcGUuc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRzcXVhcmVTZXJ2aWNlLmluaXQoKTtcblx0XHRcblx0XHQvKnZhciByZWNpcGlhbnRQcm9maWxlID0ge1xuXHRcdFx0bmFtZToge1xuXHRcdFx0XHRmaXJzdDogXCJcIixcblx0XHRcdFx0bGFzdDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MTogXCJcIixcblx0XHRcdFx0c3RyZWV0MjogXCJcIixcblx0XHRcdFx0c3RyZWV0MzogXCJcIixcblx0XHRcdFx0Y2l0eTogXCJcIixcblx0XHRcdFx0c3RhdGU6IFwiXCIsXG5cdFx0XHRcdHppcDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdGNvbnRhY3Q6IHt9LFxuXHRcdFx0cmVsYXRpb25zaGlwOiBcIlwiXG5cdFx0fTtcblxuXHRcdHZhciBzaGlwcGluZ1NjaGVkdWxlcyA9IHtcblx0XHRcdFwieWVhcmx5XCI6IFtcblx0XHRcdFx0eyBpZDogMSwgbmFtZTogXCJUcmVhdFwiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH1cblx0XHRcdF0sXG5cdFx0XHRcInF1YXJ0ZXJseVwiOiBbXG5cdFx0XHRcdHsgaWQ6IDEsIG5hbWU6IFwiV2ludGVyXCIsIHNoaXBEYXk6IFwiXCIsIGJpbGxEYXk6IFwiXCIgfSxcblx0XHRcdFx0eyBpZDogMiwgbmFtZTogXCJTcHJpbmdcIiwgc2hpcERheTogXCJcIiwgYmlsbERheTogXCJcIiB9LFxuXHRcdFx0XHR7IGlkOiAzLCBuYW1lOiBcIlN1bW1lclwiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH0sXG5cdFx0XHRcdHsgaWQ6IDQsIG5hbWU6IFwiRmFsbFwiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH1cblx0XHRcdF0sXG5cdFx0XHRcIm1vbnRobHlcIjogW1xuXHRcdFx0XHR7IGlkOiAxLCBuYW1lOiBcIkphbnVhcnlcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAyLCBuYW1lOiBcIkZlYnJ1YXJ5XCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogMywgbmFtZTogXCJNYXJjaFwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDQsIG5hbWU6IFwiQXByaWxcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiA1LCBuYW1lOiBcIk1heVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDYsIG5hbWU6IFwiSnVuZVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDcsIG5hbWU6IFwiSnVseVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDgsIG5hbWU6IFwiQXVndXN0XCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogOSwgbmFtZTogXCJTZXB0ZW1iZXJcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAxMCwgbmFtZTogXCJPY3RvYmVyXCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogMTEsIG5hbWU6IFwiTm92ZW1iZXJcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAxMiwgbmFtZTogXCJEZWNlbWJlclwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH1cblx0XHRcdF0sXG5cdFx0XHRcIndlZWtseVwiOiB3ZWVrbHlHZW5lcmF0b3IoKVxuXG5cdFx0fVxuXHRcdFxuXHRcdHZhciBzaGlwcGluZ09jY3VyYW5jZSA9IHtcblx0XHRcdGlkOiAwLFxuXHRcdFx0bmFtZTogXCJcIixcblx0XHRcdGRhdGU6IFwiXCJcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gd2Vla2x5R2VuZXJhdG9yKCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYWxsV2Vla3MgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBpID0gMTsgaSA8PSA1MjsgaSsrKSB7XG5cdFx0XHRcdHZhciB3ZWVrTmFtZSA9IFwiV2VlayBcIiArIGk7XG5cdFx0XHRcdGFsbFdlZWtzLnB1c2goeyBpZDogaSwgbmFtZTogd2Vla05hbWUsIHNoaXBEYXk6IFwiVHVlc2RheVwiLCBiaWxsRGF5OiBcIkZyaWRheVwiIH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0cmV0dXJuIGFsbFdlZWtzO1xuXHRcdH07Ki9cblxuXHRcdC8vZGVmaW5lIGZsYXZvciB2YXJpYWJsZXNcblx0XHQvKiRzY29wZS5mbGF2b3JzPSBbXG5cdFx0XHR7IG5hbWU6ICdTZWNyZXQgUmVjaXBlIFBlY2FucycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnU2VjcmV0IFJlY2lwZSBBbG1vbmRzJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdTZWNyZXQgUmVjaXBlIENhc2hld3MnLCBkZXNjcmlwdGlvbjogXCIgXCIgfSxcblx0XHRcdHsgbmFtZTogJ1NlY3JldCBSZWNpcGUgUGVhbnV0cycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnQ2lubmFtb24gUGVjYW5zJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdDaW5uYW1vbiBBbG1vbmRzJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdEcnVua2VuIFBlY2FucycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnTWl4LUl0LVVwJywgZGVzY3JpcHRpb246IFwiIFwiIH1cblx0XHRdO1xuXG5cdFx0JHNjb3BlLm9yZGVyU2NoZWR1bGUgPSBbXG5cdFx0XHR7IGlkOiAxIH1cblx0XHRdOyovXG5cblx0XHRcblxuXHRcdC8vZGVmaW5lIHN0YXRlIHZhcmlhYmxlc1xuXHRcdC8qJHNjb3BlLnN0YXRlID0ge1xuXHRcdFx0dGVtcFJlY2lwaWFudDoge1xuXHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0Zmlyc3Q6IFwiXCIsXG5cdFx0XHRcdFx0bGFzdDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRhZGRyZXNzOiB7XG5cdFx0XHRcdFx0c3RyZWV0MTogXCJcIixcblx0XHRcdFx0XHRzdHJlZXQyOiBcIlwiLFxuXHRcdFx0XHRcdHN0cmVldDM6IFwiXCIsXG5cdFx0XHRcdFx0Y2l0eTogXCJcIixcblx0XHRcdFx0XHRzdGF0ZTogXCJcIixcblx0XHRcdFx0XHR6aXA6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0Y29udGFjdDoge1xuXHRcdFx0XHRcdGVtYWlsOiBcIlwiLFxuXHRcdFx0XHRcdHBob25lOiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlbGF0aW9uc2hpcDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdG9yZGVyOiB7XG5cdFx0XHRcdHF0eTogXCIxXCIsXG5cdFx0XHRcdHZpc2liaWxpdHk6IHtcblx0XHRcdFx0XHRvbmU6IHRydWUsXG5cdFx0XHRcdFx0dHdvOiBmYWxzZSxcblx0XHRcdFx0XHR0aHJlZTogZmFsc2UsXG5cdFx0XHRcdFx0Zm91cjogZmFsc2UsXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRmcmVxdWVuY3k6IHtcblx0XHRcdFx0dmFsdWU6ICdtb250aGx5J1xuXHRcdFx0fSxcblx0XHRcdHNoaXBwaW5nRGVzdGluYXRpb25zOiBcIjFcIixcblx0XHRcdHJlY2lwaWVudHNCb3g6IFwiMVwiLFxuXHRcdFx0cmVjaXBpYW50U2VsZWN0ZWQ6IHtcblx0XHRcdFx0c3RhdGU6IGZhbHNlLFxuXHRcdFx0XHRpZDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdHN1YlR5cGU6IHt9LFxuXHRcdFx0c2VsZWN0ZWRSZWNpcGlhbnQ6IDAsXG5cdFx0XHRlcnJvcnM6IHtcblx0XHRcdFx0bWlzc2luZ1JlcXVpcmVkOiBmYWxzZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdCRzY29wZS5zdGF0ZVRlc3QgPSBzdGF0ZVNlcnZpY2VcblxuXHRcdC8vbG9jYWwgZnVuY3Rpb25zXG5cdFx0ZnVuY3Rpb24gYWRkVG9SZWNpcGlhbnRMaXN0KHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBuZXdSZWNpcGlhbnQgPSBPYmplY3QuY3JlYXRlKHJlY2lwaWFudFByb2ZpbGUpO1xuXHRcdFx0dmFyIGV4aXN0c0FscmVhZHkgPSBmYWxzZTtcblx0XHRcdHZhciBlbnRyeUluZGV4ID0gMDtcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Ly8xLiBjaGVjayBmb3IgdGhlIHJlbGF0aW9uc2hpcFxuXHRcdFx0JHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3QuZm9yRWFjaChmdW5jdGlvbihyZWNpcGlhbnQpIHtcblx0XHRcdFx0aWYocmVjaXBpYW50LnJlbGF0aW9uc2hpcCA9PSByZWxhdGlvbnNoaXApIHtcblx0XHRcdFx0XHRleGlzdHNBbHJlYWR5ID0gdHJ1ZTtcblx0XHRcdFx0XHRlbnRyeUluZGV4ID0gaTtcblx0XHRcdFx0fTtcblx0XHRcdFx0aSsrO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2FkZGluZycsIHJlbGF0aW9uc2hpcCwgJ3RvIHJlY2lwaWFudCBsaXN0JywgJHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3QsIFwiYWxyZWFkeSBFeGlzdHM/XCIsIGV4aXN0c0FscmVhZHkpO1xuXG5cdFx0XHQvL2lmIHJlbGF0aW9uc2hpcCBkb2Vzbid0IGV4aXN0IHlldCwgYWRkIGl0XG5cdFx0XHRpZighZXhpc3RzQWxyZWFkeSkge1xuXHRcdFx0XHRuZXdSZWNpcGlhbnQucmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwO1xuXHRcdFx0XHQkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdC5wdXNoKG5ld1JlY2lwaWFudCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vcmV0dXJuIHJlc3VsdFxuXHRcdFx0cmV0dXJuIGVudHJ5SW5kZXg7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHJlbW92ZUZyb21SZWNpcGlhbnRMaXN0KHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdyZW1vdmluZycsIHJlbGF0aW9uc2hpcCwgJ3RvIHJlY2lwaWFudCBsaXN0Jyk7XG5cblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxzXG5cdFx0XHR2YXIgaSA9IDA7XG5cblx0XHRcdC8vaXRlcmF0ZSB0aHJvdWdoIGFycmF5XG5cdFx0XHQkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHJlY2lwaWFudCkge1xuXHRcdFx0XHRpZihyZWNpcGlhbnQucmVsYXRpb25zaGlwID09IHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XHRcdCRzY29wZS51c2VyRGF0YS5yZWNpcGlhbnRMaXN0LnNwbGljZShpLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpKys7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly9yZXR1cm4gcmVzdWx0XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2VsZWN0UmVjaXBpYW50KGluZGV4KSB7XG5cblx0XHRcdCRzY29wZS5zdGF0ZS5zZWxlY3RlZFJlY2lwaWFudCA9IGluZGV4O1xuXHRcdH07XG5cblx0XHQvL3ZpZXcgbW9kZWwgZnVuY3Rpb25zXG5cdFx0Ly9VUERBVEUgT1JERVIgVklTSUJJTElUWVxuXHRcdCRzY29wZS51cGRhdGVPcmRlclZpc2libGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxlc1xuXHRcdFx0dmFyIGhhc2ggPSB7XCJvbmVcIjogMSwgXCJ0d29cIjogMiwgXCJ0aHJlZVwiOiAzLCBcImZvdXJcIjogNH07XG5cdFx0XHRcdFxuXHRcdFx0Ly9pdGVyYXRlIHRocm91Z2ggdmFsdWVzXG5cdFx0XHRPYmplY3Qua2V5cygkc2NvcGUuc3RhdGUub3JkZXIudmlzaWJpbGl0eSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0aWYoaGFzaFtrZXldIDw9IHZhbHVlKSAkc2NvcGUuc3RhdGUub3JkZXIudmlzaWJpbGl0eVtrZXldID0gdHJ1ZVxuXHRcdFx0XHRcdGVsc2UgJHNjb3BlLnN0YXRlLm9yZGVyLnZpc2liaWxpdHlba2V5XSA9IGZhbHNlXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnY2hlY2tpbmcgdmFsdWVzJywgdmFsdWUsICRzY29wZS5zdGF0ZS5vcmRlci52aXNpYmlsaXR5KTtcblx0XHRcdFxuXHRcdH07XG5cblx0XHQvL1VQREFURSBGUkVRVUVOQ1lcblx0XHQkc2NvcGUudXBkYXRlRnJlcXVlbmN5ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdCRzY29wZS51c2VyRGF0YS5zaGlwcGluZ1NjaGVkdWxlID0gc2hpcHBpbmdTY2hlZHVsZXNbdmFsdWVdO1xuXHRcdH07XG5cblx0XHQvL1VQREFURSBPUkRFUiBTQ0hFRFVMRVxuXHRcdCRzY29wZS51cGRhdGVPcmRlclNjaGVkdWxlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdH1cblxuXHRcdC8vVVBEQVRFIFRIRSBTVUJTQ1JJUFRJT04gVFlQRVxuXHRcdCRzY29wZS51cGRhdGVTdWJUeXBlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHVwZGF0ZUluZGV4ID0gMDtcblx0XHRcdCRzY29wZS51c2VyRGF0YS5zdWJUeXBlID0gdmFsdWU7XG5cblx0XHRcdGlmKHZhbHVlPT1cIm15c2VsZlwiKSB7XG5cdFx0XHRcdC8vJHNjb3BlLnN0YXRlLnJlY2lwaWVudHNCb3ggPSBcIjEwXCI7XG5cdFx0XHRcdGFkZFRvUmVjaXBpYW50TGlzdChcIk15c2VsZlwiKTtcblx0XHRcdFx0cmVtb3ZlRnJvbVJlY2lwaWFudExpc3QoXCJTb21lb25lXCIpO1xuXHRcdFx0XHRzZWxlY3RSZWNpcGlhbnQoMCk7XG5cdFx0XHR9IGVsc2UgaWYodmFsdWU9PVwib3RoZXJzXCIpIHtcblx0XHRcdFx0Ly8kc2NvcGUuc3RhdGUucmVjaXBpZW50c0JveCA9IFwiMTBcIjtcblx0XHRcdFx0dXBkYXRlSW5kZXggPSBhZGRUb1JlY2lwaWFudExpc3QoXCJTb21lb25lXCIpO1xuXHRcdFx0XHRyZW1vdmVGcm9tUmVjaXBpYW50TGlzdChcIk15c2VsZlwiKTtcblx0XHRcdFx0c2VsZWN0UmVjaXBpYW50KDApO1xuXHRcdFx0fSBlbHNlIGlmKHZhbHVlPT1cImJvdGhcIikge1xuXHRcdFx0XHQvLyRzY29wZS5zdGF0ZS5yZWNpcGllbnRzQm94ID0gXCIxMFwiO1xuXHRcdFx0XHR1cGRhdGVJbmRleCA9IGFkZFRvUmVjaXBpYW50TGlzdChcIk15c2VsZlwiKTtcblx0XHRcdFx0YWRkVG9SZWNpcGlhbnRMaXN0KFwiU29tZW9uZVwiKTtcblx0XHRcdFx0c2VsZWN0UmVjaXBpYW50KDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQkc2NvcGUuc2VsZWN0UmVjaXBpYW50ID0gZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRcdHNlbGVjdFJlY2lwaWFudChpbmRleCk7XG5cdFx0XHQkc2NvcGUuc3RhdGUudGVtcFJlY2lwaWFudCA9ICRzY29wZS51c2VyRGF0YS5yZWNpcGlhbnRMaXN0W2luZGV4XTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLnVwZGF0ZVJlY2lwaWFudFZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4ID0gJHNjb3BlLnN0YXRlLnNlbGVjdGVkUmVjaXBpYW50O1xuXHRcdFx0JHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3RbaW5kZXhdID0gJHNjb3BlLnN0YXRlLnRlbXBSZWNpcGlhbnQ7XG5cdFx0fTsqL1xuXHRcdFxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmNvbnRyb2xsZXIoJ3N1Y2Nlc3NDb250cm9sbGVyJywgc3VjY2Vzc0NvbnRyb2xsZXIpO1xuXG5zdWNjZXNzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRyb3V0ZVBhcmFtcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHN1Y2Nlc3NDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJHJvdXRlUGFyYW1zKSB7XG5cdFxuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHQkc2NvcGUuY29uZmlybWF0aW9uQ29kZSA9ICRyb3V0ZVBhcmFtcy5jb25maXJtYXRpb25Db2RlO1xuXG5cdC8vbm90aWZ5IHByb2dyZXNzXG5cdGNvbnNvbGUubG9nKCdzdWNjZXNzIGNvbnRyb2xlcicsICRyb3V0ZVBhcmFtcy5jb25maXJtYXRpb25Db2RlLCAkc2NvcGUuY29uZmlybWF0aW9uQ29kZSk7XG59OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmRpcmVjdGl2ZSgnYmlsbGluZ0FkZHJlc3MnLCBiaWxsaW5nQWRkcmVzcyk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGJpbGxpbmdBZGRyZXNzKCkge1xuXHRcdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9iaWxsaW5nQWRkcmVzcy5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogYmlsbGluZ0FkZHJlc3NDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0YmlsbGluZ0FkZHJlc3NDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGJpbGxpbmdBZGRyZXNzQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlld21vZGVsIHZhbHVlc1xuXHRcdFx0c2VsZi51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHRcdHNlbGYuc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIGJpbGxpbmcgQURkcmVzcyBjb250cm9sbGVyJywgc2VsZi5zdGF0ZS5zaGlwaW5nU2FtZUFzQmlsbGluZyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdiaWxsaW5nSW5wdXQnLCBiaWxsaW5nSW5wdXQpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBiaWxsaW5nSW5wdXQoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2JpbGxpbmdJbnB1dC5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogYmlsbGluZ0lucHV0Q29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXHRcdFxuXHRcdGJpbGxpbmdJbnB1dENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndXNlckRhdGFTZXJ2aWNlJywgJ3N0YXRlU2VydmljZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gYmlsbGluZ0lucHV0Q29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXdtb2RlbCB2YWx1ZXNcblx0XHRcdHZtLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0dm0uc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIGNvbnRhY3RJbnB1dHRDb250cm9sbGVyJyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdjb250YWN0SW5wdXQnLCBjb250YWN0SW5wdXQpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjb250YWN0SW5wdXQoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2NvbnRhY3RJbnB1dC5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogY29udGFjdElucHV0dENvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblx0XHRcblx0XHRjb250YWN0SW5wdXR0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJywgJ3ZhbGlkYXRpb25TZXJ2aWNlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBjb250YWN0SW5wdXR0Q29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlLCB2YWxpZGF0aW9uU2VydmljZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXdtb2RlbCB2YWx1ZXNcblx0XHRcdHNlbGYudXNlckRhdGEgPSB1c2VyRGF0YVNlcnZpY2U7XG5cdFx0XHRzZWxmLnN0YXRlID0gc3RhdGVTZXJ2aWNlO1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBjb250YWN0SW5wdXR0Q29udHJvbGxlcicpO1xuXHRcdFx0c2VsZi52YWxpZGF0ZSA9IGZ1bmN0aW9uKGZpZWxkLCB2YWx1ZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoZXNlJywgZmllbGQsIHZhbHVlKTtcblxuXHRcdFx0XHR2YXIgaXNWYWxpZCA9IHZhbGlkYXRpb25TZXJ2aWNlLmNvbnRhY3RbZmllbGRdKHZhbHVlKTtcblxuXHRcdFx0XHQvL3NldCBpbnB1dCB2YWx1ZVxuXHRcdFx0XHRpZihpc1ZhbGlkKSB7XG5cdFx0XHRcdFx0c2VsZi5zdGF0ZS5jb250YWN0SW5wdXRbZmllbGRdLmlucHV0Wydpcy12YWxpZCddID0gdHJ1ZTtcblx0XHRcdFx0XHRzZWxmLnN0YXRlLmNvbnRhY3RJbnB1dFtmaWVsZF0uaW5wdXRbXCJpcy1pbnZhbGlkXCJdID0gZmFsc2U7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5zdGF0ZS5jb250YWN0SW5wdXRbZmllbGRdLmlucHV0Wydpcy12YWxpZCddID0gZmFsc2U7XG5cdFx0XHRcdFx0c2VsZi5zdGF0ZS5jb250YWN0SW5wdXRbZmllbGRdLmlucHV0W1wiaXMtaW52YWxpZFwiXSA9IHRydWU7XG5cdFx0XHRcdH07XG5cblx0XHRcdH07XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdmcmVxdWVuY3lTZWxlY3Rpb24nLCBmcmVxdWVuY3lTZWxlY3Rpb24pO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBmcmVxdWVuY3lTZWxlY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZyZXF1ZW5jeVNlbGVjdGlvbi5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogZnJlcXVlbmN5U2VsZWN0aW9uQ29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXHRcdFxuXHRcdGZyZXF1ZW5jeVNlbGVjdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGZyZXF1ZW5jeVNlbGVjdGlvbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0XHRcdHNlbGYuZnJlcXVlbmNpZXMgPSBbXG5cdFx0XHRcdFwibW9udGhcIixcblx0XHRcdFx0XCJxdWFydGVyXCIsXG5cdFx0XHRcdFwieWVhclwiXG5cdFx0XHRdO1xuXG5cdFx0XHRzZWxmLnN0YXJ0cyA9IHtcblx0XHRcdFx0bW9udGg6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsXCJKdWx5XCIsXCJBdWd1c3RcIixcIlNlcHRlbWJlclwiLFwiT2N0b2JlclwiLFwiTm92ZW1iZXJcIixcIkRlY2VtYmVyXCJdLFxuXHRcdFx0XHRxdWFydGVyOiBbXCJXaW50ZXJcIiwgXCJTcHJpbmdcIiwgXCJTdW1tZXJcIiwgXCJGYWxsXCJdLFxuXHRcdFx0XHR5ZWFyOiBbXCIyMDE4XCIsIFwiMjAxOVwiLCBcIjIwMjBcIl1cblx0XHRcdH1cblxuXHRcdFx0c2VsZi5zZWxlY3RlZEZyZXF1ZW5jeSA9ICcnO1xuXHRcdFx0c2VsZi5zdGFydHNJbiA9ICcnO1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBmcmVxdWVuY3lTZWxlY3Rpb25Db250cm9sbGVyJyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdwcm9kdWN0U2VsZWN0aW9uJywgcHJvZHVjdFNlbGVjdGlvbik7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHByb2R1Y3RTZWxlY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3Byb2R1Y3RTZWxlY3Rpb24uaHRtJyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRzY29wZToge1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogcHJvZHVjdFNlbGVjdGlvbkNvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXHRcdH1cblx0XHRcblx0XHRwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJywgJ3NxdWFyZVNlcnZpY2UnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIHByb2R1Y3RTZWxlY3Rpb25Db250cm9sbGVyKCRzY29wZSwgJGxvZywgdXNlckRhdGFTZXJ2aWNlLCBzdGF0ZVNlcnZpY2UsIHNxdWFyZVNlcnZpY2UpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHRcdFx0c2VsZi51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHRcdHNlbGYuc3RhdGUgPSBzdGF0ZVNlcnZpY2UucHJvZHVjdFNlbGVjdGlvbjtcblx0XHRcdHNlbGYuc3RhdGVbJ2luZm9Cb3gnXSA9IHN0YXRlU2VydmljZS5pbmZvQm94ZXMuZmxhdm9yRGVmcztcblxuXHRcdFx0Ly8gZG9ubG9hZCByZXNvdXJjZXNcblx0XHRcdHNxdWFyZVNlcnZpY2UuZG93bmxvYWQucHJvZHVjdExpc3QoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKXtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnZ290IHRoaXMgcHJvZHVjdCBsaXN0Jywgcyk7XG5cdFx0XHRcdHNlbGYuZmxhdm9ycyA9IHM7XG5cdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Byb2R1Y3QgbGlzdCBlcnJvciwgJywgZSk7XG5cdFx0XHR9KTtcblxuXG5cblx0XHRcdHNlbGYub3JkZXJMaXN0ID0gdXNlckRhdGFTZXJ2aWNlLm9yZGVyO1xuXG5cdFx0XHRzZWxmLnByb2R1Y3RQcmljZSA9IDE2OTk7XG5cblx0XHRcdHNlbGYub3JkZXIgPSB1c2VyRGF0YVNlcnZpY2UudGVuZGVyO1xuXG5cblx0XHRcdHZhciBwcm9kdWN0T2JqZWN0ID0geyBcblx0XHRcdFx0aWQ6IDEsIFxuXHRcdFx0XHRzcXJJZDogXCJcIixcblx0XHRcdFx0c3FWYXJJZDogXCJcIixcblx0XHRcdFx0Zmxhdm9yOiBcIlwiLCBcblx0XHRcdFx0bWl4Zmx2ckNvdW50OiAwLFxuXHRcdFx0XHRtaXhmbHZyczoge1xuXHRcdFx0XHRcdHNycGVjOiB7IGlkOiBcInNycGVjXCIsIG5hbWU6IFwiU1IgUGVjYW5zXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gfSxcblx0XHRcdFx0XHRzcmFsbTogeyBpZDogXCJzcmFsbVwiLCBuYW1lOiBcIlNSIEFsbW9uZHNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfSxcblx0XHRcdFx0XHRzcmNzaDogeyBpZDogXCJzcmNzaFwiLCBuYW1lOiBcIlNSIENhc2hld3NcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfSxcblx0XHRcdFx0XHRzcnBlYTogeyBpZDogXCJzcnBlYVwiLCBuYW1lOiBcIlNSIFBlYW51dHNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfSxcblx0XHRcdFx0XHRjbnBlYzogeyBpZDogXCJjbnBlY1wiLCBuYW1lOiBcIkNpbiBQZWNhbnNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfSxcblx0XHRcdFx0XHRjbmFsbTogeyBpZDogXCJjbmFsbVwiLCBuYW1lOiBcIkNpbiBBbG1vbmRzXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gIH0sXG5cdFx0XHRcdFx0ZHJwZWM6IHsgaWQ6IFwiZHJwZWNcIiwgbmFtZTogXCJEcnVuayBQZWNhbnNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtaXhGbHZyc1NlbGVjdGVkOiBbXSxcblx0XHRcdFx0bWl4OiBcIlwiXG5cdFx0XHR9O1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlcicpO1xuXG5cdFx0XHQvL2RlZmluZSBsb2NhbCBmdW5jdGlvbnNcblx0XHRcdGZ1bmN0aW9uIHN1bU9yZGVyKCkge1xuXG5cdFx0XHRcdHNlbGYub3JkZXIudG90YWwgPSAoc2VsZi5vcmRlckxpc3QubGVuZ3RoICogc2VsZi5wcm9kdWN0UHJpY2UpIC0gc2VsZi5vcmRlci5kaXNjb3VudHM7XG5cdFx0XHRcdGlmKHNlbGYub3JkZXJMaXN0Lmxlbmd0aCA9PSA0KSBzZWxmLm9yZGVyLnRvdGFsID0gc2VsZi5vcmRlci50b3RhbCAtIHNlbGYucHJvZHVjdFByaWNlO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly9kZWZpbmUgdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0XHRcdC8vQUREIEEgUFJPRFVDVCBCVVRUT05cblx0XHRcdHNlbGYuYWRkQVByb2R1Y3QgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFiZWxzXG5cdFx0XHRcdHZhciBub09mUHJvZHVjdHMgPSBzZWxmLm9yZGVyTGlzdC5sZW5ndGg7XG5cblx0XHRcdFx0Ly9pZiB0aGVyZSBpcyByb29tIGFkZCBhbm90aGVyIHByb2R1Y3Rcblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzIDwgNCkgc2VsZi5vcmRlckxpc3QucHVzaChPYmplY3QuY3JlYXRlKHByb2R1Y3RPYmplY3QpKTtcblxuXHRcdFx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgYXZhaWxhYmxlIHNsb3QgaGlkZSB0aGUgYWRkIGJ1dHRvblxuXHRcdFx0XHRpZihub09mUHJvZHVjdHMgPT0gMykgc2VsZi5zdGF0ZS5hZGRBUHJvZHVjdEJ0bi52aXNpYmxlID0gZmFsc2U7XG5cblx0XHRcdFx0Ly9pZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHByb2R1Y3QgYWRkIHRoZSByZW1vdmUgYnV0dG9uXG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA+IDApIHNlbGYuc3RhdGUucmVtb3ZlTGFzdFByb2R1Y3RCdG4udmlzaWJsZSA9IHRydWU7XG5cblx0XHRcdFx0Ly9tYWtlIHN1cmUgdGhlIGlkJ3MgYXJlIGNvcnJlY3Rcblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8PSBub09mUHJvZHVjdHM7IGkrKykge1xuXHRcdFx0XHRcdHNlbGYub3JkZXJMaXN0W2ldLmlkID0gaSArIDFcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vY2FsY3VsYXRlIG1vbmV5XG5cdFx0XHRcdC8vaWYobm9PZlByb2R1Y3RzID09IDMpIHNlbGYub3JkZXIuZGlzY291bnRzID0gc2VsZi5wcm9kdWN0UHJpY2U7XG5cblx0XHRcdFx0c3VtT3JkZXIoKTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnYWRkaW5nIGEgcHJvZHVjdCcpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly9SRU1PVkUgTEFTVCBQUk9EVUNUIEJVVFRPTlxuXHRcdFx0c2VsZi5yZW1vdmVMYXN0UHJvZHVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIG5vT2ZQcm9kdWN0cyA9IHNlbGYub3JkZXJMaXN0Lmxlbmd0aDtcblx0XHRcdFx0dmFyIHJlbW92ZUluZGV4ID0gbm9PZlByb2R1Y3RzIC0gMTtcblxuXHRcdFx0XHQvL2lmIHRoZXJlIGFyZSBhdCBsZWFzdCB0d28gcHJvZHVjdHMsIHJlbW92ZSBvbmVcblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzID4gMSkgc2VsZi5vcmRlckxpc3Quc3BsaWNlKHJlbW92ZUluZGV4LCAxKTtcblxuXHRcdFx0XHQvL2lmIGRvd24gdG8gb25lIGl0ZW0sIGhpZGUgdGhlIHJlbW92ZSBidXR0b25cblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzID09IDIpIHNlbGYuc3RhdGUucmVtb3ZlTGFzdFByb2R1Y3RCdG4udmlzaWJsZSA9IGZhbHNlO1xuXG5cdFx0XHRcdC8vYnJpbmcgdGhlIGFkZCBidXR0b24gYmFja1xuXHRcdFx0XHRzZWxmLnN0YXRlLmFkZEFQcm9kdWN0QnRuLnZpc2libGUgPSB0cnVlO1xuXG5cdFx0XHRcdC8vY2FsY3VsYXRlIG1vbmV5XG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA9PSA0KSBzZWxmLm9yZGVyLmRpc2NvdW50cyA9IDA7XG5cblx0XHRcdFx0c3VtT3JkZXIoKTtcblxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdyZW1vdmluZyBwcm9kdWN0Jywgbm9PZlByb2R1Y3RzKTtcblx0XHRcdH07XG5cblx0XHRcdC8vUkVNT1ZFIEEgUFJPRFVDVCBCVVRUT05cblx0XHRcdHNlbGYucmVtb3ZlQVByb2R1Y3QgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIG5vT2ZQcm9kdWN0cyA9IHNlbGYub3JkZXJMaXN0Lmxlbmd0aDtcblx0XHRcdFx0dmFyIHJlbW92ZUluZGV4ID0gaWQgLSAxO1xuXG5cdFx0XHRcdC8vaWYgdGhlcmUgYXJlIGF0IGxlYXN0IHR3byBwcm9kdWN0cywgcmVtb3ZlIG9uZVxuXHRcdFx0XHRpZihub09mUHJvZHVjdHMgPiAxKSBzZWxmLm9yZGVyTGlzdC5zcGxpY2UocmVtb3ZlSW5kZXgsIDEpO1xuXG5cdFx0XHRcdC8vbWFrZSBzdXJlIHRoZSBpZCdzIGFyZSBjb3JyZWN0XG5cdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPD0gKHNlbGYub3JkZXJMaXN0Lmxlbmd0aCAtIDEpOyBpKyspIHtcblx0XHRcdFx0XHRzZWxmLm9yZGVyTGlzdFtpXS5pZCA9IGkgKyAxXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzdW1PcmRlcigpO1xuXHRcdFx0fVxuXG5cdFx0XHQvL1ZBTElEQVRFIFRIRSBQUk9EVUNUUyBXSEVOIENIQU5HRURcblx0XHRcdHNlbGYudmFsaWRhdGVQcm9kdWN0cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgdmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInZhbGlkYXRlaW5nIHByb2R1Y3RzXCIpO1xuXG5cdFx0XHRcdGlmKHZhbGlkKSBzZWxmLnN0YXRlLmhlYWRlclN0eWxlLmNvbG9yID0gXCJyZ2IoMCwxNjUsMTI4KVwiXG5cdFx0XHR9XG5cblx0XHRcdC8vXG5cdFx0XHRzZWxmLmNvdW50TWl4Rmxhdm9ycyA9IGZ1bmN0aW9uKGZsYXZvck9iamVjdCkge1xuXHRcdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0XHRcdC8vaXRlcmF0ZSB0aHJvZ3VoIG9iamVjdFxuXHRcdFx0XHRPYmplY3Qua2V5cyhmbGF2b3JPYmplY3QpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdFx0aWYoZmxhdm9yT2JqZWN0W2tleV0uc2VsZWN0ZWQpIGNvdW50ZXIrK1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHRcdH07XG5cblx0XHRcdHNlbGYudXBkYXRlU2hvcHBpbmdDYXJ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3VwZGF0aW5nIHNob3BwaW5nIGNhcnQnKTtcblx0XHRcdFx0Ly9zZWxmLnVzZXJEYXRhLm9yZGVyID0gc2VsZi5vcmRlckxpc3Q7XG5cdFx0XHRcdC8vaXRlcmF0ZSBvdmVyIHByb2R1Y3RzXG5cdFx0XHRcdHNlbGYub3JkZXJMaXN0LmZvckVhY2goZnVuY3Rpb24ocHJvZHVjdCkge1xuXG5cdFx0XHRcdFx0Ly9pdGVyYXRlIG92ZXIgYWxsIGZsYXZvcnNcblx0XHRcdFx0XHRzZWxmLmZsYXZvcnMuZm9yRWFjaChmdW5jdGlvbihmbGF2b3IpIHtcblx0XHRcdFx0XHRcdC8vb25seSBpZiB0aGUgcHJvZHVjdCBpcyBhIG1hdGNoXG5cdFx0XHRcdFx0XHRpZihmbGF2b3IubmFtZSA9PSBwcm9kdWN0LmZsYXZvcikge1xuXHRcdFx0XHRcdFx0XHRwcm9kdWN0LnNxcklkID0gZmxhdm9yLmlkO1xuXG5cdFx0XHRcdFx0XHRcdGlmKHByb2R1Y3QuaWQgPCA0KSBwcm9kdWN0LnNxVmFySWQgPSBmbGF2b3IudmFyaWF0aW9uc1swXS5pZFxuXHRcdFx0XHRcdFx0XHRlbHNlIHByb2R1Y3Quc3FWYXJJZCA9IGZsYXZvci52YXJpYXRpb25zWzFdLmlkXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXG5cblx0XHRcdFx0Y29uc29sZS5sb2coc2VsZi5vcmRlckxpc3QpO1xuXG5cdFx0XHR9O1xuXG5cdFx0XHRzZWxmLmJ1aWxkRmxhdm9yTGlzdCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdC8vY2xlYW4gdGhlIGxpc3Rcblx0XHRcdFx0c2VsZi5vcmRlckxpc3RbaWRdLm1peEZsdnJzU2VsZWN0ZWQgPSBbXTtcblxuXHRcdFx0XHQvL25vdGlmeSBwcm9ncmVzc1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdidWlsaWRuZyBhIGZsYXZvciBsaXN0JywgaWQsIHNlbGYub3JkZXJMaXN0KTtcblxuXHRcdFx0XHQvL2l0cmF0ZSB0aHJvdWdoIGZsYXZvcnMsIGFkZCB0byBsaXN0IHdoZW4gdHJ1ZVxuXHRcdFx0XHRPYmplY3Qua2V5cyhzZWxmLm9yZGVyTGlzdFtpZF0ubWl4Zmx2cnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cblx0XHRcdFx0XHRpZihzZWxmLm9yZGVyTGlzdFtpZF0ubWl4Zmx2cnNba2V5XS5zZWxlY3RlZClcblx0XHRcdFx0XHRcdHNlbGYub3JkZXJMaXN0W2lkXS5taXhGbHZyc1NlbGVjdGVkLnB1c2goc2VsZi5vcmRlckxpc3RbaWRdLm1peGZsdnJzW2tleV0ubmFtZSk7XG5cdFx0XHRcdH0pO1xuXG5cblxuXHRcdFx0fTtcblxuXHRcdFx0Ly9zdGFydCB0aGlzIGJ5IGFkZGluZyBhIHByb2R1Y3QgdG8gdGhlIG9yZGVyIGxpc3Rcblx0XHRcdHNlbGYub3JkZXJMaXN0LnB1c2goT2JqZWN0LmNyZWF0ZShwcm9kdWN0T2JqZWN0KSk7XG5cblx0XHRcdHN1bU9yZGVyKCk7XG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHRcdFxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmRpcmVjdGl2ZSgnc2hpcERlc3QnLCBzaGlwRGVzdCk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHNoaXBEZXN0KCkge1xuXHRcdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdFx0dGVtcGxhdGU6ICc8ZGl2PnRlc3Rpbmc8L2Rpdj4nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogc2hpcERlc3RDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0c2hpcERlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ppcGNvbXBsZXRlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBzaGlwRGVzdENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB6aXBjb21wbGV0ZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYuemlwQ2hlY2sgPSB6aXBjb21wbGV0ZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gc2hpcERlc3RDb250cm9sbGVyJyk7XG5cblxuXHRcdH1cblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XG5cdH0iLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ3NpbmdsZUFkZHJlc3NJbnB1dCcsIHNpbmdsZUFkZHJlc3NJbnB1dCk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHNpbmdsZUFkZHJlc3NJbnB1dCgpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2luZ2xlQWRkcmVzc0lucHV0Lmh0bScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0YWRkcmVzczogXCI9XCJcblx0XHRcdH0sXG5cdFx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRcdGNvbnRyb2xsZXI6IHNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblx0XHRcblx0XHRzaW5nbGVBZGRyZXNzSW5wdXRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnLCAndmFsaWRhdGlvblNlcnZpY2UnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIHNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB1c2VyRGF0YVNlcnZpY2UsIHN0YXRlU2VydmljZSwgdmFsaWRhdGlvblNlcnZpY2UpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3bW9kZWwgdmFsdWVzXG5cdFx0XHRzZWxmLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0c2VsZi5zdGF0ZSA9IHN0YXRlU2VydmljZVxuXHRcdFx0Y29uc29sZS5sb2coJ2luIHNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXInLCB2YWxpZGF0aW9uU2VydmljZSk7XG5cblx0XHRcdHNlbGYudmFsaWRhdGUgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpIHtcblx0XHRcdFx0dmFyIGlzVmFsaWQgPSB2YWxpZGF0aW9uU2VydmljZS5waHlzaWNhbEFkZHJlc3Nlc1tmaWVsZF0odmFsdWUpO1xuXG5cdFx0XHRcdC8vc2V0IGlucHV0IHZhbHVlXG5cdFx0XHRcdGlmKGlzVmFsaWQpIHtcblx0XHRcdFx0XHRzZWxmLnN0YXRlLnNpbmdsZUFkZHJlc3NJbnB1dFtmaWVsZF0uaW5wdXRbJ2lzLXZhbGlkJ10gPSB0cnVlO1xuXHRcdFx0XHRcdHNlbGYuc3RhdGUuc2luZ2xlQWRkcmVzc0lucHV0W2ZpZWxkXS5pbnB1dFtcImlzLWludmFsaWRcIl0gPSBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWxmLnN0YXRlLnNpbmdsZUFkZHJlc3NJbnB1dFtmaWVsZF0uaW5wdXRbJ2lzLXZhbGlkJ10gPSBmYWxzZTtcblx0XHRcdFx0XHRzZWxmLnN0YXRlLnNpbmdsZUFkZHJlc3NJbnB1dFtmaWVsZF0uaW5wdXRbXCJpcy1pbnZhbGlkXCJdID0gdHJ1ZTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvL21hcmsgYXMgdmFsaWRhdGVkIC8vIG9ubHkgYXBwbGllcyBpZiB3ZSdyZSBub3QgZG9pbmcgZnVydGhlciB2YWxpZGF0aW9uXG5cdFx0XHRcdC8vc2VsZi5zdGF0ZS5zaW5nbGVBZGRyZXNzSW5wdXRbZmllbGRdLmZpZWxkWyd3YXMtdmFsaWRhdGVkJ10gPSB0cnVlO1xuXHRcdFx0XHQvL3NlbGYuc3RhdGUuc2luZ2xlQWRkcmVzc0lucHV0W2ZpZWxkXS5maWVsZFtcIm5lZWRzLXZhbGlkYXRpb25cIl0gPSBmYWxzZTtcblxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKGZpZWxkLCBcImlzIHZhbGlkPzpcIiwgaXNWYWxpZCk7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coc2VsZi5zdGF0ZS5zaW5nbGVBZGRyZXNzSW5wdXRbZmllbGRdKTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdHNlbGYudXBkYXRlQmlsbGluZ0FkZHJlc3MgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoc2VsZi5zdGF0ZS5zaGlwaW5nU2FtZUFzQmlsbGluZykge1xuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3Muc3RyZWV0ID0gc2VsZi51c2VyRGF0YS5zaGlwcGluZ0Rlc3RpbmF0aW9uLnN0cmVldFxuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3MuemlwID0gc2VsZi51c2VyRGF0YS5zaGlwcGluZ0Rlc3RpbmF0aW9uLnppcFxuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3MuY2l0eSA9IHNlbGYudXNlckRhdGEuc2hpcHBpbmdEZXN0aW5hdGlvbi5jaXR5XG5cdFx0XHRcdFx0c2VsZi51c2VyRGF0YS5iaWxsaW5nQWRkcmVzcy5zdGF0ZSA9IHNlbGYudXNlckRhdGEuc2hpcHBpbmdEZXN0aW5hdGlvbi5zdGF0ZVxuXHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHR9O1xuXG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHRcdFxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmRpcmVjdGl2ZSgnc3ViVGVybXNDb25kJywgc3ViVGVybXNDb25kKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gc3ViVGVybXNDb25kKCkge1xuXHRcdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9zdWJUZXJtc0NvbmQuaHRtJyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRzY29wZToge1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogc3ViVGVybXNDb25kQ29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cdFx0fVxuXHRcdFxuXHRcdHN1YlRlcm1zQ29uZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJ3N0YXRlU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnLCAndmFsaWRhdGlvblNlcnZpY2UnLCAnc3VibWlzc2lvblNlcnZpY2UnLCAnc3F1YXJlU2VydmljZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gc3ViVGVybXNDb25kQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgc3RhdGVTZXJ2aWNlLCB1c2VyRGF0YVNlcnZpY2UsIHZhbGlkYXRpb25TZXJ2aWNlLCBzdWJtaXNzaW9uU2VydmljZSwgc3F1YXJlU2VydmljZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdFx0XHRzZWxmLnN0YXRlID0gc3RhdGVTZXJ2aWNlO1xuXHRcdFx0c2VsZi51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHRcdHNlbGYudmFsaWRhdGUgPSB2YWxpZGF0aW9uU2VydmljZTtcblx0XHRcdHNlbGYuc3F1YXJlID0gc3F1YXJlU2VydmljZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gc3ViVGVybXNDb25kQ29udHJvbGxlcicpO1xuXHRcdFx0LypzZWxmLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0dGlnIHRoZSBmb3JtJyk7XG5cblx0XHRcdFx0Ly9zdWJtaXQgdGhlIGZvcm1cblx0XHRcdFx0c3VibWlzc2lvblNlcnZpY2Uuc3VibWl0KHNlbGYudXNlckRhdGEpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XHRcdHZhciBuZXdQYXRoID0gJy9zdWNjZXNzLycgKyBzLmRhdGE7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHBhdGggYmFjaycsIG5ld1BhdGgpXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgobmV3UGF0aCk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0aGVyZSB3YXMgYW4gZXJyb3InLCBlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9Ki9cblxuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCIvKlxuKlx0Uk9VVEVTLUNPTkZJR1xuKlxuKlx0VGhpcyBtb2R1bGUgc2V0cyB1cCBhbGwgdGhlIHJlcXVpcmVkIGFuZ3VsYXIgcm91dGVzIGZvciB0aGlzIHdlYiBhcHAuXG4qL1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2Fuc3ViJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcbiAgICAkcm91dGVQcm92aWRlclxuXHQvL1BVQkxJQyBST1VURVNcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9tb250aGx5U3ViLmh0bScsICAgICAgLy8ndmlld3MvbW9udGhseVN1Yi5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtYWluQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3N1Y2Nlc3MvOmNvbmZpcm1hdGlvbkNvZGUnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc3VjY2Vzcy5odG0nLCAgICAgIC8vJ3ZpZXdzL3N1Y2Nlc3MuaHRtbCdcbiAgICAgICAgY29udHJvbGxlcjogJ3N1Y2Nlc3NDb250cm9sbGVyJywgICAgICAgICAgIC8vJ3N1Y2Nlc3MnXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG5cdC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuLypcbiogICBSRVFVSVJFRCBGVU5DVElPTlNcbipcbiovXG5cblxuIiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgnZXJyb3JIYW5kbGluZ1NlcnZpY2UnLCBlcnJvckhhbmRsaW5nU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbmVycm9ySGFuZGxpbmdTZXJ2aWNlLiRpbmplY3QgPSBbXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBlcnJvckhhbmRsaW5nU2VydmljZSgpIHtcblx0Ly9kZWZpbmUgbG9jYWwgdmFyYWlibGVzXG5cdHZhciBlcnJvckhhbmRsaW5nID0ge1xuXHRcdFxuXHR9O1xuXG5cdHJldHVybiBlcnJvckhhbmRsaW5nO1xufTtcdCIsIlx0YW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgnbW9kYWxTZXJ2aWNlJywgbW9kYWxTZXJ2aWNlKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0bW9kYWxTZXJ2aWNlLiRpbmplY3QgPSBbJyR1aWJNb2RhbCddO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBtb2RhbFNlcnZpY2UoJHVpYk1vZGFsKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG1vZGFsRGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBiYWNrZHJvcDogdHJ1ZSxcbiAgICAgICAgICAgIGtleWJvYXJkOiB0cnVlLFxuICAgICAgICAgICAgbW9kYWxGYWRlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9tb2RhbC5odG0nXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG1vZGFsT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uVGV4dDogJ0Nsb3NlJyxcbiAgICAgICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICdPSycsXG4gICAgICAgICAgICBoZWFkZXJUZXh0OiAnUHJvY2VlZD8nLFxuICAgICAgICAgICAgYm9keVRleHQ6ICdQZXJmb3JtIHRoaXMgYWN0aW9uPydcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNob3dNb2RhbCA9IGZ1bmN0aW9uIChjdXN0b21Nb2RhbERlZmF1bHRzLCBjdXN0b21Nb2RhbE9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghY3VzdG9tTW9kYWxEZWZhdWx0cykgY3VzdG9tTW9kYWxEZWZhdWx0cyA9IHt9O1xuICAgICAgICAgICAgY3VzdG9tTW9kYWxEZWZhdWx0cy5iYWNrZHJvcCA9ICdzdGF0aWMnO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvdyhjdXN0b21Nb2RhbERlZmF1bHRzLCBjdXN0b21Nb2RhbE9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uIChjdXN0b21Nb2RhbERlZmF1bHRzLCBjdXN0b21Nb2RhbE9wdGlvbnMpIHtcbiAgICAgICAgICAgIC8vQ3JlYXRlIHRlbXAgb2JqZWN0cyB0byB3b3JrIHdpdGggc2luY2Ugd2UncmUgaW4gYSBzaW5nbGV0b24gc2VydmljZVxuICAgICAgICAgICAgdmFyIHRlbXBNb2RhbERlZmF1bHRzID0ge307XG4gICAgICAgICAgICB2YXIgdGVtcE1vZGFsT3B0aW9ucyA9IHt9O1xuXG4gICAgICAgICAgICAvL01hcCBhbmd1bGFyLXVpIG1vZGFsIGN1c3RvbSBkZWZhdWx0cyB0byBtb2RhbCBkZWZhdWx0cyBkZWZpbmVkIGluIHNlcnZpY2VcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHRlbXBNb2RhbERlZmF1bHRzLCBtb2RhbERlZmF1bHRzLCBjdXN0b21Nb2RhbERlZmF1bHRzKTtcblxuICAgICAgICAgICAgLy9NYXAgbW9kYWwuaHRtbCAkc2NvcGUgY3VzdG9tIHByb3BlcnRpZXMgdG8gZGVmYXVsdHMgZGVmaW5lZCBpbiBzZXJ2aWNlXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh0ZW1wTW9kYWxPcHRpb25zLCBtb2RhbE9wdGlvbnMsIGN1c3RvbU1vZGFsT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmICghdGVtcE1vZGFsRGVmYXVsdHMuY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHRlbXBNb2RhbERlZmF1bHRzLmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxPcHRpb25zID0gdGVtcE1vZGFsT3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsT3B0aW9ucy5vayA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbE9wdGlvbnMuY2xvc2UgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAkbW9kYWwub3Blbih0ZW1wTW9kYWxEZWZhdWx0cykucmVzdWx0O1xuICAgICAgICB9O1xuXHRcdFxuXHR9O1x0IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgnc2VydmVyU2VydmljZScsIHNlcnZlclNlcnZpY2UpO1xuXHRcdFxuLyogQG5nSW5qZWN0ICovXG5zZXJ2ZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc2VydmVyU2VydmljZSgkaHR0cCkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHNlcnZlclNlcnZpY2UgPSB7XG5cdFx0Y2hhcmdlQ2FyZDogY2hhcmdlQ2FyZCxcblx0XHRnZXQ6IHtcblx0XHRcdHNxckFwcElkOiBnZXRTcXJBcHBJZCxcblx0XHRcdHNxclByZGN0TGlzdDogZ2V0U3FyUHJkY3RMaXN0XG5cdFx0fVxuXHR9O1xuXG5cdC8vY2hhcmdlIGEgY3JlZGl0IGNhcmRcblx0ZnVuY3Rpb24gY2hhcmdlQ2FyZCh1cmwsIGRhdGEpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogZGF0YVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnNlJywgcmVzcG9uc2UpO1xuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH0pO1x0XHRcdFxuXHR9O1xuXG5cdC8vZ2V0c3QgdGhlIHJlcXVpcmVkIGNvZGVcblx0ZnVuY3Rpb24gZ2V0U3FyQXBwSWQoKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XG5cdFx0Ly9sb2cgcHJvZ3Jlc3Ncblx0XHQvLyRsb2cuaW5mbygnc2VuZGluZyBmcm9tIHNxcicpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvc3F1YXJlSWQnXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcmVzcG9uc2UnLCByZXNwb25zZSk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XHRcblx0fTtcblxuXHRmdW5jdGlvbiBnZXRTcXJQcmRjdExpc3QoKSB7XG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvcHJvZHVjdExpc3QnXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcmVzcG9uc2UnLCByZXNwb25zZSk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0cmV0dXJuIHNlcnZlclNlcnZpY2U7XG59O1x0IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgnc3F1YXJlU2VydmljZScsIHNxdWFyZVNlcnZpY2UpO1xuXHRcdFxuLyogQG5nSW5qZWN0ICovXG5zcXVhcmVTZXJ2aWNlLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJ3NlcnZlclNlcnZpY2UnLCAndXNlckRhdGFTZXJ2aWNlJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc3F1YXJlU2VydmljZSgkcm9vdFNjb3BlLCAkbG9jYXRpb24sIHNlcnZlclNlcnZpY2UsIHVzZXJEYXRhU2VydmljZSkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdHZhciBzcXVhcmVTZXJ2aWNlID0ge1xuXHRcdF9jaGFyZ2VDYXJkV2l0aE5vbmNlOiBfY2hhcmdlQ2FyZFdpdGhOb25jZSxcblx0XHRzdWJtaXRGb3JtOiBzdWJtaXRGb3JtLFxuXHRcdGRvd25sb2FkOiB7XG5cdFx0XHRwcm9kdWN0TGlzdDogZG93bmxvYWRQcm9kdWN0TGlzdFxuXHRcdH0sXG5cdFx0aW5pdDogaW5pdFxuXHR9O1xuXG5cdC8vY2hhcmdlIGNhcmQgd2l0aCBub25jZVxuXHRmdW5jdGlvbiBfY2hhcmdlQ2FyZFdpdGhOb25jZShub25jZSkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1cmwgPSAnL2FwaS9jaGFyZ2VfY2FyZCc7XG5cdFx0dXNlckRhdGFTZXJ2aWNlLmNhcmQubm9uY2UgPSBub25jZTtcblxuXHRcdC8vcGFzcyB0aGUgZGF0YSB0byB0aGUgc2VydmVyXG5cdFx0c2VydmVyU2VydmljZS5jaGFyZ2VDYXJkKHVybCwgdXNlckRhdGFTZXJ2aWNlKVxuXHRcdC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgbmV3UGF0aCA9ICcvc3VjY2Vzcy8nICsgcy5kYXRhO1xuXG5cdFx0XHQvL2xvZyBwcm9ncmVzc1xuXHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHBhdGggYmFjaycsIG5ld1BhdGgpO1xuXG5cdFx0XHQvL3JlLXJvdXRlIHRoZSBwYWdlXG5cdFx0XHQkbG9jYXRpb24ucGF0aChuZXdQYXRoKTtcblx0XHRcdCRyb290U2NvcGUuJGFwcGx5KCk7XG5cblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnRXJyb3I6JyxlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL3N1Ym1pdHMgdGhlIGZvcm0gZm9yIHVzXG5cdGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7XG5cdFx0Y29uc29sZS5sb2coJ3N1Ym1pdHRpbmcgZm9ybScpO1xuXHRcdHNlbGYucGF5bWVudEZvcm0ucmVxdWVzdENhcmROb25jZSgpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRvd25sb2FkUHJvZHVjdExpc3QoKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9pdCB0aGUgc2VydmVyIFxuXHRcdFx0c2VydmVyU2VydmljZS5nZXQuc3FyUHJkY3RMaXN0KClcblx0XHRcdC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XHRyZXNvbHZlKHMpO1xuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0XHRyZWplY3QoZSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH07XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblxuXHRcdC8vY29sbGVjdCB0aGUgc3F1YXJlQXBwSWRcblx0XHRzZXJ2ZXJTZXJ2aWNlLmdldC5zcXJBcHBJZCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3FBcHApIHtcblxuXHRcdFx0c2VsZi5wYXltZW50Rm9ybSA9IG5ldyBTcVBheW1lbnRGb3JtKHtcblx0XHQgICAgYXBwbGljYXRpb25JZDogc3FBcHAuaWQsXG5cdFx0ICAgIGlucHV0Q2xhc3M6ICdzcS1pbnB1dCcsXG5cdFx0ICAgIGlucHV0U3R5bGVzOiBbXG5cdFx0ICAgICAge1xuXHRcdCAgICAgICAgZm9udFNpemU6ICcxNHB4JyxcbiAgICAgICAgICAgIFx0cGFkZGluZzogJzdweCAxMnB4JyxcbiAgICAgICAgICAgIFx0YmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCJcblx0XHQgICAgICB9XG5cdFx0ICAgIF0sXG5cdFx0ICAgIGNhcmROdW1iZXI6IHtcblx0XHQgICAgICBlbGVtZW50SWQ6ICdzcS1jYXJkLW51bWJlcicsXG5cdFx0ICAgICAgcGxhY2Vob2xkZXI6ICfigKLigKLigKLigKIg4oCi4oCi4oCi4oCiIOKAouKAouKAouKAoiDigKLigKLigKLigKInXG5cdFx0ICAgIH0sXG5cdFx0ICAgIGN2djoge1xuXHRcdCAgICAgIGVsZW1lbnRJZDogJ3NxLWN2dicsXG5cdFx0ICAgICAgcGxhY2Vob2xkZXI6ICdDVlYnXG5cdFx0ICAgIH0sXG5cdFx0ICAgIGV4cGlyYXRpb25EYXRlOiB7XG5cdFx0ICAgICAgZWxlbWVudElkOiAnc3EtZXhwaXJhdGlvbi1kYXRlJyxcblx0XHQgICAgICBwbGFjZWhvbGRlcjogJ01NL1lZJ1xuXHRcdCAgICB9LFxuXHRcdCAgICBwb3N0YWxDb2RlOiB7XG5cdFx0ICAgICAgZWxlbWVudElkOiAnc3EtcG9zdGFsLWNvZGUnXG5cdFx0ICAgIH0sXG5cdFx0ICAgIGNhbGxiYWNrczoge1xuXG5cdFx0XHQgICAgICAvLyBDYWxsZWQgd2hlbiB0aGUgU3FQYXltZW50Rm9ybSBjb21wbGV0ZXMgYSByZXF1ZXN0IHRvIGdlbmVyYXRlIGEgY2FyZFxuXHRcdFx0ICAgICAgLy8gbm9uY2UsIGV2ZW4gaWYgdGhlIHJlcXVlc3QgZmFpbGVkIGJlY2F1c2Ugb2YgYW4gZXJyb3IuXG5cdFx0XHQgICAgICBjYXJkTm9uY2VSZXNwb25zZVJlY2VpdmVkOiBmdW5jdGlvbihlcnJvcnMsIG5vbmNlLCBjYXJkRGF0YSkge1xuXHRcdFx0ICAgICAgICBpZiAoZXJyb3JzKSB7XG5cdFx0XHQgICAgICAgICAgY29uc29sZS5sb2coXCJFbmNvdW50ZXJlZCBlcnJvcnM6XCIsIGVycm9ycyk7XG5cdFx0XHQgICAgICAgICAgc2VsZi5jYXJkX2Vycm9ycyA9IGVycm9ycztcblx0ICAgICAgICAgICAgXHQgIHNlbGYuaXNQcm9jZXNzaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgIFx0ICAvLyRzY29wZS4kYXBwbHkoKTsgLy8gcmVxdWlyZWQgc2luY2UgdGhpcyBpcyBub3QgYW4gYW5ndWxhciBmdW5jdGlvblxuXG5cdFx0XHQgICAgICAgIC8vIE5vIGVycm9ycyBvY2N1cnJlZC4gRXh0cmFjdCB0aGUgY2FyZCBub25jZS5cblx0XHRcdCAgICAgICAgfSBlbHNlIHtcblx0XHRcdCAgICAgICAgICBzZWxmLmNhcmRfZXJyb3JzID0gW107XG5cdFx0XHQgICAgICAgICAgLy8gRGVsZXRlIHRoaXMgbGluZSBhbmQgdW5jb21tZW50IHRoZSBsaW5lcyBiZWxvdyB3aGVuIHlvdSdyZSByZWFkeVxuXHRcdFx0ICAgICAgICAgIC8vIHRvIHN0YXJ0IHN1Ym1pdHRpbmcgbm9uY2VzIHRvIHlvdXIgc2VydmVyLlxuXHRcdFx0ICAgICAgICAgIC8vYWxlcnQoJ05vbmNlIHJlY2VpdmVkOiAnICsgbm9uY2UpO1xuXG5cdFx0XHQgICAgICAgICAgX2NoYXJnZUNhcmRXaXRoTm9uY2Uobm9uY2UpO1xuXG5cdFx0XHQgICAgICAgICAgLypcblx0XHRcdCAgICAgICAgICAgIFRoZXNlIGxpbmVzIGFzc2lnbiB0aGUgZ2VuZXJhdGVkIGNhcmQgbm9uY2UgdG8gYSBoaWRkZW4gaW5wdXRcblx0XHRcdCAgICAgICAgICAgIGZpZWxkLCB0aGVuIHN1Ym1pdCB0aGF0IGZpZWxkIHRvIHlvdXIgc2VydmVyLlxuXHRcdFx0ICAgICAgICAgICAgVW5jb21tZW50IHRoZW0gd2hlbiB5b3UncmUgcmVhZHkgdG8gdGVzdCBvdXQgc3VibWl0dGluZyBub25jZXMuXG5cblx0XHRcdCAgICAgICAgICAgIFlvdSdsbCBhbHNvIG5lZWQgdG8gc2V0IHRoZSBhY3Rpb24gYXR0cmlidXRlIG9mIHRoZSBmb3JtIGVsZW1lbnRcblx0XHRcdCAgICAgICAgICAgIGF0IHRoZSBib3R0b20gb2YgdGhpcyBzYW1wbGUsIHRvIGNvcnJlc3BvbmQgdG8gdGhlIFVSTCB5b3Ugd2FudCB0b1xuXHRcdFx0ICAgICAgICAgICAgc3VibWl0IHRoZSBub25jZSB0by5cblx0XHRcdCAgICAgICAgICAqL1xuXHRcdFx0ICAgICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkLW5vbmNlJykudmFsdWUgPSBub25jZTtcblx0XHRcdCAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9uY2UtZm9ybScpLnN1Ym1pdCgpO1xuXG5cdFx0XHQgICAgICAgIH1cblx0XHRcdCAgICAgIH0sXG5cblx0XHRcdCAgICAgIHVuc3VwcG9ydGVkQnJvd3NlckRldGVjdGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdCAgICAgICAgLy8gRmlsbCBpbiB0aGlzIGNhbGxiYWNrIHRvIGFsZXJ0IGJ1eWVycyB3aGVuIHRoZWlyIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC5cblx0XHRcdCAgICAgIH0sXG5cblx0XHRcdCAgICAgIC8vIEZpbGwgaW4gdGhlc2UgY2FzZXMgdG8gcmVzcG9uZCB0byB2YXJpb3VzIGV2ZW50cyB0aGF0IGNhbiBvY2N1ciB3aGlsZSBhXG5cdFx0XHQgICAgICAvLyBidXllciBpcyB1c2luZyB0aGUgcGF5bWVudCBmb3JtLlxuXHRcdFx0ICAgICAgaW5wdXRFdmVudFJlY2VpdmVkOiBmdW5jdGlvbihpbnB1dEV2ZW50KSB7XG5cdFx0XHQgICAgICAgIHN3aXRjaCAoaW5wdXRFdmVudC5ldmVudFR5cGUpIHtcblx0XHRcdCAgICAgICAgICBjYXNlICdmb2N1c0NsYXNzQWRkZWQnOlxuXHRcdFx0ICAgICAgICAgICAgLy8gSGFuZGxlIGFzIGRlc2lyZWRcblx0XHRcdCAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgICAgICAgIGNhc2UgJ2ZvY3VzQ2xhc3NSZW1vdmVkJzpcblx0XHRcdCAgICAgICAgICAgIC8vIEhhbmRsZSBhcyBkZXNpcmVkXG5cdFx0XHQgICAgICAgICAgICBicmVhaztcblx0XHRcdCAgICAgICAgICBjYXNlICdlcnJvckNsYXNzQWRkZWQnOlxuXHRcdFx0ICAgICAgICAgICAgLy8gSGFuZGxlIGFzIGRlc2lyZWRcblx0XHRcdCAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgICAgICAgIGNhc2UgJ2Vycm9yQ2xhc3NSZW1vdmVkJzpcblx0XHRcdCAgICAgICAgICAgIC8vIEhhbmRsZSBhcyBkZXNpcmVkXG5cdFx0XHQgICAgICAgICAgICBicmVhaztcblx0XHRcdCAgICAgICAgICBjYXNlICdjYXJkQnJhbmRDaGFuZ2VkJzpcblx0XHRcdCAgICAgICAgICAgIC8vIEhhbmRsZSBhcyBkZXNpcmVkXG5cdFx0XHQgICAgICAgICAgICBicmVhaztcblx0XHRcdCAgICAgICAgICBjYXNlICdwb3N0YWxDb2RlQ2hhbmdlZCc6XG5cdFx0XHQgICAgICAgICAgICAvLyBIYW5kbGUgYXMgZGVzaXJlZFxuXHRcdFx0ICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgICAgIH1cblx0XHRcdCAgICAgIH0sXG5cblx0XHRcdCAgICAgIHBheW1lbnRGb3JtTG9hZGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdCAgICAgICAgLy8gRmlsbCBpbiB0aGlzIGNhbGxiYWNrIHRvIHBlcmZvcm0gYWN0aW9ucyBhZnRlciB0aGUgcGF5bWVudCBmb3JtIGlzXG5cdFx0XHQgICAgICAgIC8vIGRvbmUgbG9hZGluZyAoc3VjaCBhcyBzZXR0aW5nIHRoZSBwb3N0YWwgY29kZSBmaWVsZCBwcm9ncmFtbWF0aWNhbGx5KS5cblx0XHRcdCAgICAgICAgLy8gcGF5bWVudEZvcm0uc2V0UG9zdGFsQ29kZShzZWxmLnVzZXJEYXRhLmJpbGxpbmdBZGRyZXNzLnppcCk7XG5cblx0XHRcdCAgICAgIH1cblx0XHRcdCAgICB9XG5cdFx0XHR9KTtcblx0ICAgIFx0c2VsZi5wYXltZW50Rm9ybS5idWlsZCgpO1xuICAgIFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuICAgIFx0fSk7XG5cblx0fVxuXG5cdHJldHVybiBzcXVhcmVTZXJ2aWNlO1xufTtcdCIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLnNlcnZpY2UoJ3N0YXRlU2VydmljZScsIHN0YXRlU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnN0YXRlU2VydmljZS4kaW5qZWN0ID0gWyd1c2VyRGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzdGF0ZVNlcnZpY2UodXNlckRhdGFTZXJ2aWNlKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgc3RhdGUgPSB7XG5cdFx0c2hpcGluZ1NhbWVBc0JpbGxpbmc6IHRydWUsXG5cdFx0cHJvZHVjdFNlbGVjdGlvbjoge1xuXHRcdFx0YWRkQVByb2R1Y3RCdG46IHtcblx0XHRcdFx0Y2xhc3Nlczoge1xuXHRcdFx0XHRcdCdidG4nOiB0cnVlLFxuXHRcdFx0XHRcdCdidG4tc3VjY2Vzcyc6IHRydWUsXG5cdFx0XHRcdFx0J2J0bi13YXJuaW5nJzogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0dmlzaWJsZTogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdHJlbW92ZUxhc3RQcm9kdWN0QnRuOiB7XG5cdFx0XHRcdGNsYXNzZXM6IHtcblx0XHRcdFx0XHQnYnRuJzogdHJ1ZSxcblx0XHRcdFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZSxcblx0XHRcdFx0XHQnYnRuLXdhcm5pbmcnOiBmYWxzZSxcblx0XHRcdFx0XHQnYnRuLWRhbmdlcic6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0dmlzaWJsZTogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHRoZWFkZXJTdHlsZToge1xuXHRcdFx0XHRjb2xvcjogXCJyZ2IoNTEsNTEsNTEpXCJcblx0XHRcdH1cblx0XHR9LFxuXHRcdGNvbnRhY3RJbmZvOiB7XG5cdFx0XHRmaXJzdG5hbWU6IHtcblx0XHRcdFx0Y2xhc3Nlczoge1xuXHRcdFx0XHRcdFwiZm9ybS1jb250cm9sXCI6IHRydWUsXG5cdFx0XHRcdFx0XCJpcy12YWxpZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcImlzLWludmFsaWRcIjogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0XHRcdFx0aXNWYWxpZDogZmFsc2UsXG5cdFx0XHRcdGlzSW52YWxpZDogZmFsc2Vcblx0XHRcdH1cblx0XHR9LFxuXHRcdGluZm9Cb3hlczoge1xuXHRcdFx0Zmxhdm9yRGVmczogZmFsc2UsXG5cdFx0XHR0ZXJtc0NvbmRzOiBmYWxzZVxuXHRcdH0sXG5cdFx0c2VjdGlvbnNBZGRyZXNzZWQ6IHtcblx0XHRcdHByb2R1Y3RTZWxlY3Rpb246IGZhbHNlLFxuXHRcdFx0c2luZ2xlU2hpcHBpbmdBZGRyZXNzOiBmYWxzZSxcblx0XHRcdGNvbnRhY3RJbmZvOiBmYWxzZSxcblx0XHRcdHRlcm1zQ29uZHM6IGZhbHNlXG5cdFx0fSxcblx0XHRzZWN0aW9uc0NvbXBsZXRlZDoge1xuXHRcdFx0cHJvZHVjdFNlbGVjdGlvbjogdHJ1ZSxcblx0XHRcdHNpbmdsZVNoaXBwaW5nQWRkcmVzczogdHJ1ZSxcblx0XHRcdGNvbnRhY3RJbmZvOiB0cnVlLFxuXHRcdFx0dGVybXNDb25kczogZmFsc2Vcblx0XHR9LFxuXHRcdHNlY3Rpb25IZWFkZXJzOiB7XG5cdFx0XHRwcm9kdWN0U2VsZWN0aW9uOiB7XG5cdFx0XHRcdHNob3dFcnJvcjogZmFsc2UsXG5cdFx0XHRcdHNob3dDb21wbGV0ZWQ6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0c2luZ2xlU2hpcHBpbmdBZGRyZXNzOiB7XG5cdFx0XHRcdHNob3dFcnJvcjogZmFsc2UsXG5cdFx0XHRcdHNob3dDb21wbGV0ZWQ6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0Y29udGFjdEluZm86IHtcblx0XHRcdFx0c2hvd0Vycm9yOiBmYWxzZSxcblx0XHRcdFx0c2hvd0NvbXBsZXRlZDogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHR0ZXJtc0NvbmRzOiB7XG5cdFx0XHRcdHNob3dFcnJvcjogZmFsc2UsXG5cdFx0XHRcdHNob3dDb21wbGV0ZWQ6IGZhbHNlXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRjaGVja0NvbXBsZXRuZXNzOiBjaGVja0NvbXBsZXRuZXNzLFxuXHRcdHJlYWR5Rm9yU3VibWlzc2lvbjogZmFsc2UsXG5cdFx0c3VibWlzc2lvbkJ0bjoge1xuXHRcdFx0XCJidG5cIjogdHJ1ZSxcblx0XHRcdFwiYnRuLWJsb2NrXCI6IHRydWUsXG5cdFx0XHRcImJ0bi1zdWNjZXNzXCI6IGZhbHNlLFxuXHRcdFx0XCJidG4tc2Vjb25kYXJ5XCI6IHRydWVcblx0XHR9LFxuXHRcdGNvbnRhY3RJbnB1dDoge1xuXHRcdFx0Zmlyc3Q6IHtcblx0XHRcdFx0ZmllbGQ6IHtcblx0XHRcdFx0XHRcIndhcy12YWxpZGF0ZWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJuZWVkcy12YWxpZGF0aW9uXCI6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0aW5wdXQ6IHtcblx0XHRcdFx0XHRcImlzLXZhbGlkXCI6IGZhbHNlLFxuXHRcdFx0XHRcdFwiaXMtaW52YWxpZFwiOiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bGFzdDoge1xuXHRcdFx0XHRmaWVsZDoge1xuXHRcdFx0XHRcdFwid2FzLXZhbGlkYXRlZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcIm5lZWRzLXZhbGlkYXRpb25cIjogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnB1dDoge1xuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRwaG9uZToge1xuXHRcdFx0XHRmaWVsZDoge1xuXHRcdFx0XHRcdFwid2FzLXZhbGlkYXRlZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcIm5lZWRzLXZhbGlkYXRpb25cIjogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnB1dDoge1xuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRmaWVsZDoge1xuXHRcdFx0XHRcdFwid2FzLXZhbGlkYXRlZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcIm5lZWRzLXZhbGlkYXRpb25cIjogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnB1dDoge1xuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSxcblx0XHRzaW5nbGVBZGRyZXNzSW5wdXQ6IHtcblx0XHRcdHN0cmVldDoge1xuXHRcdFx0XHRmaWVsZDoge1xuXHRcdFx0XHRcdFwid2FzLXZhbGlkYXRlZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcIm5lZWRzLXZhbGlkYXRpb25cIjogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnB1dDoge1xuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR6aXA6IHtcblx0XHRcdFx0ZmllbGQ6IHtcblx0XHRcdFx0XHRcIndhcy12YWxpZGF0ZWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJuZWVkcy12YWxpZGF0aW9uXCI6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0aW5wdXQ6IHtcblx0XHRcdFx0XHRcImlzLXZhbGlkXCI6IGZhbHNlLFxuXHRcdFx0XHRcdFwiaXMtaW52YWxpZFwiOiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Y2l0eToge1xuXHRcdFx0XHRmaWVsZDoge1xuXHRcdFx0XHRcdFwid2FzLXZhbGlkYXRlZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcIm5lZWRzLXZhbGlkYXRpb25cIjogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnB1dDoge1xuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRzdGF0ZToge1xuXHRcdFx0XHRmaWVsZDoge1xuXHRcdFx0XHRcdFwid2FzLXZhbGlkYXRlZFwiOiBmYWxzZSxcblx0XHRcdFx0XHRcIm5lZWRzLXZhbGlkYXRpb25cIjogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnB1dDoge1xuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0ZnVuY3Rpb24gdGVybXNDb25kc0FyZUdvb2QoKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XG5cblx0XHRyZXR1cm4gdXNlckRhdGFTZXJ2aWNlLmFncmVlZFRvVGVybXM7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0NvbXBsZXRuZXNzKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR2YXIgbm9GbGFncyA9IHRydWU7XG5cblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCByZXF1aXJubWVudHNcblx0XHRPYmplY3Qua2V5cyhzZWxmLnNlY3Rpb25zQ29tcGxldGVkKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0aWYoc2VsZi5zZWN0aW9uc0NvbXBsZXRlZFtrZXldID09IGZhbHNlKSBub0ZsYWdzID0gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHRpZihub0ZsYWdzKSB7XG5cdFx0XHRyZWFkeUZvclN1Ym1pc3Npb24gPSB0cnVlO1xuXHRcdFx0c2VsZi5zdWJtaXNzaW9uQnRuW1wiYnRuLXN1Y2Nlc3NcIl0gPSB0cnVlO1xuXHRcdFx0c2VsZi5zdWJtaXNzaW9uQnRuW1wiYnRuLXNlY29uZGFyeVwiXSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZWFkeUZvclN1Ym1pc3Npb24gPSBmYWxzZTtcblx0XHRcdHNlbGYuc3VibWlzc2lvbkJ0bltcImJ0bi1zdWNjZXNzXCJdID0gZmFsc2U7XG5cdFx0XHRzZWxmLnN1Ym1pc3Npb25CdG5bXCJidG4tc2Vjb25kYXJ5XCJdID0gdHJ1ZTtcblx0XHR9O1xuXHR9XHRcblxuXHRyZXR1cm4gc3RhdGU7XG59O1x0IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgnc3VibWlzc2lvblNlcnZpY2UnLCBzdWJtaXNzaW9uU2VydmljZSk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdHN1Ym1pc3Npb25TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHN1Ym1pc3Npb25TZXJ2aWNlKCRodHRwKSB7XG5cdFx0Ly9jb25zb2xlLmxvZygndGhpcyBpcyB0aGUgc3VibWlzc2lvbiBzZXJ2aWNlJyk7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0c2VsZi5zdWJtaXQgPSBmdW5jdGlvbih1c2VyRGF0YSkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnc3VibWl0dGluZycsIHVzZXJEYXRhKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0Ly90cnkgUE9TVFxuXHRcdFx0XHQkaHR0cCh7XG5cdFx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdFx0dXJsOiAnL3N1YnNjcmlwdGlvbi1hcHBsaWNhdGlvbi1zdWJtaXNzaW9uJyxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkYXRhOiB1c2VyRGF0YVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnNlJywgcmVzcG9uc2UpO1xuXHRcdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdH07XG5cblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCd1c2VyRGF0YVNlcnZpY2UnLCB1c2VyRGF0YVNlcnZpY2UpO1xuXHRcdFxuLyogQG5nSW5qZWN0ICovXG51c2VyRGF0YVNlcnZpY2UuJGluamVjdCA9IFtdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHVzZXJEYXRhU2VydmljZSgpIHtcblx0Ly9kZWZpbmUgbG9jYWwgdmFyYWlibGVzXG5cdHZhciB1c2VyRGF0YSA9IHtcblx0XHRuYW1lOiB7XG5cdFx0XHRmaXJzdDogXCJcIixcblx0XHRcdGxhc3Q6IFwiXCJcblx0XHR9LFxuXHRcdGNvbnRhY3Q6IHtcblx0XHRcdGVtYWlsOiBcIlwiLFxuXHRcdFx0cGhvbmU6IFwiXCJcblx0XHR9LFxuXHRcdHNoaXBwaW5nRGVzdGluYXRpb246IHtcblx0XHRcdHN0cmVldDogXCJcIixcblx0XHRcdGNpdHk6IFwiXCIsXG5cdFx0XHRzdGF0ZTogXCJcIixcblx0XHRcdHppcDogXCJcIlxuXHRcdH0sXG5cdFx0YmlsbGluZ0FkZHJlc3M6IHtcblx0XHRcdHN0cmVldDogXCJcIixcblx0XHRcdGNpdHk6IFwiXCIsXG5cdFx0XHRzdGF0ZTogXCJcIixcblx0XHRcdHppcDogXCJcIlxuXHRcdH0sXG5cdFx0Y2FyZDoge1xuXHRcdFx0Ly9jYXJkX251bWJlcjogXCJcIixcblx0XHRcdC8vY3Z2OiBcIlwiLFxuXHRcdFx0Ly9leHBpcmF0aW9uX2RhdGU6IFwiXCIsXG5cdFx0XHQvL3Bvc3RhbF9jb2RlOiBcIlwiLFxuXHRcdFx0bm9uY2U6IFwiXCIsXG5cdFx0XHRsYXN0NDogXCJcIixcblx0XHRcdHR5cGU6IFwiXCJcblx0XHR9LFxuXHRcdG9yZGVyTm86IFwiXCIsXG5cdFx0b3JkZXJEYXRlOiBcIlwiLFxuXHRcdG9yZGVyOiBbXSxcblx0XHR0ZW5kZXI6IHtcblx0XHRcdGRpc2NvdW50czogMCxcblx0XHRcdHNoaXBwaW5nOiAwLFxuXHRcdFx0dG90YWw6IDBcblx0XHR9LFxuXHRcdGFncmVlZFRvVGVybXM6IGZhbHNlXG5cdH07XG5cblx0cmV0dXJuIHVzZXJEYXRhO1xufTtcdCIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLnNlcnZpY2UoJ3ZhbGlkYXRpb25TZXJ2aWNlJywgdmFsaWRhdGlvblNlcnZpY2UpO1xuXHRcdFxuLyogQG5nSW5qZWN0ICovXG52YWxpZGF0aW9uU2VydmljZS4kaW5qZWN0ID0gWydzdGF0ZVNlcnZpY2UnLCAndXNlckRhdGFTZXJ2aWNlJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvblNlcnZpY2Uoc3RhdGVTZXJ2aWNlLCB1c2VyRGF0YVNlcnZpY2UpIHtcblx0Ly9kZWZpbmUgbG9jYWwgdmFyYWlibGVzXG5cdHZhciB2YWxpZGF0aW9uID0ge1xuXHRcdHBoeXNpY2FsQWRkcmVzc2VzOiB7XG5cdFx0XHRzdHJlZXQ6IGlzVmFsaWRTdHJpbmcsXG5cdFx0XHR6aXA6IGlzVmFsaWRaaXAsXG5cdFx0XHRjaXR5OiBpc1ZhbGlkQ2l0eSxcblx0XHRcdHN0YXRlOiBpc1ZhbGlkU3RhdGVcblx0XHR9LFxuXHRcdGNvbnRhY3Q6IHtcblx0XHRcdGZpcnN0OiBpc1ZhbGlkU3RyaW5nLFxuXHRcdFx0bGFzdDogaXNWYWxpZFN0cmluZyxcblx0XHRcdHBob25lOiBpc1ZhbGlkUGhvbmUsXG5cdFx0XHRlbWFpbDogaXN2YWxpZEVtYWlsXG5cdFx0fSxcblx0XHR0ZXJtc0FuZENvbmQ6IHRlcm1zQW5kQ29uZFxuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzVmFsaWRTdHJpbmcoYVN0cmluZykge1xuXHRcdHZhciBpc1ZhbGlkID0gZmFsc2U7XG5cblx0XHRpZiAoYVN0cmluZy5sZW5ndGggPiAwKSBpc1ZhbGlkID0gdHJ1ZTtcblxuXHRcdHJldHVybiBpc1ZhbGlkO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzVmFsaWRaaXAoYVN0cmluZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdC8vdmFyIGVycm9yTWVzc2FnZSA9IFwiXCI7XG5cblx0XHQvL3ZhciBpc1ZhbGlkID0gLyheXFxkezV9JCl8KF5cXGR7NX0tXFxkezR9JCkvLnRlc3QoYVN0cmluZyk7XG5cblx0XHQvL2lmKCFpc1ZhbGlkKSBlcnJvck1lc3NhZ2UrPSBcIlRoYXQgZG9lc24ndCBsb29rIGxpa2UgYSB2YWxpZCB6aXBjb2RlLCBwbGVhc2UgdHJ5IGFnYWluXCI7XG5cblx0XHQvL3JldHVybiB7dmFsaWQ6IGlzVmFsaWQsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZX07XG5cdFx0cmV0dXJuIC8oXlxcZHs1fSQpfCheXFxkezV9LVxcZHs0fSQpLy50ZXN0KGFTdHJpbmcpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzVmFsaWRDaXR5KGFTdHJpbmcpIHtcblx0XHRyZXR1cm4gL15bYS16QS1aXSsoPzpbXFxzLV1bYS16QS1aXSspKiQvLnRlc3QoYVN0cmluZyk7XG5cdH07XG5cblx0ZnVuY3Rpb24gaXNWYWxpZFN0YXRlKGFTdHJpbmcpIHtcblx0XHRyZXR1cm4gL14oKEFbTEtaUl0pfChDW0FPVF0pfChEW0VDXSl8KEZMKXwoR0EpfChISSl8KElbRExOQV0pfChLW1NZXSl8KExBKXwoTVtFREFJTlNPVF0pfChOW0VWSEpNWUNEXSl8KE9bSEtSXSl8KFBBKXwoUkkpfChTW0NEXSl8KFRbTlhdKXwoVVQpfChWW1RBXSl8KFdbQVZJWV0pKSQvLnRlc3QoYVN0cmluZylcblx0fTtcblxuXHRmdW5jdGlvbiBpc1ZhbGlkUGhvbmUoYVN0cmluZykge1xuXHRcdHJldHVybiAvXlsyLTldXFxkezJ9LVxcZHszfS1cXGR7NH0kLy50ZXN0KGFTdHJpbmcpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzdmFsaWRFbWFpbChhU3RyaW5nKSB7XG5cdFx0cmV0dXJuIC9eKFthLXpBLVowLTlfXFwtXFwuXSspQChbYS16QS1aMC05X1xcLVxcLl0rKVxcLihbYS16QS1aXXsyLDV9KSQvLnRlc3QoYVN0cmluZylcblx0fTtcblxuXHRmdW5jdGlvbiB0ZXJtc0FuZENvbmQoKSB7XG5cdFx0Y29uc29sZS5sb2coJ3ZhbGlkYXRpbmcgdGVybXMgYW5kIGNvbmRpdGlvbnMnKTtcblx0XHQvL21ha2Ugc3VyZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBpcyBtYXJrZWQgYXMgYWRkcmVzc2VkXG5cdFx0c3RhdGVTZXJ2aWNlLnNlY3Rpb25zQWRkcmVzc2VkLnRlcm1zQ29uZHMgPSB0cnVlO1xuXG5cdFx0Ly9zZWN0aW9uIGNvbWxldGVuZXNzIGlzIGEgcmVmbGVjdGlvbiBvZiB0aGUgYWdyZWVtZW50IHN0YXR1c1xuXHRcdHN0YXRlU2VydmljZS5zZWN0aW9uc0NvbXBsZXRlZC50ZXJtc0NvbmRzID0gdXNlckRhdGFTZXJ2aWNlLmFncmVlZFRvVGVybXM7XG5cblx0XHQvL3RvZ2dsZSBjb21wbGV0bmVzc1xuXHRcdGlmKHN0YXRlU2VydmljZS5zZWN0aW9uc0NvbXBsZXRlZC50ZXJtc0NvbmRzKSB7XG5cdFx0XHRzdGF0ZVNlcnZpY2Uuc2VjdGlvbkhlYWRlcnMudGVybXNDb25kcy5zaG93RXJyb3IgPSBmYWxzZTtcblx0XHRcdHN0YXRlU2VydmljZS5zZWN0aW9uSGVhZGVycy50ZXJtc0NvbmRzLnNob3dDb21wbGV0ZWQgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdGF0ZVNlcnZpY2Uuc2VjdGlvbkhlYWRlcnMudGVybXNDb25kcy5zaG93RXJyb3IgPSB0cnVlO1xuXHRcdFx0c3RhdGVTZXJ2aWNlLnNlY3Rpb25IZWFkZXJzLnRlcm1zQ29uZHMuc2hvd0NvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdH07XG5cblx0fTtcblxuXHRyZXR1cm4gdmFsaWRhdGlvbjtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCd6aXBjb21wbGV0ZScsIHppcGNvbXBsZXRlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xuemlwY29tcGxldGUuJGluamVjdCA9IFtdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHppcGNvbXBsZXRlKCkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR2YXIgY2xpZW50S2V5ID0gXCJtU2FqVllEOHVyRlNPalczdHVKZmhkblNqTXJldmttZ2xYNDBXMmJ6MTJLbTRjVks1dllacG9nUWdUY2ZwNmp3XCI7XG5cdHZhciBjYWNoZSA9IHt9O1xuXHQvL3ZhciBjb250YWluZXIgPSAkKFwiI2V4YW1wbGUxXCIpO1xuXHQvL3ZhciBlcnJvckRpdiA9IGNvbnRhaW5lci5maW5kKFwiZGl2LnRleHQtZXJyb3JcIik7XG5cblx0Ly9sb2NhbCBmdW5jdGlvbiBcblx0c2VsZi5oYW5kbGVSZXNwID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdC8vIENoZWNrIGZvciBlcnJvclxuXHRcdGlmIChkYXRhLmVycm9yX21zZylcblx0XHRcdGNvbnNvbGUubG9nKGRhdGEuZXJyb3JfbXNnKTtcblx0XHRcdC8vZXJyb3JEaXYudGV4dChkYXRhLmVycm9yX21zZyk7XG5cdFx0ZWxzZSBpZiAoXCJjaXR5XCIgaW4gZGF0YSlcblx0XHR7XG5cdFx0XHQvLyBTZXQgY2l0eSBhbmQgc3RhdGVcblx0XHRcdGNvbnRhaW5lci5maW5kKFwiaW5wdXRbbmFtZT0nY2l0eSddXCIpLnZhbChkYXRhLmNpdHkpO1xuXHRcdFx0Y29udGFpbmVyLmZpbmQoXCJpbnB1dFtuYW1lPSdzdGF0ZSddXCIpLnZhbChkYXRhLnN0YXRlKTtcblx0XHR9IFxuXHR9O1xuXG5cdC8vemlwIGNoZWNrZXJcblx0c2VsZi5jaGVja1ppcCA9IGZ1bmN0aW9uKGVudGVyZWRaaXApIHtcblx0XHR2YXIgemlwY29kZSA9IGVudGVyZWRaaXAuc3Vic3RyaW5nKDAsIDUpOyBcblxuXHRcdGlmICh6aXBjb2RlLmxlbmd0aCA9PSA1ICYmIC9eWzAtOV0rJC8udGVzdCh6aXBjb2RlKSkge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnY2hlY2tpbmcgemlwJywgemlwY29kZSk7XG5cdFx0fVx0XG5cdFx0XG5cdH07XG59O1x0Il19
