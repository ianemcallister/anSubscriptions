config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("ansub",["ngRoute","ui.bootstrap"]);function billingAddress(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/billingAddress.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){this.userData=r,this.state=n}return r.$inject=["$scope","$log","userDataService","stateService"],e}function billingInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/billingInput.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){this.userData=r,this.state=n}return r.$inject=["$scope","$log","userDataService","stateService"],e}function contactInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/contactInput.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){this.userData=r,this.state=n}return r.$inject=["$scope","$log","userDataService","stateService"],e}function frequencySelection(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/frequencySelection.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t){var r=this;r.frequencies=["month","quarter","year"],r.starts={month:["January","February","March","April","May","June","July","August","September","October","November","December"],quarter:["Winter","Spring","Summer","Fall"],year:["2018","2019","2020"]},r.selectedFrequency="",r.startsIn=""}return r.$inject=["$scope","$log"],e}function productSelection(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/productSelection.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){var o=this;o.userData=r,o.state=n.productSelection,o.state.infoBox=n.infoBoxes.flavorDefs,o.orderList=r.order,o.productPrice=1700,o.order=r.tender;var s={id:1,flavor:"",mixflvrCount:0,mixflvrs:{srpec:{id:"srpec",name:"Secret Recipe Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}},sralm:{id:"sralm",name:"Secret Recipe Almonds",selected:!1,classes:{"list-group-item":!0,active:!1}},srcsh:{id:"srcsh",name:"Secret Recipe Cashews",selected:!1,classes:{"list-group-item":!0,active:!1}},srpea:{id:"srpea",name:"Secret Recipe Peanuts",selected:!1,classes:{"list-group-item":!0,active:!1}},cnpec:{id:"cnpec",name:"Cinnamon Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}},cnalm:{id:"cnalm",name:"Cinnamon Almonds",selected:!1,classes:{"list-group-item":!0,active:!1}},drpec:{id:"drpec",name:"Drunken Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}}},mixFlvrsSelected:[],mix:""};function i(){o.order.total=o.orderList.length*o.productPrice-o.order.discounts,4==o.orderList.length&&(o.order.total=o.order.total-o.productPrice)}o.flavors=[{name:"Secret Recipe Pecans",description:"<p>Sweet Pecans roasted and glazed in our world famous secret recipe glaze - the perfect combination of sweet vanilla with a hint of saltiness. Mmmmm! </p><p>Great as a stand alone snack or chop them up and use them as a topping for ice cream, yogurt, salads and more!</p>"},{name:"Secret Recipe Almonds",description:"Sweet and Salty"},{name:"Secret Recipe Cashews",description:"Sweet and Salty"},{name:"Secret Recipe Peanuts",description:"Sweet and Salty"},{name:"Cinnamon Pecans",description:"Bavarian"},{name:"Cinnamon Almonds",description:"Bavarian"},{name:"Drunken Pecans",description:"Savory"},{name:"Mix-It-Up",description:"Whatever You Like"}],o.addAProduct=function(){var e=o.orderList.length;e<4&&o.orderList.push(Object.create(s)),3==e&&(o.state.addAProductBtn.visible=!1),0<e&&(o.state.removeLastProductBtn.visible=!0);for(var t=0;t<=e;t++)o.orderList[t].id=t+1;i()},o.removeLastProduct=function(){var e=o.orderList.length,t=e-1;1<e&&o.orderList.splice(t,1),2==e&&(o.state.removeLastProductBtn.visible=!1),o.state.addAProductBtn.visible=!0,4==e&&(o.order.discounts=0),i()},o.removeAProduct=function(e){var t=e-1;1<o.orderList.length&&o.orderList.splice(t,1);for(var r=0;r<=o.orderList.length-1;r++)o.orderList[r].id=r+1;i()},o.validateProducts=function(){},o.countMixFlavors=function(t){var r=0;return Object.keys(t).forEach(function(e){t[e].selected&&r++}),r},o.updateShoppingCart=function(){console.log("updating shopping cart")},o.buildFlavorList=function(t){o.orderList[t].mixFlvrsSelected=[],Object.keys(o.orderList[t].mixflvrs).forEach(function(e){o.orderList[t].mixflvrs[e].selected&&o.orderList[t].mixFlvrsSelected.push(o.orderList[t].mixflvrs[e].name)})},o.orderList.push(Object.create(s)),i()}return r.$inject=["$scope","$log","userDataService","stateService"],e}function shipDest(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",template:"<div>testing</div>",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r){this.zipCheck=r}return r.$inject=["$scope","$log","zipcomplete"],e}function singleAddressInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/singleAddressInput.htm",replace:!0,scope:{address:"="},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){var o=this;o.userData=r,o.state=n,o.updateBillingAddress=function(){o.state.shipingSameAsBilling&&(o.userData.billingAddress.street=o.userData.shippingDestination.street,o.userData.billingAddress.zip=o.userData.shippingDestination.zip,o.userData.billingAddress.city=o.userData.shippingDestination.city,o.userData.billingAddress.state=o.userData.shippingDestination.state)}}return r.$inject=["$scope","$log","userDataService","stateService"],e}function subTermsCond(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/subTermsCond.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n,o,s,i,c){this.state=n,this.userData=o,this.validate=s,this.square=c}return r.$inject=["$scope","$log","$location","stateService","userDataService","validationService","submissionService","squareService"],e}function mainController(e,t,r,n,o,s,i){e.userData=o,e.state=s,i.init()}function successController(e,t,r){e.confirmationCode=r.confirmationCode,console.log("success controler",r.confirmationCode,e.confirmationCode)}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/monthlySub.htm",controller:"mainController",controllerAs:"vm"}).when("/success/:confirmationCode",{templateUrl:"views/success.htm",controller:"successController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function errorHandlingService(){return{}}function modalService(e){var o={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/modal.htm"},s={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(e,t){var r={},n={};return angular.extend(r,o,e),angular.extend(n,s,t),r.controller||(r.controller=function(e,t){e.modalOptions=n,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.dismiss("cancel")}}),$modal.open(r).result}}function serverService(o){return{chargeCard:function(e,n){return new Promise(function(t,r){o({method:"POST",url:e,headers:{"Content-Type":"application/json"},data:n}).then(function(e){console.log("got this response",e),t(e.data)},function(e){r(e)})})},get:{sqrAppId:function(){return new Promise(function(t,r){o({method:"GET",url:"/api/squareId"}).then(function(e){console.log("got this response",e),t(e.data)},function(e){r(e)})})}}}}function squareService(r,n,t,o){var s=this;function i(e){o.card.nonce=e,t.chargeCard("/api/charge_card",o).then(function(e){var t="/success/"+e.data;console.log("got this path back",t),n.path(t),r.$apply()}).catch(function(e){console.log("Error:",e)})}return{_chargeCardWithNonce:i,submitForm:function(){console.log("submitting form"),s.paymentForm.requestCardNonce()},init:function(){t.get.sqrAppId().then(function(e){s.paymentForm=new SqPaymentForm({applicationId:e.id,inputClass:"sq-input",inputStyles:[{fontSize:"14px",padding:"7px 12px",backgroundColor:"transparent"}],cardNumber:{elementId:"sq-card-number",placeholder:"•••• •••• •••• ••••"},cvv:{elementId:"sq-cvv",placeholder:"CVV"},expirationDate:{elementId:"sq-expiration-date",placeholder:"MM/YY"},postalCode:{elementId:"sq-postal-code"},callbacks:{cardNonceResponseReceived:function(e,t,r){e?(console.log("Encountered errors:",e),s.card_errors=e,s.isProcessing=!1):(s.card_errors=[],i(t))},unsupportedBrowserDetected:function(){},inputEventReceived:function(e){e.eventType},paymentFormLoaded:function(){}}}),s.paymentForm.build()}).catch(function(e){console.log(e)})}}}function stateService(e){return{shipingSameAsBilling:!0,productSelection:{addAProductBtn:{classes:{btn:!0,"btn-success":!0,"btn-warning":!1},visible:!0},removeLastProductBtn:{classes:{btn:!0,"btn-success":!1,"btn-warning":!1,"btn-danger":!0},visible:!1},headerStyle:{color:"rgb(51,51,51)"}},contactInfo:{firstname:{classes:{"form-control":!0,"is-valid":!1,"is-invalid":!1},addressed:!1,isValid:!1,isInvalid:!1}},infoBoxes:{flavorDefs:!1,termsConds:!1},sectionsAddressed:{productSelection:!1,singleShippingAddress:!1,contactInfo:!1,termsConds:!1},sectionsCompleted:{productSelection:!0,singleShippingAddress:!0,contactInfo:!0,termsConds:!1},sectionHeaders:{productSelection:{showError:!1,showCompleted:!1},singleShippingAddress:{showError:!1,showCompleted:!1},contactInfo:{showError:!1,showCompleted:!1},termsConds:{showError:!1,showCompleted:!1}},checkCompletness:function(){var t=this,r=!0;Object.keys(t.sectionsCompleted).forEach(function(e){0==t.sectionsCompleted[e]&&(r=!1)}),t.submissionBtn["btn-secondary"]=r?(readyForSubmission=!0,t.submissionBtn["btn-success"]=!0,!1):(readyForSubmission=!1,t.submissionBtn["btn-success"]=!1,!0)},readyForSubmission:!1,submissionBtn:{btn:!0,"btn-block":!0,"btn-success":!1,"btn-secondary":!0}}}function submissionService(n){this.submit=function(e){return new Promise(function(t,r){n({method:"POST",url:"/subscription-application-submission",headers:{"Content-Type":"application/json"},data:e}).then(function(e){console.log("got this response",e),t(e)},function(e){r(e)})})}}function userDataService(){return{name:{first:"",last:""},contact:{email:"",phone:""},shippingDestination:{street:"",city:"",state:"",zip:""},billingAddress:{street:"",city:"",state:"",zip:""},card:{nonce:"",last4:"",type:""},orderNo:"",orderDate:"",order:[],tender:{discounts:0,shipping:0,total:0},agreedToTerms:!1}}function validationService(e,t){return{termsAndCond:function(){console.log("validating terms and conditions"),e.sectionsAddressed.termsConds=!0,e.sectionsCompleted.termsConds=t.agreedToTerms,e.sectionsCompleted.termsConds?(e.sectionHeaders.termsConds.showError=!1,e.sectionHeaders.termsConds.showCompleted=!0):(e.sectionHeaders.termsConds.showError=!0,e.sectionHeaders.termsConds.showCompleted=!1)}}}function zipcomplete(){this.handleResp=function(e){e.error_msg?console.log(e.error_msg):"city"in e&&(container.find("input[name='city']").val(e.city),container.find("input[name='state']").val(e.state))},this.checkZip=function(e){var t=e.substring(0,5);5==t.length&&/^[0-9]+$/.test(t)&&console.log("checking zip",t)}}angular.module("ansub").directive("billingAddress",billingAddress),angular.module("ansub").directive("billingInput",billingInput),angular.module("ansub").directive("contactInput",contactInput),angular.module("ansub").directive("frequencySelection",frequencySelection),angular.module("ansub").directive("productSelection",productSelection),angular.module("ansub").directive("shipDest",shipDest),angular.module("ansub").directive("singleAddressInput",singleAddressInput),angular.module("ansub").directive("subTermsCond",subTermsCond),angular.module("ansub").controller("mainController",mainController),mainController.$inject=["$scope","$log","$location","submissionService","userDataService","stateService","squareService"],angular.module("ansub").controller("successController",successController),successController.$inject=["$scope","$log","$routeParams"],angular.module("ansub").config(config),angular.module("ansub").service("errorHandlingService",errorHandlingService),errorHandlingService.$inject=[],angular.module("ansub").service("modalService",modalService),modalService.$inject=["$uibModal"],angular.module("ansub").service("serverService",serverService),serverService.$inject=["$http"],angular.module("ansub").service("squareService",squareService),squareService.$inject=["$rootScope","$location","serverService","userDataService"],angular.module("ansub").service("stateService",stateService),stateService.$inject=["userDataService"],angular.module("ansub").service("submissionService",submissionService),submissionService.$inject=["$http"],angular.module("ansub").service("userDataService",userDataService),userDataService.$inject=[],angular.module("ansub").service("validationService",validationService),validationService.$inject=["stateService","userDataService"],angular.module("ansub").service("zipcomplete",zipcomplete),zipcomplete.$inject=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2JpbGxpbmdBZGRyZXNzLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9iaWxsaW5nSW5wdXQuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2NvbnRhY3RJbnB1dC5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvZnJlcXVlbmN5U2VsZWN0aW9uLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9wcm9kdWN0U2VsZWN0aW9uLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaGlwRGVzdC5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2luZ2xlQWRkcmVzc0lucHV0LmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zdWJ0ZXJtc2NvbmQuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9tYWluLmNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL2NvbnRyb2xsZXJzL3N1Y2Nlc3MuY29udHJvbGxlci5qcyIsInNjcmlwdHMvcm91dGVzL3JvdXRlcy5jb25maWcuanMiLCJzY3JpcHRzL3NlcnZpY2VzL2Vycm9ySGFuZGxpbmcuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvbW9yZGFscy5zZXJ2aWNlLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy9zZXJ2ZXIuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvc3F1YXJlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3N0YXRlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3N1Ym1pc3Npb25TZXJpdmNlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3VzZXJEYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3ZhbGlkYXRpb24uc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvemlwY29tcGxldGUuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwiYmlsbGluZ0FkZHJlc3MiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwicmVwbGFjZSIsInNjb3BlIiwibGluayIsImxpbmtGdW5jIiwiY29udHJvbGxlciIsImJpbGxpbmdBZGRyZXNzQ29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJlbCIsImF0dHIiLCJjdHJsIiwiJHNjb3BlIiwiJGxvZyIsInVzZXJEYXRhU2VydmljZSIsInN0YXRlU2VydmljZSIsInRoaXMiLCJ1c2VyRGF0YSIsInN0YXRlIiwiJGluamVjdCIsImJpbGxpbmdJbnB1dCIsImJpbGxpbmdJbnB1dENvbnRyb2xsZXIiLCJjb250YWN0SW5wdXQiLCJjb250YWN0SW5wdXR0Q29udHJvbGxlciIsImZyZXF1ZW5jeVNlbGVjdGlvbiIsImZyZXF1ZW5jeVNlbGVjdGlvbkNvbnRyb2xsZXIiLCJzZWxmIiwiZnJlcXVlbmNpZXMiLCJzdGFydHMiLCJtb250aCIsInF1YXJ0ZXIiLCJ5ZWFyIiwic2VsZWN0ZWRGcmVxdWVuY3kiLCJzdGFydHNJbiIsInByb2R1Y3RTZWxlY3Rpb24iLCJwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlciIsImluZm9Cb3hlcyIsImZsYXZvckRlZnMiLCJvcmRlckxpc3QiLCJvcmRlciIsInByb2R1Y3RQcmljZSIsInRlbmRlciIsInByb2R1Y3RPYmplY3QiLCJpZCIsImZsYXZvciIsIm1peGZsdnJDb3VudCIsIm1peGZsdnJzIiwic3JwZWMiLCJuYW1lIiwic2VsZWN0ZWQiLCJjbGFzc2VzIiwibGlzdC1ncm91cC1pdGVtIiwiYWN0aXZlIiwic3JhbG0iLCJzcmNzaCIsInNycGVhIiwiY25wZWMiLCJjbmFsbSIsImRycGVjIiwibWl4Rmx2cnNTZWxlY3RlZCIsIm1peCIsInN1bU9yZGVyIiwidG90YWwiLCJsZW5ndGgiLCJkaXNjb3VudHMiLCJmbGF2b3JzIiwiZGVzY3JpcHRpb24iLCJhZGRBUHJvZHVjdCIsIm5vT2ZQcm9kdWN0cyIsInB1c2giLCJPYmplY3QiLCJjcmVhdGUiLCJhZGRBUHJvZHVjdEJ0biIsInZpc2libGUiLCJyZW1vdmVMYXN0UHJvZHVjdEJ0biIsImkiLCJyZW1vdmVMYXN0UHJvZHVjdCIsInJlbW92ZUluZGV4Iiwic3BsaWNlIiwicmVtb3ZlQVByb2R1Y3QiLCJ2YWxpZGF0ZVByb2R1Y3RzIiwiY291bnRNaXhGbGF2b3JzIiwiZmxhdm9yT2JqZWN0IiwiY291bnRlciIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidXBkYXRlU2hvcHBpbmdDYXJ0IiwiY29uc29sZSIsImxvZyIsImJ1aWxkRmxhdm9yTGlzdCIsInNoaXBEZXN0IiwidGVtcGxhdGUiLCJzaGlwRGVzdENvbnRyb2xsZXIiLCJ6aXBjb21wbGV0ZSIsInppcENoZWNrIiwic2luZ2xlQWRkcmVzc0lucHV0IiwiYWRkcmVzcyIsInNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXIiLCJ1cGRhdGVCaWxsaW5nQWRkcmVzcyIsInNoaXBpbmdTYW1lQXNCaWxsaW5nIiwic3RyZWV0Iiwic2hpcHBpbmdEZXN0aW5hdGlvbiIsInppcCIsImNpdHkiLCJzdWJUZXJtc0NvbmQiLCJzdWJUZXJtc0NvbmRDb250cm9sbGVyIiwiJGxvY2F0aW9uIiwidmFsaWRhdGlvblNlcnZpY2UiLCJzdWJtaXNzaW9uU2VydmljZSIsInNxdWFyZVNlcnZpY2UiLCJ2YWxpZGF0ZSIsInNxdWFyZSIsIm1haW5Db250cm9sbGVyIiwiaW5pdCIsInN1Y2Nlc3NDb250cm9sbGVyIiwiJHJvdXRlUGFyYW1zIiwiY29uZmlybWF0aW9uQ29kZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJoYXNoUHJlZml4Iiwid2hlbiIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJlcnJvckhhbmRsaW5nU2VydmljZSIsIm1vZGFsU2VydmljZSIsIiR1aWJNb2RhbCIsIm1vZGFsRGVmYXVsdHMiLCJiYWNrZHJvcCIsImtleWJvYXJkIiwibW9kYWxGYWRlIiwibW9kYWxPcHRpb25zIiwiY2xvc2VCdXR0b25UZXh0IiwiYWN0aW9uQnV0dG9uVGV4dCIsImhlYWRlclRleHQiLCJib2R5VGV4dCIsInNob3dNb2RhbCIsImN1c3RvbU1vZGFsRGVmYXVsdHMiLCJjdXN0b21Nb2RhbE9wdGlvbnMiLCJzaG93IiwidGVtcE1vZGFsRGVmYXVsdHMiLCJ0ZW1wTW9kYWxPcHRpb25zIiwiZXh0ZW5kIiwiJG1vZGFsSW5zdGFuY2UiLCJvayIsInJlc3VsdCIsImNsb3NlIiwiZGlzbWlzcyIsIiRtb2RhbCIsIm9wZW4iLCJzZXJ2ZXJTZXJ2aWNlIiwiJGh0dHAiLCJjaGFyZ2VDYXJkIiwidXJsIiwiZGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibWV0aG9kIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInRoZW4iLCJyZXNwb25zZSIsImVycm9yIiwiZ2V0Iiwic3FyQXBwSWQiLCIkcm9vdFNjb3BlIiwiX2NoYXJnZUNhcmRXaXRoTm9uY2UiLCJub25jZSIsImNhcmQiLCJzIiwibmV3UGF0aCIsInBhdGgiLCIkYXBwbHkiLCJjYXRjaCIsImUiLCJzdWJtaXRGb3JtIiwicGF5bWVudEZvcm0iLCJyZXF1ZXN0Q2FyZE5vbmNlIiwic3FBcHAiLCJTcVBheW1lbnRGb3JtIiwiYXBwbGljYXRpb25JZCIsImlucHV0Q2xhc3MiLCJpbnB1dFN0eWxlcyIsImZvbnRTaXplIiwicGFkZGluZyIsImJhY2tncm91bmRDb2xvciIsImNhcmROdW1iZXIiLCJlbGVtZW50SWQiLCJwbGFjZWhvbGRlciIsImN2diIsImV4cGlyYXRpb25EYXRlIiwicG9zdGFsQ29kZSIsImNhbGxiYWNrcyIsImNhcmROb25jZVJlc3BvbnNlUmVjZWl2ZWQiLCJlcnJvcnMiLCJjYXJkRGF0YSIsImNhcmRfZXJyb3JzIiwiaXNQcm9jZXNzaW5nIiwidW5zdXBwb3J0ZWRCcm93c2VyRGV0ZWN0ZWQiLCJpbnB1dEV2ZW50UmVjZWl2ZWQiLCJpbnB1dEV2ZW50IiwiZXZlbnRUeXBlIiwicGF5bWVudEZvcm1Mb2FkZWQiLCJidWlsZCIsImJ0biIsImJ0bi1zdWNjZXNzIiwiYnRuLXdhcm5pbmciLCJidG4tZGFuZ2VyIiwiaGVhZGVyU3R5bGUiLCJjb2xvciIsImNvbnRhY3RJbmZvIiwiZmlyc3RuYW1lIiwiZm9ybS1jb250cm9sIiwiaXMtdmFsaWQiLCJpcy1pbnZhbGlkIiwiYWRkcmVzc2VkIiwiaXNWYWxpZCIsImlzSW52YWxpZCIsInRlcm1zQ29uZHMiLCJzZWN0aW9uc0FkZHJlc3NlZCIsInNpbmdsZVNoaXBwaW5nQWRkcmVzcyIsInNlY3Rpb25zQ29tcGxldGVkIiwic2VjdGlvbkhlYWRlcnMiLCJzaG93RXJyb3IiLCJzaG93Q29tcGxldGVkIiwiY2hlY2tDb21wbGV0bmVzcyIsIm5vRmxhZ3MiLCJzdWJtaXNzaW9uQnRuIiwicmVhZHlGb3JTdWJtaXNzaW9uIiwiYnRuLWJsb2NrIiwiYnRuLXNlY29uZGFyeSIsInN1Ym1pdCIsImZpcnN0IiwibGFzdCIsImNvbnRhY3QiLCJlbWFpbCIsInBob25lIiwibGFzdDQiLCJ0eXBlIiwib3JkZXJObyIsIm9yZGVyRGF0ZSIsInNoaXBwaW5nIiwiYWdyZWVkVG9UZXJtcyIsInRlcm1zQW5kQ29uZCIsImhhbmRsZVJlc3AiLCJlcnJvcl9tc2ciLCJjb250YWluZXIiLCJmaW5kIiwidmFsIiwiY2hlY2taaXAiLCJlbnRlcmVkWmlwIiwiemlwY29kZSIsInN1YnN0cmluZyIsInRlc3QiLCJzZXJ2aWNlIl0sIm1hcHBpbmdzIjoic0RBRUEsSUFBQUEsT0FBQUMsUUFBQUMsT0FBQSxRQUFBLENBQUEsVUFBQSxpQkNDQSxTQUFBQyx3REFFQSxJQUFBQyxFQUFBLENBQ0FDLFNBQUEsT0FDQUMsWUFBQSwyQkFDQUMsU0FBQSxFQUNBQyxNQUFBLEdBQ0FDLEtBQUFDLEVBQ0FDLFdBQUFDLEVBQ0FDLGFBQUEsS0FDQUMsa0JBQUEsR0FJQSxTQUFBSixFQUFBRixFQUFBTyxFQUFBQyxFQUFBQyxJQUtB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QXhCLFFBQUFDLE9BQUEsU0FBQW9RLFFBQUEsZUFBQWxJLGNBR0FBLGFBQUEzRyxRQUFBLENBQUEsYUNIQXhCLFFBQUFDLE9BQUEsU0FBQW9RLFFBQUEsZ0JBQUF6RyxlQUdBQSxjQUFBcEksUUFBQSxDQUFBLFNDSEF4QixRQUFBQyxPQUFBLFNBQUFvUSxRQUFBLGdCQUFBbEosZUFHQUEsY0FBQTNGLFFBQUEsQ0FBQSxhQUFBLFlBQUEsZ0JBQUEsbUJDSEF4QixRQUFBQyxPQUFBLFNBQUFvUSxRQUFBLGVBQUFqUCxjQUdBQSxhQUFBSSxRQUFBLENBQUEsbUJDSEF4QixRQUFBQyxPQUFBLFNBQUFvUSxRQUFBLG9CQUFBbkosbUJBR0FBLGtCQUFBMUYsUUFBQSxDQUFBLFNDSEF4QixRQUFBQyxPQUFBLFNBQUFvUSxRQUFBLGtCQUFBbFAsaUJBR0FBLGdCQUFBSyxRQUFBLEdDSEF4QixRQUFBQyxPQUFBLFNBQUFvUSxRQUFBLG9CQUFBcEosbUJBR0FBLGtCQUFBekYsUUFBQSxDQUFBLGVBQUEsbUJDSEF4QixRQUFBQyxPQUFBLFNBQUFvUSxRQUFBLGNBQUFsSyxhQUdBQSxZQUFBM0UsUUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2RlZmluZSB0aGUgbW9kdWxlXG5cbnZhciBhaE51dHMgPSBhbmd1bGFyLm1vZHVsZSgnYW5zdWInLCBbJ25nUm91dGUnLCAndWkuYm9vdHN0cmFwJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmRpcmVjdGl2ZSgnYmlsbGluZ0FkZHJlc3MnLCBiaWxsaW5nQWRkcmVzcyk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGJpbGxpbmdBZGRyZXNzKCkge1xuXHRcdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9iaWxsaW5nQWRkcmVzcy5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogYmlsbGluZ0FkZHJlc3NDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0YmlsbGluZ0FkZHJlc3NDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGJpbGxpbmdBZGRyZXNzQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlld21vZGVsIHZhbHVlc1xuXHRcdFx0c2VsZi51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHRcdHNlbGYuc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIGJpbGxpbmcgQURkcmVzcyBjb250cm9sbGVyJywgc2VsZi5zdGF0ZS5zaGlwaW5nU2FtZUFzQmlsbGluZyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdiaWxsaW5nSW5wdXQnLCBiaWxsaW5nSW5wdXQpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBiaWxsaW5nSW5wdXQoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2JpbGxpbmdJbnB1dC5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogYmlsbGluZ0lucHV0Q29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXHRcdFxuXHRcdGJpbGxpbmdJbnB1dENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndXNlckRhdGFTZXJ2aWNlJywgJ3N0YXRlU2VydmljZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gYmlsbGluZ0lucHV0Q29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXdtb2RlbCB2YWx1ZXNcblx0XHRcdHZtLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0dm0uc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIGNvbnRhY3RJbnB1dHRDb250cm9sbGVyJyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdjb250YWN0SW5wdXQnLCBjb250YWN0SW5wdXQpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjb250YWN0SW5wdXQoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2NvbnRhY3RJbnB1dC5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogY29udGFjdElucHV0dENvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblx0XHRcblx0XHRjb250YWN0SW5wdXR0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBjb250YWN0SW5wdXR0Q29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlld21vZGVsIHZhbHVlc1xuXHRcdFx0c2VsZi51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHRcdHNlbGYuc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIGNvbnRhY3RJbnB1dHRDb250cm9sbGVyJyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdmcmVxdWVuY3lTZWxlY3Rpb24nLCBmcmVxdWVuY3lTZWxlY3Rpb24pO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBmcmVxdWVuY3lTZWxlY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZyZXF1ZW5jeVNlbGVjdGlvbi5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogZnJlcXVlbmN5U2VsZWN0aW9uQ29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXHRcdFxuXHRcdGZyZXF1ZW5jeVNlbGVjdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGZyZXF1ZW5jeVNlbGVjdGlvbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0XHRcdHNlbGYuZnJlcXVlbmNpZXMgPSBbXG5cdFx0XHRcdFwibW9udGhcIixcblx0XHRcdFx0XCJxdWFydGVyXCIsXG5cdFx0XHRcdFwieWVhclwiXG5cdFx0XHRdO1xuXG5cdFx0XHRzZWxmLnN0YXJ0cyA9IHtcblx0XHRcdFx0bW9udGg6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsXCJKdWx5XCIsXCJBdWd1c3RcIixcIlNlcHRlbWJlclwiLFwiT2N0b2JlclwiLFwiTm92ZW1iZXJcIixcIkRlY2VtYmVyXCJdLFxuXHRcdFx0XHRxdWFydGVyOiBbXCJXaW50ZXJcIiwgXCJTcHJpbmdcIiwgXCJTdW1tZXJcIiwgXCJGYWxsXCJdLFxuXHRcdFx0XHR5ZWFyOiBbXCIyMDE4XCIsIFwiMjAxOVwiLCBcIjIwMjBcIl1cblx0XHRcdH1cblxuXHRcdFx0c2VsZi5zZWxlY3RlZEZyZXF1ZW5jeSA9ICcnO1xuXHRcdFx0c2VsZi5zdGFydHNJbiA9ICcnO1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBmcmVxdWVuY3lTZWxlY3Rpb25Db250cm9sbGVyJyk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdwcm9kdWN0U2VsZWN0aW9uJywgcHJvZHVjdFNlbGVjdGlvbik7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHByb2R1Y3RTZWxlY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3Byb2R1Y3RTZWxlY3Rpb24uaHRtJyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRzY29wZToge1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogcHJvZHVjdFNlbGVjdGlvbkNvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXHRcdH1cblx0XHRcblx0XHRwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0XHRcdHNlbGYudXNlckRhdGEgPSB1c2VyRGF0YVNlcnZpY2U7XG5cdFx0XHRzZWxmLnN0YXRlID0gc3RhdGVTZXJ2aWNlLnByb2R1Y3RTZWxlY3Rpb247XG5cdFx0XHRzZWxmLnN0YXRlWydpbmZvQm94J10gPSBzdGF0ZVNlcnZpY2UuaW5mb0JveGVzLmZsYXZvckRlZnM7XG5cblx0XHRcdHNlbGYub3JkZXJMaXN0ID0gdXNlckRhdGFTZXJ2aWNlLm9yZGVyO1xuXG5cdFx0XHRzZWxmLnByb2R1Y3RQcmljZSA9IDE3MDA7XG5cblx0XHRcdHNlbGYub3JkZXIgPSB1c2VyRGF0YVNlcnZpY2UudGVuZGVyO1xuXG5cdFx0XHR2YXIgcHJvZHVjdE9iamVjdCA9IHsgXG5cdFx0XHRcdGlkOiAxLCBcblx0XHRcdFx0Zmxhdm9yOiBcIlwiLCBcblx0XHRcdFx0bWl4Zmx2ckNvdW50OiAwLFxuXHRcdFx0XHRtaXhmbHZyczoge1xuXHRcdFx0XHRcdHNycGVjOiB7IGlkOiBcInNycGVjXCIsIG5hbWU6IFwiU2VjcmV0IFJlY2lwZSBQZWNhbnNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSB9LFxuXHRcdFx0XHRcdHNyYWxtOiB7IGlkOiBcInNyYWxtXCIsIG5hbWU6IFwiU2VjcmV0IFJlY2lwZSBBbG1vbmRzXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gIH0sXG5cdFx0XHRcdFx0c3Jjc2g6IHsgaWQ6IFwic3Jjc2hcIiwgbmFtZTogXCJTZWNyZXQgUmVjaXBlIENhc2hld3NcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfSxcblx0XHRcdFx0XHRzcnBlYTogeyBpZDogXCJzcnBlYVwiLCBuYW1lOiBcIlNlY3JldCBSZWNpcGUgUGVhbnV0c1wiLCBzZWxlY3RlZDpmYWxzZSwgY2xhc3Nlczp7XCJsaXN0LWdyb3VwLWl0ZW1cIjogdHJ1ZSwgXCJhY3RpdmVcIjogZmFsc2V9ICB9LFxuXHRcdFx0XHRcdGNucGVjOiB7IGlkOiBcImNucGVjXCIsIG5hbWU6IFwiQ2lubmFtb24gUGVjYW5zXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gIH0sXG5cdFx0XHRcdFx0Y25hbG06IHsgaWQ6IFwiY25hbG1cIiwgbmFtZTogXCJDaW5uYW1vbiBBbG1vbmRzXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gIH0sXG5cdFx0XHRcdFx0ZHJwZWM6IHsgaWQ6IFwiZHJwZWNcIiwgbmFtZTogXCJEcnVua2VuIFBlY2Fuc1wiLCBzZWxlY3RlZDpmYWxzZSwgY2xhc3Nlczp7XCJsaXN0LWdyb3VwLWl0ZW1cIjogdHJ1ZSwgXCJhY3RpdmVcIjogZmFsc2V9ICB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1peEZsdnJzU2VsZWN0ZWQ6IFtdLFxuXHRcdFx0XHRtaXg6IFwiXCJcblx0XHRcdH07XG5cblx0XHRcdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVzXG5cblx0XHRcdHNlbGYuZmxhdm9ycz0gW1xuXHRcdFx0XHR7IG5hbWU6ICdTZWNyZXQgUmVjaXBlIFBlY2FucycsIGRlc2NyaXB0aW9uOiBcIjxwPlN3ZWV0IFBlY2FucyByb2FzdGVkIGFuZCBnbGF6ZWQgaW4gb3VyIHdvcmxkIGZhbW91cyBzZWNyZXQgcmVjaXBlIGdsYXplIC0gdGhlIHBlcmZlY3QgY29tYmluYXRpb24gb2Ygc3dlZXQgdmFuaWxsYSB3aXRoIGEgaGludCBvZiBzYWx0aW5lc3MuIE1tbW1tISA8L3A+PHA+R3JlYXQgYXMgYSBzdGFuZCBhbG9uZSBzbmFjayBvciBjaG9wIHRoZW0gdXAgYW5kIHVzZSB0aGVtIGFzIGEgdG9wcGluZyBmb3IgaWNlIGNyZWFtLCB5b2d1cnQsIHNhbGFkcyBhbmQgbW9yZSE8L3A+XCIgfSxcblx0XHRcdFx0eyBuYW1lOiAnU2VjcmV0IFJlY2lwZSBBbG1vbmRzJywgZGVzY3JpcHRpb246IFwiU3dlZXQgYW5kIFNhbHR5XCIgfSxcblx0XHRcdFx0eyBuYW1lOiAnU2VjcmV0IFJlY2lwZSBDYXNoZXdzJywgZGVzY3JpcHRpb246IFwiU3dlZXQgYW5kIFNhbHR5XCIgfSxcblx0XHRcdFx0eyBuYW1lOiAnU2VjcmV0IFJlY2lwZSBQZWFudXRzJywgZGVzY3JpcHRpb246IFwiU3dlZXQgYW5kIFNhbHR5XCIgfSxcblx0XHRcdFx0eyBuYW1lOiAnQ2lubmFtb24gUGVjYW5zJywgZGVzY3JpcHRpb246IFwiQmF2YXJpYW5cIiB9LFxuXHRcdFx0XHR7IG5hbWU6ICdDaW5uYW1vbiBBbG1vbmRzJywgZGVzY3JpcHRpb246IFwiQmF2YXJpYW5cIiB9LFxuXHRcdFx0XHR7IG5hbWU6ICdEcnVua2VuIFBlY2FucycsIGRlc2NyaXB0aW9uOiBcIlNhdm9yeVwiIH0sXG5cdFx0XHRcdHsgbmFtZTogJ01peC1JdC1VcCcsIGRlc2NyaXB0aW9uOiBcIldoYXRldmVyIFlvdSBMaWtlXCIgfVxuXHRcdFx0XTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gcHJvZHVjdFNlbGVjdGlvbkNvbnRyb2xsZXInKTtcblxuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cdFx0XHRmdW5jdGlvbiBzdW1PcmRlcigpIHtcblxuXHRcdFx0XHRzZWxmLm9yZGVyLnRvdGFsID0gKHNlbGYub3JkZXJMaXN0Lmxlbmd0aCAqIHNlbGYucHJvZHVjdFByaWNlKSAtIHNlbGYub3JkZXIuZGlzY291bnRzO1xuXHRcdFx0XHRpZihzZWxmLm9yZGVyTGlzdC5sZW5ndGggPT0gNCkgc2VsZi5vcmRlci50b3RhbCA9IHNlbGYub3JkZXIudG90YWwgLSBzZWxmLnByb2R1Y3RQcmljZTtcblx0XHRcdH07XG5cblx0XHRcdC8vZGVmaW5lIHZpZXcgbW9kZWwgZnVuY3Rpb25zXG5cdFx0XHQvL0FERCBBIFBST0RVQ1QgQlVUVE9OXG5cdFx0XHRzZWxmLmFkZEFQcm9kdWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmVsc1xuXHRcdFx0XHR2YXIgbm9PZlByb2R1Y3RzID0gc2VsZi5vcmRlckxpc3QubGVuZ3RoO1xuXG5cdFx0XHRcdC8vaWYgdGhlcmUgaXMgcm9vbSBhZGQgYW5vdGhlciBwcm9kdWN0XG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA8IDQpIHNlbGYub3JkZXJMaXN0LnB1c2goT2JqZWN0LmNyZWF0ZShwcm9kdWN0T2JqZWN0KSk7XG5cblx0XHRcdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IGF2YWlsYWJsZSBzbG90IGhpZGUgdGhlIGFkZCBidXR0b25cblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzID09IDMpIHNlbGYuc3RhdGUuYWRkQVByb2R1Y3RCdG4udmlzaWJsZSA9IGZhbHNlO1xuXG5cdFx0XHRcdC8vaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBwcm9kdWN0IGFkZCB0aGUgcmVtb3ZlIGJ1dHRvblxuXHRcdFx0XHRpZihub09mUHJvZHVjdHMgPiAwKSBzZWxmLnN0YXRlLnJlbW92ZUxhc3RQcm9kdWN0QnRuLnZpc2libGUgPSB0cnVlO1xuXG5cdFx0XHRcdC8vbWFrZSBzdXJlIHRoZSBpZCdzIGFyZSBjb3JyZWN0XG5cdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPD0gbm9PZlByb2R1Y3RzOyBpKyspIHtcblx0XHRcdFx0XHRzZWxmLm9yZGVyTGlzdFtpXS5pZCA9IGkgKyAxXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvL2NhbGN1bGF0ZSBtb25leVxuXHRcdFx0XHQvL2lmKG5vT2ZQcm9kdWN0cyA9PSAzKSBzZWxmLm9yZGVyLmRpc2NvdW50cyA9IHNlbGYucHJvZHVjdFByaWNlO1xuXG5cdFx0XHRcdHN1bU9yZGVyKCk7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ2FkZGluZyBhIHByb2R1Y3QnKTtcblx0XHRcdH07XG5cblx0XHRcdC8vUkVNT1ZFIExBU1QgUFJPRFVDVCBCVVRUT05cblx0XHRcdHNlbGYucmVtb3ZlTGFzdFByb2R1Y3QgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBub09mUHJvZHVjdHMgPSBzZWxmLm9yZGVyTGlzdC5sZW5ndGg7XG5cdFx0XHRcdHZhciByZW1vdmVJbmRleCA9IG5vT2ZQcm9kdWN0cyAtIDE7XG5cblx0XHRcdFx0Ly9pZiB0aGVyZSBhcmUgYXQgbGVhc3QgdHdvIHByb2R1Y3RzLCByZW1vdmUgb25lXG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA+IDEpIHNlbGYub3JkZXJMaXN0LnNwbGljZShyZW1vdmVJbmRleCwgMSk7XG5cblx0XHRcdFx0Ly9pZiBkb3duIHRvIG9uZSBpdGVtLCBoaWRlIHRoZSByZW1vdmUgYnV0dG9uXG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA9PSAyKSBzZWxmLnN0YXRlLnJlbW92ZUxhc3RQcm9kdWN0QnRuLnZpc2libGUgPSBmYWxzZTtcblxuXHRcdFx0XHQvL2JyaW5nIHRoZSBhZGQgYnV0dG9uIGJhY2tcblx0XHRcdFx0c2VsZi5zdGF0ZS5hZGRBUHJvZHVjdEJ0bi52aXNpYmxlID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2NhbGN1bGF0ZSBtb25leVxuXHRcdFx0XHRpZihub09mUHJvZHVjdHMgPT0gNCkgc2VsZi5vcmRlci5kaXNjb3VudHMgPSAwO1xuXG5cdFx0XHRcdHN1bU9yZGVyKCk7XG5cblx0XHRcdFx0Ly9jb25zb2xlLmxvZygncmVtb3ZpbmcgcHJvZHVjdCcsIG5vT2ZQcm9kdWN0cyk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvL1JFTU9WRSBBIFBST0RVQ1QgQlVUVE9OXG5cdFx0XHRzZWxmLnJlbW92ZUFQcm9kdWN0ID0gZnVuY3Rpb24oaWQpIHtcblx0XHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBub09mUHJvZHVjdHMgPSBzZWxmLm9yZGVyTGlzdC5sZW5ndGg7XG5cdFx0XHRcdHZhciByZW1vdmVJbmRleCA9IGlkIC0gMTtcblxuXHRcdFx0XHQvL2lmIHRoZXJlIGFyZSBhdCBsZWFzdCB0d28gcHJvZHVjdHMsIHJlbW92ZSBvbmVcblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzID4gMSkgc2VsZi5vcmRlckxpc3Quc3BsaWNlKHJlbW92ZUluZGV4LCAxKTtcblxuXHRcdFx0XHQvL21ha2Ugc3VyZSB0aGUgaWQncyBhcmUgY29ycmVjdFxuXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDw9IChzZWxmLm9yZGVyTGlzdC5sZW5ndGggLSAxKTsgaSsrKSB7XG5cdFx0XHRcdFx0c2VsZi5vcmRlckxpc3RbaV0uaWQgPSBpICsgMVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3VtT3JkZXIoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly9WQUxJREFURSBUSEUgUFJPRFVDVFMgV0hFTiBDSEFOR0VEXG5cdFx0XHRzZWxmLnZhbGlkYXRlUHJvZHVjdHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZWluZyBwcm9kdWN0c1wiKTtcblxuXHRcdFx0XHRpZih2YWxpZCkgc2VsZi5zdGF0ZS5oZWFkZXJTdHlsZS5jb2xvciA9IFwicmdiKDAsMTY1LDEyOClcIlxuXHRcdFx0fVxuXG5cdFx0XHQvL1xuXHRcdFx0c2VsZi5jb3VudE1peEZsYXZvcnMgPSBmdW5jdGlvbihmbGF2b3JPYmplY3QpIHtcblx0XHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdFx0XHQvL2l0ZXJhdGUgdGhyb2d1aCBvYmplY3Rcblx0XHRcdFx0T2JqZWN0LmtleXMoZmxhdm9yT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdGlmKGZsYXZvck9iamVjdFtrZXldLnNlbGVjdGVkKSBjb3VudGVyKytcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0cmV0dXJuIGNvdW50ZXI7XG5cdFx0XHR9O1xuXG5cdFx0XHRzZWxmLnVwZGF0ZVNob3BwaW5nQ2FydCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygndXBkYXRpbmcgc2hvcHBpbmcgY2FydCcpO1xuXHRcdFx0XHQvL3NlbGYudXNlckRhdGEub3JkZXIgPSBzZWxmLm9yZGVyTGlzdDtcblxuXHRcdFx0fTtcblxuXHRcdFx0c2VsZi5idWlsZEZsYXZvckxpc3QgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHQvL2NsZWFuIHRoZSBsaXN0XG5cdFx0XHRcdHNlbGYub3JkZXJMaXN0W2lkXS5taXhGbHZyc1NlbGVjdGVkID0gW107XG5cblx0XHRcdFx0Ly9ub3RpZnkgcHJvZ3Jlc3Ncblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnYnVpbGlkbmcgYSBmbGF2b3IgbGlzdCcsIGlkLCBzZWxmLm9yZGVyTGlzdCk7XG5cblx0XHRcdFx0Ly9pdHJhdGUgdGhyb3VnaCBmbGF2b3JzLCBhZGQgdG8gbGlzdCB3aGVuIHRydWVcblx0XHRcdFx0T2JqZWN0LmtleXMoc2VsZi5vcmRlckxpc3RbaWRdLm1peGZsdnJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXG5cdFx0XHRcdFx0aWYoc2VsZi5vcmRlckxpc3RbaWRdLm1peGZsdnJzW2tleV0uc2VsZWN0ZWQpXG5cdFx0XHRcdFx0XHRzZWxmLm9yZGVyTGlzdFtpZF0ubWl4Rmx2cnNTZWxlY3RlZC5wdXNoKHNlbGYub3JkZXJMaXN0W2lkXS5taXhmbHZyc1trZXldLm5hbWUpO1xuXHRcdFx0XHR9KTtcblxuXG5cblx0XHRcdH07XG5cblx0XHRcdC8vc3RhcnQgdGhpcyBieSBhZGRpbmcgYSBwcm9kdWN0IHRvIHRoZSBvcmRlciBsaXN0XG5cdFx0XHRzZWxmLm9yZGVyTGlzdC5wdXNoKE9iamVjdC5jcmVhdGUocHJvZHVjdE9iamVjdCkpO1xuXG5cdFx0XHRzdW1PcmRlcigpO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ3NoaXBEZXN0Jywgc2hpcERlc3QpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBzaGlwRGVzdCgpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlOiAnPGRpdj50ZXN0aW5nPC9kaXY+Jyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRzY29wZToge30sXG5cdFx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRcdGNvbnRyb2xsZXI6IHNoaXBEZXN0Q29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXHRcdFxuXHRcdHNoaXBEZXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd6aXBjb21wbGV0ZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gc2hpcERlc3RDb250cm9sbGVyKCRzY29wZSwgJGxvZywgemlwY29tcGxldGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRzZWxmLnppcENoZWNrID0gemlwY29tcGxldGU7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIHNoaXBEZXN0Q29udHJvbGxlcicpO1xuXG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1xuXHR9IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdzaW5nbGVBZGRyZXNzSW5wdXQnLCBzaW5nbGVBZGRyZXNzSW5wdXQpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBzaW5nbGVBZGRyZXNzSW5wdXQoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NpbmdsZUFkZHJlc3NJbnB1dC5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdGFkZHJlc3M6IFwiPVwiXG5cdFx0XHR9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBzaW5nbGVBZGRyZXNzSW5wdXRDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0c2luZ2xlQWRkcmVzc0lucHV0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBzaW5nbGVBZGRyZXNzSW5wdXRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdXNlckRhdGFTZXJ2aWNlLCBzdGF0ZVNlcnZpY2UpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3bW9kZWwgdmFsdWVzXG5cdFx0XHRzZWxmLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0c2VsZi5zdGF0ZSA9IHN0YXRlU2VydmljZVxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gc2luZ2xlQWRkcmVzc0lucHV0Q29udHJvbGxlcicpO1xuXG5cdFx0XHRzZWxmLnVwZGF0ZUJpbGxpbmdBZGRyZXNzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmKHNlbGYuc3RhdGUuc2hpcGluZ1NhbWVBc0JpbGxpbmcpIHtcblx0XHRcdFx0XHRzZWxmLnVzZXJEYXRhLmJpbGxpbmdBZGRyZXNzLnN0cmVldCA9IHNlbGYudXNlckRhdGEuc2hpcHBpbmdEZXN0aW5hdGlvbi5zdHJlZXRcblx0XHRcdFx0XHRzZWxmLnVzZXJEYXRhLmJpbGxpbmdBZGRyZXNzLnppcCA9IHNlbGYudXNlckRhdGEuc2hpcHBpbmdEZXN0aW5hdGlvbi56aXBcblx0XHRcdFx0XHRzZWxmLnVzZXJEYXRhLmJpbGxpbmdBZGRyZXNzLmNpdHkgPSBzZWxmLnVzZXJEYXRhLnNoaXBwaW5nRGVzdGluYXRpb24uY2l0eVxuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3Muc3RhdGUgPSBzZWxmLnVzZXJEYXRhLnNoaXBwaW5nRGVzdGluYXRpb24uc3RhdGVcblx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHRcdFxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmRpcmVjdGl2ZSgnc3ViVGVybXNDb25kJywgc3ViVGVybXNDb25kKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gc3ViVGVybXNDb25kKCkge1xuXHRcdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9zdWJUZXJtc0NvbmQuaHRtJyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRzY29wZToge1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogc3ViVGVybXNDb25kQ29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cdFx0fVxuXHRcdFxuXHRcdHN1YlRlcm1zQ29uZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJ3N0YXRlU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnLCAndmFsaWRhdGlvblNlcnZpY2UnLCAnc3VibWlzc2lvblNlcnZpY2UnLCAnc3F1YXJlU2VydmljZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gc3ViVGVybXNDb25kQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgc3RhdGVTZXJ2aWNlLCB1c2VyRGF0YVNlcnZpY2UsIHZhbGlkYXRpb25TZXJ2aWNlLCBzdWJtaXNzaW9uU2VydmljZSwgc3F1YXJlU2VydmljZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdFx0XHRzZWxmLnN0YXRlID0gc3RhdGVTZXJ2aWNlO1xuXHRcdFx0c2VsZi51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHRcdHNlbGYudmFsaWRhdGUgPSB2YWxpZGF0aW9uU2VydmljZTtcblx0XHRcdHNlbGYuc3F1YXJlID0gc3F1YXJlU2VydmljZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gc3ViVGVybXNDb25kQ29udHJvbGxlcicpO1xuXHRcdFx0LypzZWxmLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0dGlnIHRoZSBmb3JtJyk7XG5cblx0XHRcdFx0Ly9zdWJtaXQgdGhlIGZvcm1cblx0XHRcdFx0c3VibWlzc2lvblNlcnZpY2Uuc3VibWl0KHNlbGYudXNlckRhdGEpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XHRcdHZhciBuZXdQYXRoID0gJy9zdWNjZXNzLycgKyBzLmRhdGE7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHBhdGggYmFjaycsIG5ld1BhdGgpXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgobmV3UGF0aCk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0aGVyZSB3YXMgYW4gZXJyb3InLCBlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9Ki9cblxuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5jb250cm9sbGVyKCdtYWluQ29udHJvbGxlcicsIG1haW5Db250cm9sbGVyKTtcblxuXHRtYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRsb2NhdGlvbicsICdzdWJtaXNzaW9uU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJywgJ3NxdWFyZVNlcnZpY2UnXTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sIHN1Ym1pc3Npb25TZXJ2aWNlLCB1c2VyRGF0YVNlcnZpY2UsIHN0YXRlU2VydmljZSwgc3F1YXJlU2VydmljZSkge1xuXHRcdC8vbm90aWZ5IHByb2dyZXNzXG5cblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHQvL2RlZmluZSB1c2VyZGF0YSBtb2RlbCB2YXJpYWJsZVxuXHRcdCRzY29wZS51c2VyRGF0YSA9IHVzZXJEYXRhU2VydmljZTtcblx0XHQkc2NvcGUuc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cblx0XHRzcXVhcmVTZXJ2aWNlLmluaXQoKTtcblx0XHRcblx0XHQvKnZhciByZWNpcGlhbnRQcm9maWxlID0ge1xuXHRcdFx0bmFtZToge1xuXHRcdFx0XHRmaXJzdDogXCJcIixcblx0XHRcdFx0bGFzdDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MTogXCJcIixcblx0XHRcdFx0c3RyZWV0MjogXCJcIixcblx0XHRcdFx0c3RyZWV0MzogXCJcIixcblx0XHRcdFx0Y2l0eTogXCJcIixcblx0XHRcdFx0c3RhdGU6IFwiXCIsXG5cdFx0XHRcdHppcDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdGNvbnRhY3Q6IHt9LFxuXHRcdFx0cmVsYXRpb25zaGlwOiBcIlwiXG5cdFx0fTtcblxuXHRcdHZhciBzaGlwcGluZ1NjaGVkdWxlcyA9IHtcblx0XHRcdFwieWVhcmx5XCI6IFtcblx0XHRcdFx0eyBpZDogMSwgbmFtZTogXCJUcmVhdFwiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH1cblx0XHRcdF0sXG5cdFx0XHRcInF1YXJ0ZXJseVwiOiBbXG5cdFx0XHRcdHsgaWQ6IDEsIG5hbWU6IFwiV2ludGVyXCIsIHNoaXBEYXk6IFwiXCIsIGJpbGxEYXk6IFwiXCIgfSxcblx0XHRcdFx0eyBpZDogMiwgbmFtZTogXCJTcHJpbmdcIiwgc2hpcERheTogXCJcIiwgYmlsbERheTogXCJcIiB9LFxuXHRcdFx0XHR7IGlkOiAzLCBuYW1lOiBcIlN1bW1lclwiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH0sXG5cdFx0XHRcdHsgaWQ6IDQsIG5hbWU6IFwiRmFsbFwiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH1cblx0XHRcdF0sXG5cdFx0XHRcIm1vbnRobHlcIjogW1xuXHRcdFx0XHR7IGlkOiAxLCBuYW1lOiBcIkphbnVhcnlcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAyLCBuYW1lOiBcIkZlYnJ1YXJ5XCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogMywgbmFtZTogXCJNYXJjaFwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDQsIG5hbWU6IFwiQXByaWxcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiA1LCBuYW1lOiBcIk1heVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDYsIG5hbWU6IFwiSnVuZVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDcsIG5hbWU6IFwiSnVseVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDgsIG5hbWU6IFwiQXVndXN0XCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogOSwgbmFtZTogXCJTZXB0ZW1iZXJcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAxMCwgbmFtZTogXCJPY3RvYmVyXCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogMTEsIG5hbWU6IFwiTm92ZW1iZXJcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAxMiwgbmFtZTogXCJEZWNlbWJlclwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH1cblx0XHRcdF0sXG5cdFx0XHRcIndlZWtseVwiOiB3ZWVrbHlHZW5lcmF0b3IoKVxuXG5cdFx0fVxuXHRcdFxuXHRcdHZhciBzaGlwcGluZ09jY3VyYW5jZSA9IHtcblx0XHRcdGlkOiAwLFxuXHRcdFx0bmFtZTogXCJcIixcblx0XHRcdGRhdGU6IFwiXCJcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gd2Vla2x5R2VuZXJhdG9yKCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYWxsV2Vla3MgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBpID0gMTsgaSA8PSA1MjsgaSsrKSB7XG5cdFx0XHRcdHZhciB3ZWVrTmFtZSA9IFwiV2VlayBcIiArIGk7XG5cdFx0XHRcdGFsbFdlZWtzLnB1c2goeyBpZDogaSwgbmFtZTogd2Vla05hbWUsIHNoaXBEYXk6IFwiVHVlc2RheVwiLCBiaWxsRGF5OiBcIkZyaWRheVwiIH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0cmV0dXJuIGFsbFdlZWtzO1xuXHRcdH07Ki9cblxuXHRcdC8vZGVmaW5lIGZsYXZvciB2YXJpYWJsZXNcblx0XHQvKiRzY29wZS5mbGF2b3JzPSBbXG5cdFx0XHR7IG5hbWU6ICdTZWNyZXQgUmVjaXBlIFBlY2FucycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnU2VjcmV0IFJlY2lwZSBBbG1vbmRzJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdTZWNyZXQgUmVjaXBlIENhc2hld3MnLCBkZXNjcmlwdGlvbjogXCIgXCIgfSxcblx0XHRcdHsgbmFtZTogJ1NlY3JldCBSZWNpcGUgUGVhbnV0cycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnQ2lubmFtb24gUGVjYW5zJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdDaW5uYW1vbiBBbG1vbmRzJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdEcnVua2VuIFBlY2FucycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnTWl4LUl0LVVwJywgZGVzY3JpcHRpb246IFwiIFwiIH1cblx0XHRdO1xuXG5cdFx0JHNjb3BlLm9yZGVyU2NoZWR1bGUgPSBbXG5cdFx0XHR7IGlkOiAxIH1cblx0XHRdOyovXG5cblx0XHRcblxuXHRcdC8vZGVmaW5lIHN0YXRlIHZhcmlhYmxlc1xuXHRcdC8qJHNjb3BlLnN0YXRlID0ge1xuXHRcdFx0dGVtcFJlY2lwaWFudDoge1xuXHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0Zmlyc3Q6IFwiXCIsXG5cdFx0XHRcdFx0bGFzdDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRhZGRyZXNzOiB7XG5cdFx0XHRcdFx0c3RyZWV0MTogXCJcIixcblx0XHRcdFx0XHRzdHJlZXQyOiBcIlwiLFxuXHRcdFx0XHRcdHN0cmVldDM6IFwiXCIsXG5cdFx0XHRcdFx0Y2l0eTogXCJcIixcblx0XHRcdFx0XHRzdGF0ZTogXCJcIixcblx0XHRcdFx0XHR6aXA6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0Y29udGFjdDoge1xuXHRcdFx0XHRcdGVtYWlsOiBcIlwiLFxuXHRcdFx0XHRcdHBob25lOiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlbGF0aW9uc2hpcDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdG9yZGVyOiB7XG5cdFx0XHRcdHF0eTogXCIxXCIsXG5cdFx0XHRcdHZpc2liaWxpdHk6IHtcblx0XHRcdFx0XHRvbmU6IHRydWUsXG5cdFx0XHRcdFx0dHdvOiBmYWxzZSxcblx0XHRcdFx0XHR0aHJlZTogZmFsc2UsXG5cdFx0XHRcdFx0Zm91cjogZmFsc2UsXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRmcmVxdWVuY3k6IHtcblx0XHRcdFx0dmFsdWU6ICdtb250aGx5J1xuXHRcdFx0fSxcblx0XHRcdHNoaXBwaW5nRGVzdGluYXRpb25zOiBcIjFcIixcblx0XHRcdHJlY2lwaWVudHNCb3g6IFwiMVwiLFxuXHRcdFx0cmVjaXBpYW50U2VsZWN0ZWQ6IHtcblx0XHRcdFx0c3RhdGU6IGZhbHNlLFxuXHRcdFx0XHRpZDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdHN1YlR5cGU6IHt9LFxuXHRcdFx0c2VsZWN0ZWRSZWNpcGlhbnQ6IDAsXG5cdFx0XHRlcnJvcnM6IHtcblx0XHRcdFx0bWlzc2luZ1JlcXVpcmVkOiBmYWxzZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdCRzY29wZS5zdGF0ZVRlc3QgPSBzdGF0ZVNlcnZpY2VcblxuXHRcdC8vbG9jYWwgZnVuY3Rpb25zXG5cdFx0ZnVuY3Rpb24gYWRkVG9SZWNpcGlhbnRMaXN0KHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBuZXdSZWNpcGlhbnQgPSBPYmplY3QuY3JlYXRlKHJlY2lwaWFudFByb2ZpbGUpO1xuXHRcdFx0dmFyIGV4aXN0c0FscmVhZHkgPSBmYWxzZTtcblx0XHRcdHZhciBlbnRyeUluZGV4ID0gMDtcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Ly8xLiBjaGVjayBmb3IgdGhlIHJlbGF0aW9uc2hpcFxuXHRcdFx0JHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3QuZm9yRWFjaChmdW5jdGlvbihyZWNpcGlhbnQpIHtcblx0XHRcdFx0aWYocmVjaXBpYW50LnJlbGF0aW9uc2hpcCA9PSByZWxhdGlvbnNoaXApIHtcblx0XHRcdFx0XHRleGlzdHNBbHJlYWR5ID0gdHJ1ZTtcblx0XHRcdFx0XHRlbnRyeUluZGV4ID0gaTtcblx0XHRcdFx0fTtcblx0XHRcdFx0aSsrO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2FkZGluZycsIHJlbGF0aW9uc2hpcCwgJ3RvIHJlY2lwaWFudCBsaXN0JywgJHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3QsIFwiYWxyZWFkeSBFeGlzdHM/XCIsIGV4aXN0c0FscmVhZHkpO1xuXG5cdFx0XHQvL2lmIHJlbGF0aW9uc2hpcCBkb2Vzbid0IGV4aXN0IHlldCwgYWRkIGl0XG5cdFx0XHRpZighZXhpc3RzQWxyZWFkeSkge1xuXHRcdFx0XHRuZXdSZWNpcGlhbnQucmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwO1xuXHRcdFx0XHQkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdC5wdXNoKG5ld1JlY2lwaWFudCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vcmV0dXJuIHJlc3VsdFxuXHRcdFx0cmV0dXJuIGVudHJ5SW5kZXg7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHJlbW92ZUZyb21SZWNpcGlhbnRMaXN0KHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdyZW1vdmluZycsIHJlbGF0aW9uc2hpcCwgJ3RvIHJlY2lwaWFudCBsaXN0Jyk7XG5cblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxzXG5cdFx0XHR2YXIgaSA9IDA7XG5cblx0XHRcdC8vaXRlcmF0ZSB0aHJvdWdoIGFycmF5XG5cdFx0XHQkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHJlY2lwaWFudCkge1xuXHRcdFx0XHRpZihyZWNpcGlhbnQucmVsYXRpb25zaGlwID09IHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XHRcdCRzY29wZS51c2VyRGF0YS5yZWNpcGlhbnRMaXN0LnNwbGljZShpLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpKys7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly9yZXR1cm4gcmVzdWx0XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2VsZWN0UmVjaXBpYW50KGluZGV4KSB7XG5cblx0XHRcdCRzY29wZS5zdGF0ZS5zZWxlY3RlZFJlY2lwaWFudCA9IGluZGV4O1xuXHRcdH07XG5cblx0XHQvL3ZpZXcgbW9kZWwgZnVuY3Rpb25zXG5cdFx0Ly9VUERBVEUgT1JERVIgVklTSUJJTElUWVxuXHRcdCRzY29wZS51cGRhdGVPcmRlclZpc2libGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxlc1xuXHRcdFx0dmFyIGhhc2ggPSB7XCJvbmVcIjogMSwgXCJ0d29cIjogMiwgXCJ0aHJlZVwiOiAzLCBcImZvdXJcIjogNH07XG5cdFx0XHRcdFxuXHRcdFx0Ly9pdGVyYXRlIHRocm91Z2ggdmFsdWVzXG5cdFx0XHRPYmplY3Qua2V5cygkc2NvcGUuc3RhdGUub3JkZXIudmlzaWJpbGl0eSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0aWYoaGFzaFtrZXldIDw9IHZhbHVlKSAkc2NvcGUuc3RhdGUub3JkZXIudmlzaWJpbGl0eVtrZXldID0gdHJ1ZVxuXHRcdFx0XHRcdGVsc2UgJHNjb3BlLnN0YXRlLm9yZGVyLnZpc2liaWxpdHlba2V5XSA9IGZhbHNlXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnY2hlY2tpbmcgdmFsdWVzJywgdmFsdWUsICRzY29wZS5zdGF0ZS5vcmRlci52aXNpYmlsaXR5KTtcblx0XHRcdFxuXHRcdH07XG5cblx0XHQvL1VQREFURSBGUkVRVUVOQ1lcblx0XHQkc2NvcGUudXBkYXRlRnJlcXVlbmN5ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdCRzY29wZS51c2VyRGF0YS5zaGlwcGluZ1NjaGVkdWxlID0gc2hpcHBpbmdTY2hlZHVsZXNbdmFsdWVdO1xuXHRcdH07XG5cblx0XHQvL1VQREFURSBPUkRFUiBTQ0hFRFVMRVxuXHRcdCRzY29wZS51cGRhdGVPcmRlclNjaGVkdWxlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdH1cblxuXHRcdC8vVVBEQVRFIFRIRSBTVUJTQ1JJUFRJT04gVFlQRVxuXHRcdCRzY29wZS51cGRhdGVTdWJUeXBlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHVwZGF0ZUluZGV4ID0gMDtcblx0XHRcdCRzY29wZS51c2VyRGF0YS5zdWJUeXBlID0gdmFsdWU7XG5cblx0XHRcdGlmKHZhbHVlPT1cIm15c2VsZlwiKSB7XG5cdFx0XHRcdC8vJHNjb3BlLnN0YXRlLnJlY2lwaWVudHNCb3ggPSBcIjEwXCI7XG5cdFx0XHRcdGFkZFRvUmVjaXBpYW50TGlzdChcIk15c2VsZlwiKTtcblx0XHRcdFx0cmVtb3ZlRnJvbVJlY2lwaWFudExpc3QoXCJTb21lb25lXCIpO1xuXHRcdFx0XHRzZWxlY3RSZWNpcGlhbnQoMCk7XG5cdFx0XHR9IGVsc2UgaWYodmFsdWU9PVwib3RoZXJzXCIpIHtcblx0XHRcdFx0Ly8kc2NvcGUuc3RhdGUucmVjaXBpZW50c0JveCA9IFwiMTBcIjtcblx0XHRcdFx0dXBkYXRlSW5kZXggPSBhZGRUb1JlY2lwaWFudExpc3QoXCJTb21lb25lXCIpO1xuXHRcdFx0XHRyZW1vdmVGcm9tUmVjaXBpYW50TGlzdChcIk15c2VsZlwiKTtcblx0XHRcdFx0c2VsZWN0UmVjaXBpYW50KDApO1xuXHRcdFx0fSBlbHNlIGlmKHZhbHVlPT1cImJvdGhcIikge1xuXHRcdFx0XHQvLyRzY29wZS5zdGF0ZS5yZWNpcGllbnRzQm94ID0gXCIxMFwiO1xuXHRcdFx0XHR1cGRhdGVJbmRleCA9IGFkZFRvUmVjaXBpYW50TGlzdChcIk15c2VsZlwiKTtcblx0XHRcdFx0YWRkVG9SZWNpcGlhbnRMaXN0KFwiU29tZW9uZVwiKTtcblx0XHRcdFx0c2VsZWN0UmVjaXBpYW50KDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQkc2NvcGUuc2VsZWN0UmVjaXBpYW50ID0gZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRcdHNlbGVjdFJlY2lwaWFudChpbmRleCk7XG5cdFx0XHQkc2NvcGUuc3RhdGUudGVtcFJlY2lwaWFudCA9ICRzY29wZS51c2VyRGF0YS5yZWNpcGlhbnRMaXN0W2luZGV4XTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLnVwZGF0ZVJlY2lwaWFudFZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4ID0gJHNjb3BlLnN0YXRlLnNlbGVjdGVkUmVjaXBpYW50O1xuXHRcdFx0JHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3RbaW5kZXhdID0gJHNjb3BlLnN0YXRlLnRlbXBSZWNpcGlhbnQ7XG5cdFx0fTsqL1xuXHRcdFxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmNvbnRyb2xsZXIoJ3N1Y2Nlc3NDb250cm9sbGVyJywgc3VjY2Vzc0NvbnRyb2xsZXIpO1xuXG5zdWNjZXNzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRyb3V0ZVBhcmFtcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHN1Y2Nlc3NDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJHJvdXRlUGFyYW1zKSB7XG5cdFxuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHQkc2NvcGUuY29uZmlybWF0aW9uQ29kZSA9ICRyb3V0ZVBhcmFtcy5jb25maXJtYXRpb25Db2RlO1xuXG5cdC8vbm90aWZ5IHByb2dyZXNzXG5cdGNvbnNvbGUubG9nKCdzdWNjZXNzIGNvbnRyb2xlcicsICRyb3V0ZVBhcmFtcy5jb25maXJtYXRpb25Db2RlLCAkc2NvcGUuY29uZmlybWF0aW9uQ29kZSk7XG59OyIsIi8qXG4qXHRST1VURVMtQ09ORklHXG4qXG4qXHRUaGlzIG1vZHVsZSBzZXRzIHVwIGFsbCB0aGUgcmVxdWlyZWQgYW5ndWxhciByb3V0ZXMgZm9yIHRoaXMgd2ViIGFwcC5cbiovXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnYW5zdWInKVxuICAgIC5jb25maWcoY29uZmlnKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJycpO1xuICAgICRyb3V0ZVByb3ZpZGVyXG5cdC8vUFVCTElDIFJPVVRFU1xuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL21vbnRobHlTdWIuaHRtJywgICAgICAvLyd2aWV3cy9tb250aGx5U3ViLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ21haW5Db250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc3VjY2Vzcy86Y29uZmlybWF0aW9uQ29kZScsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zdWNjZXNzLmh0bScsICAgICAgLy8ndmlld3Mvc3VjY2Vzcy5odG1sJ1xuICAgICAgICBjb250cm9sbGVyOiAnc3VjY2Vzc0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nc3VjY2VzcydcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcblx0Lm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG4vKlxuKiAgIFJFUVVJUkVEIEZVTkNUSU9OU1xuKlxuKi9cblxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdlcnJvckhhbmRsaW5nU2VydmljZScsIGVycm9ySGFuZGxpbmdTZXJ2aWNlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xuZXJyb3JIYW5kbGluZ1NlcnZpY2UuJGluamVjdCA9IFtdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGVycm9ySGFuZGxpbmdTZXJ2aWNlKCkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIGVycm9ySGFuZGxpbmcgPSB7XG5cdFx0XG5cdH07XG5cblx0cmV0dXJuIGVycm9ySGFuZGxpbmc7XG59O1x0IiwiXHRhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdtb2RhbFNlcnZpY2UnLCBtb2RhbFNlcnZpY2UpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRtb2RhbFNlcnZpY2UuJGluamVjdCA9IFsnJHVpYk1vZGFsJ107XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIG1vZGFsU2VydmljZSgkdWliTW9kYWwpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgbW9kYWxEZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgICAgICAgICBtb2RhbEZhZGU6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL21vZGFsLmh0bSdcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgbW9kYWxPcHRpb25zID0ge1xuICAgICAgICAgICAgY2xvc2VCdXR0b25UZXh0OiAnQ2xvc2UnLFxuICAgICAgICAgICAgYWN0aW9uQnV0dG9uVGV4dDogJ09LJyxcbiAgICAgICAgICAgIGhlYWRlclRleHQ6ICdQcm9jZWVkPycsXG4gICAgICAgICAgICBib2R5VGV4dDogJ1BlcmZvcm0gdGhpcyBhY3Rpb24/J1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2hvd01vZGFsID0gZnVuY3Rpb24gKGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFjdXN0b21Nb2RhbERlZmF1bHRzKSBjdXN0b21Nb2RhbERlZmF1bHRzID0ge307XG4gICAgICAgICAgICBjdXN0b21Nb2RhbERlZmF1bHRzLmJhY2tkcm9wID0gJ3N0YXRpYyc7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93KGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucykge1xuICAgICAgICAgICAgLy9DcmVhdGUgdGVtcCBvYmplY3RzIHRvIHdvcmsgd2l0aCBzaW5jZSB3ZSdyZSBpbiBhIHNpbmdsZXRvbiBzZXJ2aWNlXG4gICAgICAgICAgICB2YXIgdGVtcE1vZGFsRGVmYXVsdHMgPSB7fTtcbiAgICAgICAgICAgIHZhciB0ZW1wTW9kYWxPcHRpb25zID0ge307XG5cbiAgICAgICAgICAgIC8vTWFwIGFuZ3VsYXItdWkgbW9kYWwgY3VzdG9tIGRlZmF1bHRzIHRvIG1vZGFsIGRlZmF1bHRzIGRlZmluZWQgaW4gc2VydmljZVxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodGVtcE1vZGFsRGVmYXVsdHMsIG1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsRGVmYXVsdHMpO1xuXG4gICAgICAgICAgICAvL01hcCBtb2RhbC5odG1sICRzY29wZSBjdXN0b20gcHJvcGVydGllcyB0byBkZWZhdWx0cyBkZWZpbmVkIGluIHNlcnZpY2VcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHRlbXBNb2RhbE9wdGlvbnMsIG1vZGFsT3B0aW9ucywgY3VzdG9tTW9kYWxPcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKCF0ZW1wTW9kYWxEZWZhdWx0cy5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgdGVtcE1vZGFsRGVmYXVsdHMuY29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbE9wdGlvbnMgPSB0ZW1wTW9kYWxPcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxPcHRpb25zLm9rID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsT3B0aW9ucy5jbG9zZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICRtb2RhbC5vcGVuKHRlbXBNb2RhbERlZmF1bHRzKS5yZXN1bHQ7XG4gICAgICAgIH07XG5cdFx0XG5cdH07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdzZXJ2ZXJTZXJ2aWNlJywgc2VydmVyU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnNlcnZlclNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzZXJ2ZXJTZXJ2aWNlKCRodHRwKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgc2VydmVyU2VydmljZSA9IHtcblx0XHRjaGFyZ2VDYXJkOiBjaGFyZ2VDYXJkLFxuXHRcdGdldDoge1xuXHRcdFx0c3FyQXBwSWQ6IGdldFNxckFwcElkXG5cdFx0fVxuXHR9O1xuXG5cdC8vY2hhcmdlIGEgY3JlZGl0IGNhcmRcblx0ZnVuY3Rpb24gY2hhcmdlQ2FyZCh1cmwsIGRhdGEpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogZGF0YVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnNlJywgcmVzcG9uc2UpO1xuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH0pO1x0XHRcdFxuXHR9O1xuXG5cdC8vZ2V0c3QgdGhlIHJlcXVpcmVkIGNvZGVcblx0ZnVuY3Rpb24gZ2V0U3FyQXBwSWQoKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XG5cdFx0Ly9sb2cgcHJvZ3Jlc3Ncblx0XHQvLyRsb2cuaW5mbygnc2VuZGluZyBmcm9tIHNxcicpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvc3F1YXJlSWQnXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcmVzcG9uc2UnLCByZXNwb25zZSk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XHRcblx0fTtcblxuXHRyZXR1cm4gc2VydmVyU2VydmljZTtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdzcXVhcmVTZXJ2aWNlJywgc3F1YXJlU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnNxdWFyZVNlcnZpY2UuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnc2VydmVyU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzcXVhcmVTZXJ2aWNlKCRyb290U2NvcGUsICRsb2NhdGlvbiwgc2VydmVyU2VydmljZSwgdXNlckRhdGFTZXJ2aWNlKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0dmFyIHNxdWFyZVNlcnZpY2UgPSB7XG5cdFx0X2NoYXJnZUNhcmRXaXRoTm9uY2U6IF9jaGFyZ2VDYXJkV2l0aE5vbmNlLFxuXHRcdHN1Ym1pdEZvcm06IHN1Ym1pdEZvcm0sXG5cdFx0aW5pdDogaW5pdFxuXHR9O1xuXG5cdC8vY2hhcmdlIGNhcmQgd2l0aCBub25jZVxuXHRmdW5jdGlvbiBfY2hhcmdlQ2FyZFdpdGhOb25jZShub25jZSkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1cmwgPSAnL2FwaS9jaGFyZ2VfY2FyZCc7XG5cdFx0dXNlckRhdGFTZXJ2aWNlLmNhcmQubm9uY2UgPSBub25jZTtcblxuXHRcdC8vcGFzcyB0aGUgZGF0YSB0byB0aGUgc2VydmVyXG5cdFx0c2VydmVyU2VydmljZS5jaGFyZ2VDYXJkKHVybCwgdXNlckRhdGFTZXJ2aWNlKVxuXHRcdC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgbmV3UGF0aCA9ICcvc3VjY2Vzcy8nICsgcy5kYXRhO1xuXG5cdFx0XHQvL2xvZyBwcm9ncmVzc1xuXHRcdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIHBhdGggYmFjaycsIG5ld1BhdGgpO1xuXG5cdFx0XHQvL3JlLXJvdXRlIHRoZSBwYWdlXG5cdFx0XHQkbG9jYXRpb24ucGF0aChuZXdQYXRoKTtcblx0XHRcdCRyb290U2NvcGUuJGFwcGx5KCk7XG5cblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnRXJyb3I6JyxlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL3N1Ym1pdHMgdGhlIGZvcm0gZm9yIHVzXG5cdGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7XG5cdFx0Y29uc29sZS5sb2coJ3N1Ym1pdHRpbmcgZm9ybScpO1xuXHRcdHNlbGYucGF5bWVudEZvcm0ucmVxdWVzdENhcmROb25jZSgpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cblx0XHQvL2NvbGxlY3QgdGhlIHNxdWFyZUFwcElkXG5cdFx0c2VydmVyU2VydmljZS5nZXQuc3FyQXBwSWQoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHNxQXBwKSB7XG5cblx0XHRcdHNlbGYucGF5bWVudEZvcm0gPSBuZXcgU3FQYXltZW50Rm9ybSh7XG5cdFx0ICAgIGFwcGxpY2F0aW9uSWQ6IHNxQXBwLmlkLFxuXHRcdCAgICBpbnB1dENsYXNzOiAnc3EtaW5wdXQnLFxuXHRcdCAgICBpbnB1dFN0eWxlczogW1xuXHRcdCAgICAgIHtcblx0XHQgICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgICAgICBcdHBhZGRpbmc6ICc3cHggMTJweCcsXG4gICAgICAgICAgICBcdGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiXG5cdFx0ICAgICAgfVxuXHRcdCAgICBdLFxuXHRcdCAgICBjYXJkTnVtYmVyOiB7XG5cdFx0ICAgICAgZWxlbWVudElkOiAnc3EtY2FyZC1udW1iZXInLFxuXHRcdCAgICAgIHBsYWNlaG9sZGVyOiAn4oCi4oCi4oCi4oCiIOKAouKAouKAouKAoiDigKLigKLigKLigKIg4oCi4oCi4oCi4oCiJ1xuXHRcdCAgICB9LFxuXHRcdCAgICBjdnY6IHtcblx0XHQgICAgICBlbGVtZW50SWQ6ICdzcS1jdnYnLFxuXHRcdCAgICAgIHBsYWNlaG9sZGVyOiAnQ1ZWJ1xuXHRcdCAgICB9LFxuXHRcdCAgICBleHBpcmF0aW9uRGF0ZToge1xuXHRcdCAgICAgIGVsZW1lbnRJZDogJ3NxLWV4cGlyYXRpb24tZGF0ZScsXG5cdFx0ICAgICAgcGxhY2Vob2xkZXI6ICdNTS9ZWSdcblx0XHQgICAgfSxcblx0XHQgICAgcG9zdGFsQ29kZToge1xuXHRcdCAgICAgIGVsZW1lbnRJZDogJ3NxLXBvc3RhbC1jb2RlJ1xuXHRcdCAgICB9LFxuXHRcdCAgICBjYWxsYmFja3M6IHtcblxuXHRcdFx0ICAgICAgLy8gQ2FsbGVkIHdoZW4gdGhlIFNxUGF5bWVudEZvcm0gY29tcGxldGVzIGEgcmVxdWVzdCB0byBnZW5lcmF0ZSBhIGNhcmRcblx0XHRcdCAgICAgIC8vIG5vbmNlLCBldmVuIGlmIHRoZSByZXF1ZXN0IGZhaWxlZCBiZWNhdXNlIG9mIGFuIGVycm9yLlxuXHRcdFx0ICAgICAgY2FyZE5vbmNlUmVzcG9uc2VSZWNlaXZlZDogZnVuY3Rpb24oZXJyb3JzLCBub25jZSwgY2FyZERhdGEpIHtcblx0XHRcdCAgICAgICAgaWYgKGVycm9ycykge1xuXHRcdFx0ICAgICAgICAgIGNvbnNvbGUubG9nKFwiRW5jb3VudGVyZWQgZXJyb3JzOlwiLCBlcnJvcnMpO1xuXHRcdFx0ICAgICAgICAgIHNlbGYuY2FyZF9lcnJvcnMgPSBlcnJvcnM7XG5cdCAgICAgICAgICAgIFx0ICBzZWxmLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICBcdCAgLy8kc2NvcGUuJGFwcGx5KCk7IC8vIHJlcXVpcmVkIHNpbmNlIHRoaXMgaXMgbm90IGFuIGFuZ3VsYXIgZnVuY3Rpb25cblxuXHRcdFx0ICAgICAgICAvLyBObyBlcnJvcnMgb2NjdXJyZWQuIEV4dHJhY3QgdGhlIGNhcmQgbm9uY2UuXG5cdFx0XHQgICAgICAgIH0gZWxzZSB7XG5cdFx0XHQgICAgICAgICAgc2VsZi5jYXJkX2Vycm9ycyA9IFtdO1xuXHRcdFx0ICAgICAgICAgIC8vIERlbGV0ZSB0aGlzIGxpbmUgYW5kIHVuY29tbWVudCB0aGUgbGluZXMgYmVsb3cgd2hlbiB5b3UncmUgcmVhZHlcblx0XHRcdCAgICAgICAgICAvLyB0byBzdGFydCBzdWJtaXR0aW5nIG5vbmNlcyB0byB5b3VyIHNlcnZlci5cblx0XHRcdCAgICAgICAgICAvL2FsZXJ0KCdOb25jZSByZWNlaXZlZDogJyArIG5vbmNlKTtcblxuXHRcdFx0ICAgICAgICAgIF9jaGFyZ2VDYXJkV2l0aE5vbmNlKG5vbmNlKTtcblxuXHRcdFx0ICAgICAgICAgIC8qXG5cdFx0XHQgICAgICAgICAgICBUaGVzZSBsaW5lcyBhc3NpZ24gdGhlIGdlbmVyYXRlZCBjYXJkIG5vbmNlIHRvIGEgaGlkZGVuIGlucHV0XG5cdFx0XHQgICAgICAgICAgICBmaWVsZCwgdGhlbiBzdWJtaXQgdGhhdCBmaWVsZCB0byB5b3VyIHNlcnZlci5cblx0XHRcdCAgICAgICAgICAgIFVuY29tbWVudCB0aGVtIHdoZW4geW91J3JlIHJlYWR5IHRvIHRlc3Qgb3V0IHN1Ym1pdHRpbmcgbm9uY2VzLlxuXG5cdFx0XHQgICAgICAgICAgICBZb3UnbGwgYWxzbyBuZWVkIHRvIHNldCB0aGUgYWN0aW9uIGF0dHJpYnV0ZSBvZiB0aGUgZm9ybSBlbGVtZW50XG5cdFx0XHQgICAgICAgICAgICBhdCB0aGUgYm90dG9tIG9mIHRoaXMgc2FtcGxlLCB0byBjb3JyZXNwb25kIHRvIHRoZSBVUkwgeW91IHdhbnQgdG9cblx0XHRcdCAgICAgICAgICAgIHN1Ym1pdCB0aGUgbm9uY2UgdG8uXG5cdFx0XHQgICAgICAgICAgKi9cblx0XHRcdCAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZC1ub25jZScpLnZhbHVlID0gbm9uY2U7XG5cdFx0XHQgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vbmNlLWZvcm0nKS5zdWJtaXQoKTtcblxuXHRcdFx0ICAgICAgICB9XG5cdFx0XHQgICAgICB9LFxuXG5cdFx0XHQgICAgICB1bnN1cHBvcnRlZEJyb3dzZXJEZXRlY3RlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgICAgIC8vIEZpbGwgaW4gdGhpcyBjYWxsYmFjayB0byBhbGVydCBidXllcnMgd2hlbiB0aGVpciBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuXG5cdFx0XHQgICAgICB9LFxuXG5cdFx0XHQgICAgICAvLyBGaWxsIGluIHRoZXNlIGNhc2VzIHRvIHJlc3BvbmQgdG8gdmFyaW91cyBldmVudHMgdGhhdCBjYW4gb2NjdXIgd2hpbGUgYVxuXHRcdFx0ICAgICAgLy8gYnV5ZXIgaXMgdXNpbmcgdGhlIHBheW1lbnQgZm9ybS5cblx0XHRcdCAgICAgIGlucHV0RXZlbnRSZWNlaXZlZDogZnVuY3Rpb24oaW5wdXRFdmVudCkge1xuXHRcdFx0ICAgICAgICBzd2l0Y2ggKGlucHV0RXZlbnQuZXZlbnRUeXBlKSB7XG5cdFx0XHQgICAgICAgICAgY2FzZSAnZm9jdXNDbGFzc0FkZGVkJzpcblx0XHRcdCAgICAgICAgICAgIC8vIEhhbmRsZSBhcyBkZXNpcmVkXG5cdFx0XHQgICAgICAgICAgICBicmVhaztcblx0XHRcdCAgICAgICAgICBjYXNlICdmb2N1c0NsYXNzUmVtb3ZlZCc6XG5cdFx0XHQgICAgICAgICAgICAvLyBIYW5kbGUgYXMgZGVzaXJlZFxuXHRcdFx0ICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgICAgICAgY2FzZSAnZXJyb3JDbGFzc0FkZGVkJzpcblx0XHRcdCAgICAgICAgICAgIC8vIEhhbmRsZSBhcyBkZXNpcmVkXG5cdFx0XHQgICAgICAgICAgICBicmVhaztcblx0XHRcdCAgICAgICAgICBjYXNlICdlcnJvckNsYXNzUmVtb3ZlZCc6XG5cdFx0XHQgICAgICAgICAgICAvLyBIYW5kbGUgYXMgZGVzaXJlZFxuXHRcdFx0ICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgICAgICAgY2FzZSAnY2FyZEJyYW5kQ2hhbmdlZCc6XG5cdFx0XHQgICAgICAgICAgICAvLyBIYW5kbGUgYXMgZGVzaXJlZFxuXHRcdFx0ICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgICAgICAgY2FzZSAncG9zdGFsQ29kZUNoYW5nZWQnOlxuXHRcdFx0ICAgICAgICAgICAgLy8gSGFuZGxlIGFzIGRlc2lyZWRcblx0XHRcdCAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgICAgICB9XG5cdFx0XHQgICAgICB9LFxuXG5cdFx0XHQgICAgICBwYXltZW50Rm9ybUxvYWRlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgICAgIC8vIEZpbGwgaW4gdGhpcyBjYWxsYmFjayB0byBwZXJmb3JtIGFjdGlvbnMgYWZ0ZXIgdGhlIHBheW1lbnQgZm9ybSBpc1xuXHRcdFx0ICAgICAgICAvLyBkb25lIGxvYWRpbmcgKHN1Y2ggYXMgc2V0dGluZyB0aGUgcG9zdGFsIGNvZGUgZmllbGQgcHJvZ3JhbW1hdGljYWxseSkuXG5cdFx0XHQgICAgICAgIC8vIHBheW1lbnRGb3JtLnNldFBvc3RhbENvZGUoc2VsZi51c2VyRGF0YS5iaWxsaW5nQWRkcmVzcy56aXApO1xuXG5cdFx0XHQgICAgICB9XG5cdFx0XHQgICAgfVxuXHRcdFx0fSk7XG5cdCAgICBcdHNlbGYucGF5bWVudEZvcm0uYnVpbGQoKTtcbiAgICBcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgXHRcdGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICBcdH0pO1xuXG5cdH1cblxuXHRyZXR1cm4gc3F1YXJlU2VydmljZTtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdzdGF0ZVNlcnZpY2UnLCBzdGF0ZVNlcnZpY2UpO1xuXHRcdFxuLyogQG5nSW5qZWN0ICovXG5zdGF0ZVNlcnZpY2UuJGluamVjdCA9IFsndXNlckRhdGFTZXJ2aWNlJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc3RhdGVTZXJ2aWNlKHVzZXJEYXRhU2VydmljZSkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHN0YXRlID0ge1xuXHRcdHNoaXBpbmdTYW1lQXNCaWxsaW5nOiB0cnVlLFxuXHRcdHByb2R1Y3RTZWxlY3Rpb246IHtcblx0XHRcdGFkZEFQcm9kdWN0QnRuOiB7XG5cdFx0XHRcdGNsYXNzZXM6IHtcblx0XHRcdFx0XHQnYnRuJzogdHJ1ZSxcblx0XHRcdFx0XHQnYnRuLXN1Y2Nlc3MnOiB0cnVlLFxuXHRcdFx0XHRcdCdidG4td2FybmluZyc6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpc2libGU6IHRydWVcblx0XHRcdH0sXG5cdFx0XHRyZW1vdmVMYXN0UHJvZHVjdEJ0bjoge1xuXHRcdFx0XHRjbGFzc2VzOiB7XG5cdFx0XHRcdFx0J2J0bic6IHRydWUsXG5cdFx0XHRcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2UsXG5cdFx0XHRcdFx0J2J0bi13YXJuaW5nJzogZmFsc2UsXG5cdFx0XHRcdFx0J2J0bi1kYW5nZXInOiB0cnVlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpc2libGU6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0aGVhZGVyU3R5bGU6IHtcblx0XHRcdFx0Y29sb3I6IFwicmdiKDUxLDUxLDUxKVwiXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRjb250YWN0SW5mbzoge1xuXHRcdFx0Zmlyc3RuYW1lOiB7XG5cdFx0XHRcdGNsYXNzZXM6IHtcblx0XHRcdFx0XHRcImZvcm0tY29udHJvbFwiOiB0cnVlLFxuXHRcdFx0XHRcdFwiaXMtdmFsaWRcIjogZmFsc2UsXG5cdFx0XHRcdFx0XCJpcy1pbnZhbGlkXCI6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFkZHJlc3NlZDogZmFsc2UsXG5cdFx0XHRcdGlzVmFsaWQ6IGZhbHNlLFxuXHRcdFx0XHRpc0ludmFsaWQ6IGZhbHNlXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRpbmZvQm94ZXM6IHtcblx0XHRcdGZsYXZvckRlZnM6IGZhbHNlLFxuXHRcdFx0dGVybXNDb25kczogZmFsc2Vcblx0XHR9LFxuXHRcdHNlY3Rpb25zQWRkcmVzc2VkOiB7XG5cdFx0XHRwcm9kdWN0U2VsZWN0aW9uOiBmYWxzZSxcblx0XHRcdHNpbmdsZVNoaXBwaW5nQWRkcmVzczogZmFsc2UsXG5cdFx0XHRjb250YWN0SW5mbzogZmFsc2UsXG5cdFx0XHR0ZXJtc0NvbmRzOiBmYWxzZVxuXHRcdH0sXG5cdFx0c2VjdGlvbnNDb21wbGV0ZWQ6IHtcblx0XHRcdHByb2R1Y3RTZWxlY3Rpb246IHRydWUsXG5cdFx0XHRzaW5nbGVTaGlwcGluZ0FkZHJlc3M6IHRydWUsXG5cdFx0XHRjb250YWN0SW5mbzogdHJ1ZSxcblx0XHRcdHRlcm1zQ29uZHM6IGZhbHNlXG5cdFx0fSxcblx0XHRzZWN0aW9uSGVhZGVyczoge1xuXHRcdFx0cHJvZHVjdFNlbGVjdGlvbjoge1xuXHRcdFx0XHRzaG93RXJyb3I6IGZhbHNlLFxuXHRcdFx0XHRzaG93Q29tcGxldGVkOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdHNpbmdsZVNoaXBwaW5nQWRkcmVzczoge1xuXHRcdFx0XHRzaG93RXJyb3I6IGZhbHNlLFxuXHRcdFx0XHRzaG93Q29tcGxldGVkOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdGNvbnRhY3RJbmZvOiB7XG5cdFx0XHRcdHNob3dFcnJvcjogZmFsc2UsXG5cdFx0XHRcdHNob3dDb21wbGV0ZWQ6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0dGVybXNDb25kczoge1xuXHRcdFx0XHRzaG93RXJyb3I6IGZhbHNlLFxuXHRcdFx0XHRzaG93Q29tcGxldGVkOiBmYWxzZVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Y2hlY2tDb21wbGV0bmVzczogY2hlY2tDb21wbGV0bmVzcyxcblx0XHRyZWFkeUZvclN1Ym1pc3Npb246IGZhbHNlLFxuXHRcdHN1Ym1pc3Npb25CdG46IHtcblx0XHRcdFwiYnRuXCI6IHRydWUsXG5cdFx0XHRcImJ0bi1ibG9ja1wiOiB0cnVlLFxuXHRcdFx0XCJidG4tc3VjY2Vzc1wiOiBmYWxzZSxcblx0XHRcdFwiYnRuLXNlY29uZGFyeVwiOiB0cnVlXG5cdFx0fVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHRlcm1zQ29uZHNBcmVHb29kKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFxuXG5cdFx0cmV0dXJuIHVzZXJEYXRhU2VydmljZS5hZ3JlZWRUb1Rlcm1zO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tDb21wbGV0bmVzcygpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0dmFyIG5vRmxhZ3MgPSB0cnVlO1xuXG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggcmVxdWlybm1lbnRzXG5cdFx0T2JqZWN0LmtleXMoc2VsZi5zZWN0aW9uc0NvbXBsZXRlZCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdGlmKHNlbGYuc2VjdGlvbnNDb21wbGV0ZWRba2V5XSA9PSBmYWxzZSkgbm9GbGFncyA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0aWYobm9GbGFncykge1xuXHRcdFx0cmVhZHlGb3JTdWJtaXNzaW9uID0gdHJ1ZTtcblx0XHRcdHNlbGYuc3VibWlzc2lvbkJ0bltcImJ0bi1zdWNjZXNzXCJdID0gdHJ1ZTtcblx0XHRcdHNlbGYuc3VibWlzc2lvbkJ0bltcImJ0bi1zZWNvbmRhcnlcIl0gPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVhZHlGb3JTdWJtaXNzaW9uID0gZmFsc2U7XG5cdFx0XHRzZWxmLnN1Ym1pc3Npb25CdG5bXCJidG4tc3VjY2Vzc1wiXSA9IGZhbHNlO1xuXHRcdFx0c2VsZi5zdWJtaXNzaW9uQnRuW1wiYnRuLXNlY29uZGFyeVwiXSA9IHRydWU7XG5cdFx0fTtcblx0fVx0XG5cblx0cmV0dXJuIHN0YXRlO1xufTtcdCIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLnNlcnZpY2UoJ3N1Ym1pc3Npb25TZXJ2aWNlJywgc3VibWlzc2lvblNlcnZpY2UpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRzdWJtaXNzaW9uU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBzdWJtaXNzaW9uU2VydmljZSgkaHR0cCkge1xuXHRcdC8vY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIHN1Ym1pc3Npb24gc2VydmljZScpO1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdHNlbGYuc3VibWl0ID0gZnVuY3Rpb24odXNlckRhdGEpIHtcblx0XHRcdC8vY29uc29sZS5sb2coJ3N1Ym1pdHRpbmcnLCB1c2VyRGF0YSk7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdC8vdHJ5IFBPU1Rcblx0XHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHRcdHVybDogJy9zdWJzY3JpcHRpb24tYXBwbGljYXRpb24tc3VibWlzc2lvbicsXG5cdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGF0YTogdXNlckRhdGFcblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdnb3QgdGhpcyByZXNwb25zZScsIHJlc3BvbnNlKTtcblx0XHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgndXNlckRhdGFTZXJ2aWNlJywgdXNlckRhdGFTZXJ2aWNlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xudXNlckRhdGFTZXJ2aWNlLiRpbmplY3QgPSBbXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YVNlcnZpY2UoKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgdXNlckRhdGEgPSB7XG5cdFx0bmFtZToge1xuXHRcdFx0Zmlyc3Q6IFwiXCIsXG5cdFx0XHRsYXN0OiBcIlwiXG5cdFx0fSxcblx0XHRjb250YWN0OiB7XG5cdFx0XHRlbWFpbDogXCJcIixcblx0XHRcdHBob25lOiBcIlwiXG5cdFx0fSxcblx0XHRzaGlwcGluZ0Rlc3RpbmF0aW9uOiB7XG5cdFx0XHRzdHJlZXQ6IFwiXCIsXG5cdFx0XHRjaXR5OiBcIlwiLFxuXHRcdFx0c3RhdGU6IFwiXCIsXG5cdFx0XHR6aXA6IFwiXCJcblx0XHR9LFxuXHRcdGJpbGxpbmdBZGRyZXNzOiB7XG5cdFx0XHRzdHJlZXQ6IFwiXCIsXG5cdFx0XHRjaXR5OiBcIlwiLFxuXHRcdFx0c3RhdGU6IFwiXCIsXG5cdFx0XHR6aXA6IFwiXCJcblx0XHR9LFxuXHRcdGNhcmQ6IHtcblx0XHRcdC8vY2FyZF9udW1iZXI6IFwiXCIsXG5cdFx0XHQvL2N2djogXCJcIixcblx0XHRcdC8vZXhwaXJhdGlvbl9kYXRlOiBcIlwiLFxuXHRcdFx0Ly9wb3N0YWxfY29kZTogXCJcIixcblx0XHRcdG5vbmNlOiBcIlwiLFxuXHRcdFx0bGFzdDQ6IFwiXCIsXG5cdFx0XHR0eXBlOiBcIlwiXG5cdFx0fSxcblx0XHRvcmRlck5vOiBcIlwiLFxuXHRcdG9yZGVyRGF0ZTogXCJcIixcblx0XHRvcmRlcjogW10sXG5cdFx0dGVuZGVyOiB7XG5cdFx0XHRkaXNjb3VudHM6IDAsXG5cdFx0XHRzaGlwcGluZzogMCxcblx0XHRcdHRvdGFsOiAwXG5cdFx0fSxcblx0XHRhZ3JlZWRUb1Rlcm1zOiBmYWxzZVxuXHR9O1xuXG5cdHJldHVybiB1c2VyRGF0YTtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCd2YWxpZGF0aW9uU2VydmljZScsIHZhbGlkYXRpb25TZXJ2aWNlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xudmFsaWRhdGlvblNlcnZpY2UuJGluamVjdCA9IFsnc3RhdGVTZXJ2aWNlJywgJ3VzZXJEYXRhU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb25TZXJ2aWNlKHN0YXRlU2VydmljZSwgdXNlckRhdGFTZXJ2aWNlKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgdmFsaWRhdGlvbiA9IHtcblx0XHR0ZXJtc0FuZENvbmQ6IHRlcm1zQW5kQ29uZFxuXHR9O1xuXG5cdGZ1bmN0aW9uIHRlcm1zQW5kQ29uZCgpIHtcblx0XHRjb25zb2xlLmxvZygndmFsaWRhdGluZyB0ZXJtcyBhbmQgY29uZGl0aW9ucycpO1xuXHRcdC8vbWFrZSBzdXJlIHRlcm1zIGFuZCBjb25kaXRpb25zIGlzIG1hcmtlZCBhcyBhZGRyZXNzZWRcblx0XHRzdGF0ZVNlcnZpY2Uuc2VjdGlvbnNBZGRyZXNzZWQudGVybXNDb25kcyA9IHRydWU7XG5cblx0XHQvL3NlY3Rpb24gY29tbGV0ZW5lc3MgaXMgYSByZWZsZWN0aW9uIG9mIHRoZSBhZ3JlZW1lbnQgc3RhdHVzXG5cdFx0c3RhdGVTZXJ2aWNlLnNlY3Rpb25zQ29tcGxldGVkLnRlcm1zQ29uZHMgPSB1c2VyRGF0YVNlcnZpY2UuYWdyZWVkVG9UZXJtcztcblxuXHRcdC8vdG9nZ2xlIGNvbXBsZXRuZXNzXG5cdFx0aWYoc3RhdGVTZXJ2aWNlLnNlY3Rpb25zQ29tcGxldGVkLnRlcm1zQ29uZHMpIHtcblx0XHRcdHN0YXRlU2VydmljZS5zZWN0aW9uSGVhZGVycy50ZXJtc0NvbmRzLnNob3dFcnJvciA9IGZhbHNlO1xuXHRcdFx0c3RhdGVTZXJ2aWNlLnNlY3Rpb25IZWFkZXJzLnRlcm1zQ29uZHMuc2hvd0NvbXBsZXRlZCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0YXRlU2VydmljZS5zZWN0aW9uSGVhZGVycy50ZXJtc0NvbmRzLnNob3dFcnJvciA9IHRydWU7XG5cdFx0XHRzdGF0ZVNlcnZpY2Uuc2VjdGlvbkhlYWRlcnMudGVybXNDb25kcy5zaG93Q29tcGxldGVkID0gZmFsc2U7XG5cdFx0fTtcblxuXHR9O1xuXG5cdHJldHVybiB2YWxpZGF0aW9uO1xufTtcdCIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLnNlcnZpY2UoJ3ppcGNvbXBsZXRlJywgemlwY29tcGxldGUpO1xuXHRcdFxuLyogQG5nSW5qZWN0ICovXG56aXBjb21wbGV0ZS4kaW5qZWN0ID0gW107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gemlwY29tcGxldGUoKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHZhciBjbGllbnRLZXkgPSBcIm1TYWpWWUQ4dXJGU09qVzN0dUpmaGRuU2pNcmV2a21nbFg0MFcyYnoxMkttNGNWSzV2WVpwb2dRZ1RjZnA2andcIjtcblx0dmFyIGNhY2hlID0ge307XG5cdC8vdmFyIGNvbnRhaW5lciA9ICQoXCIjZXhhbXBsZTFcIik7XG5cdC8vdmFyIGVycm9yRGl2ID0gY29udGFpbmVyLmZpbmQoXCJkaXYudGV4dC1lcnJvclwiKTtcblxuXHQvL2xvY2FsIGZ1bmN0aW9uIFxuXHRzZWxmLmhhbmRsZVJlc3AgPSBmdW5jdGlvbihkYXRhKSB7XG5cdFx0Ly8gQ2hlY2sgZm9yIGVycm9yXG5cdFx0aWYgKGRhdGEuZXJyb3JfbXNnKVxuXHRcdFx0Y29uc29sZS5sb2coZGF0YS5lcnJvcl9tc2cpO1xuXHRcdFx0Ly9lcnJvckRpdi50ZXh0KGRhdGEuZXJyb3JfbXNnKTtcblx0XHRlbHNlIGlmIChcImNpdHlcIiBpbiBkYXRhKVxuXHRcdHtcblx0XHRcdC8vIFNldCBjaXR5IGFuZCBzdGF0ZVxuXHRcdFx0Y29udGFpbmVyLmZpbmQoXCJpbnB1dFtuYW1lPSdjaXR5J11cIikudmFsKGRhdGEuY2l0eSk7XG5cdFx0XHRjb250YWluZXIuZmluZChcImlucHV0W25hbWU9J3N0YXRlJ11cIikudmFsKGRhdGEuc3RhdGUpO1xuXHRcdH0gXG5cdH07XG5cblx0Ly96aXAgY2hlY2tlclxuXHRzZWxmLmNoZWNrWmlwID0gZnVuY3Rpb24oZW50ZXJlZFppcCkge1xuXHRcdHZhciB6aXBjb2RlID0gZW50ZXJlZFppcC5zdWJzdHJpbmcoMCwgNSk7IFxuXG5cdFx0aWYgKHppcGNvZGUubGVuZ3RoID09IDUgJiYgL15bMC05XSskLy50ZXN0KHppcGNvZGUpKSB7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdjaGVja2luZyB6aXAnLCB6aXBjb2RlKTtcblx0XHR9XHRcblx0XHRcblx0fTtcbn07XHQiXX0=
