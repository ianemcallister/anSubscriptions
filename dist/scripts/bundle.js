config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("ansub",["ngRoute","ui.bootstrap"]);function mainController(e,t,r,n,o,s,i){e.userData=o,e.state=s,i.init()}function successController(e,t,r){e.confirmationCode=r.confirmationCode,console.log("success controler",r.confirmationCode,e.confirmationCode)}function billingAddress(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/billingAddress.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){this.userData=r,this.state=n}return r.$inject=["$scope","$log","userDataService","stateService"],e}function billingInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/billingInput.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){this.userData=r,this.state=n}return r.$inject=["$scope","$log","userDataService","stateService"],e}function contactInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/contactInput.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){this.userData=r,this.state=n}return r.$inject=["$scope","$log","userDataService","stateService"],e}function frequencySelection(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/frequencySelection.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t){this.frequencies=["month","quarter","year"],this.starts={month:["January","February","March","April","May","June","July","August","September","October","November","December"],quarter:["Winter","Spring","Summer","Fall"],year:["2018","2019","2020"]},this.selectedFrequency="",this.startsIn=""}return r.$inject=["$scope","$log"],e}function productSelection(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/productSelection.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(t,e,r,n,o){var s=this;s.userData=r,s.state=n.productSelection,s.state.infoBox=n.infoBoxes.flavorDefs,o.download.productList().then(function(e){s.flavors=e,t.$apply()}).catch(function(e){console.log("product list error, ",e)}),s.orderList=r.order,s.productPrice=1699,s.order=r.tender;var i={id:1,flavor:"",mixflvrCount:0,mixflvrs:{srpec:{id:"srpec",name:"Secret Recipe Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}},sralm:{id:"sralm",name:"Secret Recipe Almonds",selected:!1,classes:{"list-group-item":!0,active:!1}},srcsh:{id:"srcsh",name:"Secret Recipe Cashews",selected:!1,classes:{"list-group-item":!0,active:!1}},srpea:{id:"srpea",name:"Secret Recipe Peanuts",selected:!1,classes:{"list-group-item":!0,active:!1}},cnpec:{id:"cnpec",name:"Cinnamon Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}},cnalm:{id:"cnalm",name:"Cinnamon Almonds",selected:!1,classes:{"list-group-item":!0,active:!1}},drpec:{id:"drpec",name:"Drunken Pecans",selected:!1,classes:{"list-group-item":!0,active:!1}}},mixFlvrsSelected:[],mix:""};function c(){s.order.total=s.orderList.length*s.productPrice-s.order.discounts,4==s.orderList.length&&(s.order.total=s.order.total-s.productPrice)}s.addAProduct=function(){var e=s.orderList.length;e<4&&s.orderList.push(Object.create(i)),3==e&&(s.state.addAProductBtn.visible=!1),0<e&&(s.state.removeLastProductBtn.visible=!0);for(var t=0;t<=e;t++)s.orderList[t].id=t+1;c()},s.removeLastProduct=function(){var e=s.orderList.length,t=e-1;1<e&&s.orderList.splice(t,1),2==e&&(s.state.removeLastProductBtn.visible=!1),s.state.addAProductBtn.visible=!0,4==e&&(s.order.discounts=0),c()},s.removeAProduct=function(e){var t=e-1;1<s.orderList.length&&s.orderList.splice(t,1);for(var r=0;r<=s.orderList.length-1;r++)s.orderList[r].id=r+1;c()},s.validateProducts=function(){},s.countMixFlavors=function(t){var r=0;return Object.keys(t).forEach(function(e){t[e].selected&&r++}),r},s.updateShoppingCart=function(){console.log("updating shopping cart")},s.buildFlavorList=function(t){s.orderList[t].mixFlvrsSelected=[],Object.keys(s.orderList[t].mixflvrs).forEach(function(e){s.orderList[t].mixflvrs[e].selected&&s.orderList[t].mixFlvrsSelected.push(s.orderList[t].mixflvrs[e].name)})},s.orderList.push(Object.create(i)),c()}return r.$inject=["$scope","$log","userDataService","stateService","squareService"],e}function shipDest(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",template:"<div>testing</div>",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r){this.zipCheck=r}return r.$inject=["$scope","$log","zipcomplete"],e}function singleAddressInput(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/singleAddressInput.htm",replace:!0,scope:{address:"="},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n){var o=this;o.userData=r,o.state=n,o.updateBillingAddress=function(){o.state.shipingSameAsBilling&&(o.userData.billingAddress.street=o.userData.shippingDestination.street,o.userData.billingAddress.zip=o.userData.shippingDestination.zip,o.userData.billingAddress.city=o.userData.shippingDestination.city,o.userData.billingAddress.state=o.userData.shippingDestination.state)}}return r.$inject=["$scope","$log","userDataService","stateService"],e}function subTermsCond(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/subTermsCond.htm",replace:!0,scope:{},link:t,controller:r,controllerAs:"vm",bindToController:!0};function t(e,t,r,n){}function r(e,t,r,n,o,s,i,c){this.state=n,this.userData=o,this.validate=s,this.square=c}return r.$inject=["$scope","$log","$location","stateService","userDataService","validationService","submissionService","squareService"],e}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/monthlySub.htm",controller:"mainController",controllerAs:"vm"}).when("/success/:confirmationCode",{templateUrl:"views/success.htm",controller:"successController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function errorHandlingService(){return{}}function modalService(e){var o={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/modal.htm"},s={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(e,t){var r={},n={};return angular.extend(r,o,e),angular.extend(n,s,t),r.controller||(r.controller=function(e,t){e.modalOptions=n,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.dismiss("cancel")}}),$modal.open(r).result}}function serverService(o){return{chargeCard:function(e,n){return new Promise(function(t,r){o({method:"POST",url:e,headers:{"Content-Type":"application/json"},data:n}).then(function(e){console.log("got this response",e),t(e.data)},function(e){r(e)})})},get:{sqrAppId:function(){return new Promise(function(t,r){o({method:"GET",url:"/api/squareId"}).then(function(e){console.log("got this response",e),t(e.data)},function(e){r(e)})})},sqrPrdctList:function(){return new Promise(function(t,r){o({method:"GET",url:"/api/productList"}).then(function(e){console.log("got this response",e),t(e.data)},function(e){r(e)})})}}}}function squareService(r,n,o,t){var s=this;function i(e){t.card.nonce=e,o.chargeCard("/api/charge_card",t).then(function(e){var t="/success/"+e.data;console.log("got this path back",t),n.path(t),r.$apply()}).catch(function(e){console.log("Error:",e)})}return{_chargeCardWithNonce:i,submitForm:function(){console.log("submitting form"),s.paymentForm.requestCardNonce()},download:{productList:function(){return new Promise(function(t,r){o.get.sqrPrdctList().then(function(e){t(e)}).catch(function(e){r(e)})})}},init:function(){o.get.sqrAppId().then(function(e){s.paymentForm=new SqPaymentForm({applicationId:e.id,inputClass:"sq-input",inputStyles:[{fontSize:"14px",padding:"7px 12px",backgroundColor:"transparent"}],cardNumber:{elementId:"sq-card-number",placeholder:"•••• •••• •••• ••••"},cvv:{elementId:"sq-cvv",placeholder:"CVV"},expirationDate:{elementId:"sq-expiration-date",placeholder:"MM/YY"},postalCode:{elementId:"sq-postal-code"},callbacks:{cardNonceResponseReceived:function(e,t,r){e?(console.log("Encountered errors:",e),s.card_errors=e,s.isProcessing=!1):(s.card_errors=[],i(t))},unsupportedBrowserDetected:function(){},inputEventReceived:function(e){e.eventType},paymentFormLoaded:function(){}}}),s.paymentForm.build()}).catch(function(e){console.log(e)})}}}function stateService(e){return{shipingSameAsBilling:!0,productSelection:{addAProductBtn:{classes:{btn:!0,"btn-success":!0,"btn-warning":!1},visible:!0},removeLastProductBtn:{classes:{btn:!0,"btn-success":!1,"btn-warning":!1,"btn-danger":!0},visible:!1},headerStyle:{color:"rgb(51,51,51)"}},contactInfo:{firstname:{classes:{"form-control":!0,"is-valid":!1,"is-invalid":!1},addressed:!1,isValid:!1,isInvalid:!1}},infoBoxes:{flavorDefs:!1,termsConds:!1},sectionsAddressed:{productSelection:!1,singleShippingAddress:!1,contactInfo:!1,termsConds:!1},sectionsCompleted:{productSelection:!0,singleShippingAddress:!0,contactInfo:!0,termsConds:!1},sectionHeaders:{productSelection:{showError:!1,showCompleted:!1},singleShippingAddress:{showError:!1,showCompleted:!1},contactInfo:{showError:!1,showCompleted:!1},termsConds:{showError:!1,showCompleted:!1}},checkCompletness:function(){var t=this,r=!0;Object.keys(t.sectionsCompleted).forEach(function(e){0==t.sectionsCompleted[e]&&(r=!1)}),t.submissionBtn["btn-secondary"]=r?(readyForSubmission=!0,t.submissionBtn["btn-success"]=!0,!1):(readyForSubmission=!1,t.submissionBtn["btn-success"]=!1,!0)},readyForSubmission:!1,submissionBtn:{btn:!0,"btn-block":!0,"btn-success":!1,"btn-secondary":!0}}}function submissionService(n){this.submit=function(e){return new Promise(function(t,r){n({method:"POST",url:"/subscription-application-submission",headers:{"Content-Type":"application/json"},data:e}).then(function(e){console.log("got this response",e),t(e)},function(e){r(e)})})}}function userDataService(){return{name:{first:"",last:""},contact:{email:"",phone:""},shippingDestination:{street:"",city:"",state:"",zip:""},billingAddress:{street:"",city:"",state:"",zip:""},card:{nonce:"",last4:"",type:""},orderNo:"",orderDate:"",order:[],tender:{discounts:0,shipping:0,total:0},agreedToTerms:!1}}function validationService(e,t){return{termsAndCond:function(){console.log("validating terms and conditions"),e.sectionsAddressed.termsConds=!0,e.sectionsCompleted.termsConds=t.agreedToTerms,e.sectionsCompleted.termsConds?(e.sectionHeaders.termsConds.showError=!1,e.sectionHeaders.termsConds.showCompleted=!0):(e.sectionHeaders.termsConds.showError=!0,e.sectionHeaders.termsConds.showCompleted=!1)}}}function zipcomplete(){this.handleResp=function(e){e.error_msg?console.log(e.error_msg):"city"in e&&(container.find("input[name='city']").val(e.city),container.find("input[name='state']").val(e.state))},this.checkZip=function(e){var t=e.substring(0,5);5==t.length&&/^[0-9]+$/.test(t)&&console.log("checking zip",t)}}angular.module("ansub").controller("mainController",mainController),mainController.$inject=["$scope","$log","$location","submissionService","userDataService","stateService","squareService"],angular.module("ansub").controller("successController",successController),successController.$inject=["$scope","$log","$routeParams"],angular.module("ansub").directive("billingAddress",billingAddress),angular.module("ansub").directive("billingInput",billingInput),angular.module("ansub").directive("contactInput",contactInput),angular.module("ansub").directive("frequencySelection",frequencySelection),angular.module("ansub").directive("productSelection",productSelection),angular.module("ansub").directive("shipDest",shipDest),angular.module("ansub").directive("singleAddressInput",singleAddressInput),angular.module("ansub").directive("subTermsCond",subTermsCond),angular.module("ansub").config(config),angular.module("ansub").service("errorHandlingService",errorHandlingService),errorHandlingService.$inject=[],angular.module("ansub").service("modalService",modalService),modalService.$inject=["$uibModal"],angular.module("ansub").service("serverService",serverService),serverService.$inject=["$http"],angular.module("ansub").service("squareService",squareService),squareService.$inject=["$rootScope","$location","serverService","userDataService"],angular.module("ansub").service("stateService",stateService),stateService.$inject=["userDataService"],angular.module("ansub").service("submissionService",submissionService),submissionService.$inject=["$http"],angular.module("ansub").service("userDataService",userDataService),userDataService.$inject=[],angular.module("ansub").service("validationService",validationService),validationService.$inject=["stateService","userDataService"],angular.module("ansub").service("zipcomplete",zipcomplete),zipcomplete.$inject=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9tYWluLmNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL2NvbnRyb2xsZXJzL3N1Y2Nlc3MuY29udHJvbGxlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9iaWxsaW5nQWRkcmVzcy5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvYmlsbGluZ0lucHV0LmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jb250YWN0SW5wdXQuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2ZyZXF1ZW5jeVNlbGVjdGlvbi5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvcHJvZHVjdFNlbGVjdGlvbi5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2hpcERlc3QuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL3NpbmdsZUFkZHJlc3NJbnB1dC5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc3VidGVybXNjb25kLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvcm91dGVzL3JvdXRlcy5jb25maWcuanMiLCJzY3JpcHRzL3NlcnZpY2VzL2Vycm9ySGFuZGxpbmcuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvbW9yZGFscy5zZXJ2aWNlLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy9zZXJ2ZXIuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvc3F1YXJlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3N0YXRlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3N1Ym1pc3Npb25TZXJpdmNlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3VzZXJEYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3ZhbGlkYXRpb24uc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvemlwY29tcGxldGUuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwibWFpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9nIiwiJGxvY2F0aW9uIiwic3VibWlzc2lvblNlcnZpY2UiLCJ1c2VyRGF0YVNlcnZpY2UiLCJzdGF0ZVNlcnZpY2UiLCJzcXVhcmVTZXJ2aWNlIiwidXNlckRhdGEiLCJzdGF0ZSIsImluaXQiLCJzdWNjZXNzQ29udHJvbGxlciIsIiRyb3V0ZVBhcmFtcyIsImNvbmZpcm1hdGlvbkNvZGUiLCJjb25zb2xlIiwibG9nIiwiYmlsbGluZ0FkZHJlc3MiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwicmVwbGFjZSIsInNjb3BlIiwibGluayIsImxpbmtGdW5jIiwiY29udHJvbGxlciIsImJpbGxpbmdBZGRyZXNzQ29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJlbCIsImF0dHIiLCJjdHJsIiwidGhpcyIsIiRpbmplY3QiLCJiaWxsaW5nSW5wdXQiLCJiaWxsaW5nSW5wdXRDb250cm9sbGVyIiwiY29udGFjdElucHV0IiwiY29udGFjdElucHV0dENvbnRyb2xsZXIiLCJmcmVxdWVuY3lTZWxlY3Rpb24iLCJmcmVxdWVuY3lTZWxlY3Rpb25Db250cm9sbGVyIiwiZnJlcXVlbmNpZXMiLCJzdGFydHMiLCJtb250aCIsInF1YXJ0ZXIiLCJ5ZWFyIiwic2VsZWN0ZWRGcmVxdWVuY3kiLCJzdGFydHNJbiIsInByb2R1Y3RTZWxlY3Rpb24iLCJwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlciIsInNlbGYiLCJpbmZvQm94ZXMiLCJmbGF2b3JEZWZzIiwiZG93bmxvYWQiLCJwcm9kdWN0TGlzdCIsInRoZW4iLCJzIiwiZmxhdm9ycyIsIiRhcHBseSIsImNhdGNoIiwiZSIsIm9yZGVyTGlzdCIsIm9yZGVyIiwicHJvZHVjdFByaWNlIiwidGVuZGVyIiwicHJvZHVjdE9iamVjdCIsImlkIiwiZmxhdm9yIiwibWl4Zmx2ckNvdW50IiwibWl4Zmx2cnMiLCJzcnBlYyIsIm5hbWUiLCJzZWxlY3RlZCIsImNsYXNzZXMiLCJsaXN0LWdyb3VwLWl0ZW0iLCJhY3RpdmUiLCJzcmFsbSIsInNyY3NoIiwic3JwZWEiLCJjbnBlYyIsImNuYWxtIiwiZHJwZWMiLCJtaXhGbHZyc1NlbGVjdGVkIiwibWl4Iiwic3VtT3JkZXIiLCJ0b3RhbCIsImxlbmd0aCIsImRpc2NvdW50cyIsImFkZEFQcm9kdWN0Iiwibm9PZlByb2R1Y3RzIiwicHVzaCIsIk9iamVjdCIsImNyZWF0ZSIsImFkZEFQcm9kdWN0QnRuIiwidmlzaWJsZSIsInJlbW92ZUxhc3RQcm9kdWN0QnRuIiwiaSIsInJlbW92ZUxhc3RQcm9kdWN0IiwicmVtb3ZlSW5kZXgiLCJzcGxpY2UiLCJyZW1vdmVBUHJvZHVjdCIsInZhbGlkYXRlUHJvZHVjdHMiLCJjb3VudE1peEZsYXZvcnMiLCJmbGF2b3JPYmplY3QiLCJjb3VudGVyIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ1cGRhdGVTaG9wcGluZ0NhcnQiLCJidWlsZEZsYXZvckxpc3QiLCJzaGlwRGVzdCIsInRlbXBsYXRlIiwic2hpcERlc3RDb250cm9sbGVyIiwiemlwY29tcGxldGUiLCJ6aXBDaGVjayIsInNpbmdsZUFkZHJlc3NJbnB1dCIsImFkZHJlc3MiLCJzaW5nbGVBZGRyZXNzSW5wdXRDb250cm9sbGVyIiwidXBkYXRlQmlsbGluZ0FkZHJlc3MiLCJzaGlwaW5nU2FtZUFzQmlsbGluZyIsInN0cmVldCIsInNoaXBwaW5nRGVzdGluYXRpb24iLCJ6aXAiLCJjaXR5Iiwic3ViVGVybXNDb25kIiwic3ViVGVybXNDb25kQ29udHJvbGxlciIsInZhbGlkYXRpb25TZXJ2aWNlIiwidmFsaWRhdGUiLCJzcXVhcmUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaGFzaFByZWZpeCIsIndoZW4iLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZXJyb3JIYW5kbGluZ1NlcnZpY2UiLCJtb2RhbFNlcnZpY2UiLCIkdWliTW9kYWwiLCJtb2RhbERlZmF1bHRzIiwiYmFja2Ryb3AiLCJrZXlib2FyZCIsIm1vZGFsRmFkZSIsIm1vZGFsT3B0aW9ucyIsImNsb3NlQnV0dG9uVGV4dCIsImFjdGlvbkJ1dHRvblRleHQiLCJoZWFkZXJUZXh0IiwiYm9keVRleHQiLCJzaG93TW9kYWwiLCJjdXN0b21Nb2RhbERlZmF1bHRzIiwiY3VzdG9tTW9kYWxPcHRpb25zIiwic2hvdyIsInRlbXBNb2RhbERlZmF1bHRzIiwidGVtcE1vZGFsT3B0aW9ucyIsImV4dGVuZCIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJyZXN1bHQiLCJjbG9zZSIsImRpc21pc3MiLCIkbW9kYWwiLCJvcGVuIiwic2VydmVyU2VydmljZSIsIiRodHRwIiwiY2hhcmdlQ2FyZCIsInVybCIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJyZXNwb25zZSIsImVycm9yIiwiZ2V0Iiwic3FyQXBwSWQiLCJzcXJQcmRjdExpc3QiLCIkcm9vdFNjb3BlIiwiX2NoYXJnZUNhcmRXaXRoTm9uY2UiLCJub25jZSIsImNhcmQiLCJuZXdQYXRoIiwicGF0aCIsInN1Ym1pdEZvcm0iLCJwYXltZW50Rm9ybSIsInJlcXVlc3RDYXJkTm9uY2UiLCJzcUFwcCIsIlNxUGF5bWVudEZvcm0iLCJhcHBsaWNhdGlvbklkIiwiaW5wdXRDbGFzcyIsImlucHV0U3R5bGVzIiwiZm9udFNpemUiLCJwYWRkaW5nIiwiYmFja2dyb3VuZENvbG9yIiwiY2FyZE51bWJlciIsImVsZW1lbnRJZCIsInBsYWNlaG9sZGVyIiwiY3Z2IiwiZXhwaXJhdGlvbkRhdGUiLCJwb3N0YWxDb2RlIiwiY2FsbGJhY2tzIiwiY2FyZE5vbmNlUmVzcG9uc2VSZWNlaXZlZCIsImVycm9ycyIsImNhcmREYXRhIiwiY2FyZF9lcnJvcnMiLCJpc1Byb2Nlc3NpbmciLCJ1bnN1cHBvcnRlZEJyb3dzZXJEZXRlY3RlZCIsImlucHV0RXZlbnRSZWNlaXZlZCIsImlucHV0RXZlbnQiLCJldmVudFR5cGUiLCJwYXltZW50Rm9ybUxvYWRlZCIsImJ1aWxkIiwiYnRuIiwiYnRuLXN1Y2Nlc3MiLCJidG4td2FybmluZyIsImJ0bi1kYW5nZXIiLCJoZWFkZXJTdHlsZSIsImNvbG9yIiwiY29udGFjdEluZm8iLCJmaXJzdG5hbWUiLCJmb3JtLWNvbnRyb2wiLCJpcy12YWxpZCIsImlzLWludmFsaWQiLCJhZGRyZXNzZWQiLCJpc1ZhbGlkIiwiaXNJbnZhbGlkIiwidGVybXNDb25kcyIsInNlY3Rpb25zQWRkcmVzc2VkIiwic2luZ2xlU2hpcHBpbmdBZGRyZXNzIiwic2VjdGlvbnNDb21wbGV0ZWQiLCJzZWN0aW9uSGVhZGVycyIsInNob3dFcnJvciIsInNob3dDb21wbGV0ZWQiLCJjaGVja0NvbXBsZXRuZXNzIiwibm9GbGFncyIsInN1Ym1pc3Npb25CdG4iLCJyZWFkeUZvclN1Ym1pc3Npb24iLCJidG4tYmxvY2siLCJidG4tc2Vjb25kYXJ5Iiwic3VibWl0IiwiZmlyc3QiLCJsYXN0IiwiY29udGFjdCIsImVtYWlsIiwicGhvbmUiLCJsYXN0NCIsInR5cGUiLCJvcmRlck5vIiwib3JkZXJEYXRlIiwic2hpcHBpbmciLCJhZ3JlZWRUb1Rlcm1zIiwidGVybXNBbmRDb25kIiwiaGFuZGxlUmVzcCIsImVycm9yX21zZyIsImNvbnRhaW5lciIsImZpbmQiLCJ2YWwiLCJjaGVja1ppcCIsImVudGVyZWRaaXAiLCJ6aXBjb2RlIiwic3Vic3RyaW5nIiwidGVzdCIsInNlcnZpY2UiXSwibWFwcGluZ3MiOiJzREFFQSxJQUFBQSxPQUFBQyxRQUFBQyxPQUFBLFFBQUEsQ0FBQSxVQUFBLGlCQ0dBLFNBQUFDLGVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBS0FOLEVBQUFPLFNBQUFILEVBQ0FKLEVBQUFRLE1BQUFILEVBRUFDLEVBQUFHLE9DUkEsU0FBQUMsa0JBQUFWLEVBQUFDLEVBQUFVLEdBSUFYLEVBQUFZLGlCQUFBRCxFQUFBQyxpQkFHQUMsUUFBQUMsSUFBQSxvQkFBQUgsRUFBQUMsaUJBQUFaLEVBQUFZLGtCQ1RBLFNBQUFHLHdEQUVBLElBQUFDLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLDJCQUNBQyxTQUFBLEVBQ0FDLE1BQUEsR0FDQUMsS0FBQUMsRUFDQUMsV0FBQUMsRUFDQUMsYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBS0EsU0FBQUwsRUFBQXhCLEVBQUFDLEVBQUFHLEVBQUFDLEdBRUF5QixLQUdBdkIsU0FBQUgsRUFIQTBCLEtBSUF0QixNQUFBSCxFQU1BLE9BZkFtQixFQUFBTyxRQUFBLENBQUEsU0FBQSxPQUFBLGtCQUFBLGdCQWVBZixFQy9CQSxTQUFBZ0Isc0RBRUEsSUFBQWhCLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLHlCQUNBQyxTQUFBLEVBQ0FDLE1BQUEsR0FDQUMsS0FBQUMsRUFDQUMsV0FBQVUsRUFDQVIsYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBS0EsU0FBQUksRUFBQWpDLEVBQUFDLEVBQUFHLEVBQUFDLEdBRUF5QixLQUdBdkIsU0FBQUgsRUFIQTBCLEtBSUF0QixNQUFBSCxFQU1BLE9BZkE0QixFQUFBRixRQUFBLENBQUEsU0FBQSxPQUFBLGtCQUFBLGdCQWVBZixFQy9CQSxTQUFBa0Isc0RBRUEsSUFBQWxCLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLHlCQUNBQyxTQUFBLEVBQ0FDLE1BQUEsR0FDQUMsS0FBQUMsRUFDQUMsV0FBQVksRUFDQVYsYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBS0EsU0FBQU0sRUFBQW5DLEVBQUFDLEVBQUFHLEVBQUFDLEdBRUF5QixLQUdBdkIsU0FBQUgsRUFIQTBCLEtBSUF0QixNQUFBSCxFQU1BLE9BZkE4QixFQUFBSixRQUFBLENBQUEsU0FBQSxPQUFBLGtCQUFBLGdCQWVBZixFQy9CQSxTQUFBb0IsNERBRUEsSUFBQXBCLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLCtCQUNBQyxTQUFBLEVBQ0FDLE1BQUEsR0FDQUMsS0FBQUMsRUFDQUMsV0FBQWMsRUFDQVosYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBS0EsU0FBQVEsRUFBQXJDLEVBQUFDLEdBRUE2QixLQUdBUSxZQUFBLENBQ0EsUUFDQSxVQUNBLFFBTkFSLEtBU0FTLE9BQUEsQ0FDQUMsTUFBQSxDQUFBLFVBQUEsV0FBQSxRQUFBLFFBQUEsTUFBQSxPQUFBLE9BQUEsU0FBQSxZQUFBLFVBQUEsV0FBQSxZQUNBQyxRQUFBLENBQUEsU0FBQSxTQUFBLFNBQUEsUUFDQUMsS0FBQSxDQUFBLE9BQUEsT0FBQSxTQVpBWixLQWVBYSxrQkFBQSxHQWZBYixLQWdCQWMsU0FBQSxHQU1BLE9BM0JBUCxFQUFBTixRQUFBLENBQUEsU0FBQSxRQTJCQWYsRUMzQ0EsU0FBQTZCLDBEQUVBLElBQUE3QixFQUFBLENBQ0FDLFNBQUEsT0FDQUMsWUFBQSw2QkFDQUMsU0FBQSxFQUNBQyxNQUFBLEdBRUFDLEtBQUFDLEVBQ0FDLFdBQUF1QixFQUNBckIsYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBTUEsU0FBQWlCLEVBQUE5QyxFQUFBQyxFQUFBRyxFQUFBQyxFQUFBQyxHQUVBLElBQUF5QyxFQUFBakIsS0FHQWlCLEVBQUF4QyxTQUFBSCxFQUNBMkMsRUFBQXZDLE1BQUFILEVBQUF3QyxpQkFDQUUsRUFBQXZDLE1BQUEsUUFBQUgsRUFBQTJDLFVBQUFDLFdBR0EzQyxFQUFBNEMsU0FBQUMsY0FDQUMsS0FBQSxTQUFBQyxHQUVBTixFQUFBTyxRQUFBRCxFQUNBckQsRUFBQXVELFdBQ0FDLE1BQUEsU0FBQUMsR0FDQTVDLFFBQUFDLElBQUEsdUJBQUEyQyxLQUtBVixFQUFBVyxVQUFBdEQsRUFBQXVELE1BRUFaLEVBQUFhLGFBQUEsS0FFQWIsRUFBQVksTUFBQXZELEVBQUF5RCxPQUdBLElBQUFDLEVBQUEsQ0FDQUMsR0FBQSxFQUNBQyxPQUFBLEdBQ0FDLGFBQUEsRUFDQUMsU0FBQSxDQUNBQyxNQUFBLENBQUFKLEdBQUEsUUFBQUssS0FBQSx1QkFBQUMsVUFBQSxFQUFBQyxRQUFBLENBQUFDLG1CQUFBLEVBQUFDLFFBQUEsSUFDQUMsTUFBQSxDQUFBVixHQUFBLFFBQUFLLEtBQUEsd0JBQUFDLFVBQUEsRUFBQUMsUUFBQSxDQUFBQyxtQkFBQSxFQUFBQyxRQUFBLElBQ0FFLE1BQUEsQ0FBQVgsR0FBQSxRQUFBSyxLQUFBLHdCQUFBQyxVQUFBLEVBQUFDLFFBQUEsQ0FBQUMsbUJBQUEsRUFBQUMsUUFBQSxJQUNBRyxNQUFBLENBQUFaLEdBQUEsUUFBQUssS0FBQSx3QkFBQUMsVUFBQSxFQUFBQyxRQUFBLENBQUFDLG1CQUFBLEVBQUFDLFFBQUEsSUFDQUksTUFBQSxDQUFBYixHQUFBLFFBQUFLLEtBQUEsa0JBQUFDLFVBQUEsRUFBQUMsUUFBQSxDQUFBQyxtQkFBQSxFQUFBQyxRQUFBLElBQ0FLLE1BQUEsQ0FBQWQsR0FBQSxRQUFBSyxLQUFBLG1CQUFBQyxVQUFBLEVBQUFDLFFBQUEsQ0FBQUMsbUJBQUEsRUFBQUMsUUFBQSxJQUNBTSxNQUFBLENBQUFmLEdBQUEsUUFBQUssS0FBQSxpQkFBQUMsVUFBQSxFQUFBQyxRQUFBLENBQUFDLG1CQUFBLEVBQUFDLFFBQUEsS0FFQU8saUJBQUEsR0FDQUMsSUFBQSxJQVFBLFNBQUFDLElBRUFsQyxFQUFBWSxNQUFBdUIsTUFBQW5DLEVBQUFXLFVBQUF5QixPQUFBcEMsRUFBQWEsYUFBQWIsRUFBQVksTUFBQXlCLFVBQ0EsR0FBQXJDLEVBQUFXLFVBQUF5QixTQUFBcEMsRUFBQVksTUFBQXVCLE1BQUFuQyxFQUFBWSxNQUFBdUIsTUFBQW5DLEVBQUFhLGNBS0FiLEVBQUFzQyxZQUFBLFdBRUEsSUFBQUMsRUFBQXZDLEVBQUFXLFVBQUF5QixPQUdBRyxFQUFBLEdBQUF2QyxFQUFBVyxVQUFBNkIsS0FBQUMsT0FBQUMsT0FBQTNCLElBR0EsR0FBQXdCLElBQUF2QyxFQUFBdkMsTUFBQWtGLGVBQUFDLFNBQUEsR0FHQSxFQUFBTCxJQUFBdkMsRUFBQXZDLE1BQUFvRixxQkFBQUQsU0FBQSxHQUdBLElBQUEsSUFBQUUsRUFBQSxFQUFBQSxHQUFBUCxFQUFBTyxJQUNBOUMsRUFBQVcsVUFBQW1DLEdBQUE5QixHQUFBOEIsRUFBQSxFQU1BWixLQUtBbEMsRUFBQStDLGtCQUFBLFdBRUEsSUFBQVIsRUFBQXZDLEVBQUFXLFVBQUF5QixPQUNBWSxFQUFBVCxFQUFBLEVBR0EsRUFBQUEsR0FBQXZDLEVBQUFXLFVBQUFzQyxPQUFBRCxFQUFBLEdBR0EsR0FBQVQsSUFBQXZDLEVBQUF2QyxNQUFBb0YscUJBQUFELFNBQUEsR0FHQTVDLEVBQUF2QyxNQUFBa0YsZUFBQUMsU0FBQSxFQUdBLEdBQUFMLElBQUF2QyxFQUFBWSxNQUFBeUIsVUFBQSxHQUVBSCxLQU1BbEMsRUFBQWtELGVBQUEsU0FBQWxDLEdBRUEsSUFDQWdDLEVBQUFoQyxFQUFBLEVBR0EsRUFKQWhCLEVBQUFXLFVBQUF5QixRQUlBcEMsRUFBQVcsVUFBQXNDLE9BQUFELEVBQUEsR0FHQSxJQUFBLElBQUFGLEVBQUEsRUFBQUEsR0FBQTlDLEVBQUFXLFVBQUF5QixPQUFBLEVBQUFVLElBQ0E5QyxFQUFBVyxVQUFBbUMsR0FBQTlCLEdBQUE4QixFQUFBLEVBR0FaLEtBSUFsQyxFQUFBbUQsaUJBQUEsYUFRQW5ELEVBQUFvRCxnQkFBQSxTQUFBQyxHQUVBLElBQUFDLEVBQUEsRUFPQSxPQUpBYixPQUFBYyxLQUFBRixHQUFBRyxRQUFBLFNBQUFDLEdBQ0FKLEVBQUFJLEdBQUFuQyxVQUFBZ0MsTUFHQUEsR0FHQXRELEVBQUEwRCxtQkFBQSxXQUNBNUYsUUFBQUMsSUFBQSwyQkFLQWlDLEVBQUEyRCxnQkFBQSxTQUFBM0MsR0FFQWhCLEVBQUFXLFVBQUFLLEdBQUFnQixpQkFBQSxHQU1BUyxPQUFBYyxLQUFBdkQsRUFBQVcsVUFBQUssR0FBQUcsVUFBQXFDLFFBQUEsU0FBQUMsR0FFQXpELEVBQUFXLFVBQUFLLEdBQUFHLFNBQUFzQyxHQUFBbkMsVUFDQXRCLEVBQUFXLFVBQUFLLEdBQUFnQixpQkFBQVEsS0FBQXhDLEVBQUFXLFVBQUFLLEdBQUFHLFNBQUFzQyxHQUFBcEMsU0FRQXJCLEVBQUFXLFVBQUE2QixLQUFBQyxPQUFBQyxPQUFBM0IsSUFFQW1CLElBR0EsT0FqTEFuQyxFQUFBZixRQUFBLENBQUEsU0FBQSxPQUFBLGtCQUFBLGVBQUEsaUJBaUxBZixFQ25NQSxTQUFBMkYsa0RBRUEsSUFBQTNGLEVBQUEsQ0FDQUMsU0FBQSxPQUNBMkYsU0FBQSxxQkFDQXpGLFNBQUEsRUFDQUMsTUFBQSxHQUNBQyxLQUFBQyxFQUNBQyxXQUFBc0YsRUFDQXBGLGFBQUEsS0FDQUMsa0JBQUEsR0FJQSxTQUFBSixFQUFBRixFQUFBTyxFQUFBQyxFQUFBQyxJQUtBLFNBQUFnRixFQUFBN0csRUFBQUMsRUFBQTZHLEdBRUFoRixLQUVBaUYsU0FBQUQsRUFPQSxPQWRBRCxFQUFBOUUsUUFBQSxDQUFBLFNBQUEsT0FBQSxlQWNBZixFQzlCQSxTQUFBZ0csNERBRUEsSUFBQWhHLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLCtCQUNBQyxTQUFBLEVBQ0FDLE1BQUEsQ0FDQTZGLFFBQUEsS0FFQTVGLEtBQUFDLEVBQ0FDLFdBQUEyRixFQUNBekYsYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBS0EsU0FBQXFGLEVBQUFsSCxFQUFBQyxFQUFBRyxFQUFBQyxHQUVBLElBQUEwQyxFQUFBakIsS0FHQWlCLEVBQUF4QyxTQUFBSCxFQUNBMkMsRUFBQXZDLE1BQUFILEVBR0EwQyxFQUFBb0UscUJBQUEsV0FDQXBFLEVBQUF2QyxNQUFBNEcsdUJBQ0FyRSxFQUFBeEMsU0FBQVEsZUFBQXNHLE9BQUF0RSxFQUFBeEMsU0FBQStHLG9CQUFBRCxPQUNBdEUsRUFBQXhDLFNBQUFRLGVBQUF3RyxJQUFBeEUsRUFBQXhDLFNBQUErRyxvQkFBQUMsSUFDQXhFLEVBQUF4QyxTQUFBUSxlQUFBeUcsS0FBQXpFLEVBQUF4QyxTQUFBK0csb0JBQUFFLEtBQ0F6RSxFQUFBeEMsU0FBQVEsZUFBQVAsTUFBQXVDLEVBQUF4QyxTQUFBK0csb0JBQUE5RyxRQU9BLE9BeEJBMEcsRUFBQW5GLFFBQUEsQ0FBQSxTQUFBLE9BQUEsa0JBQUEsZ0JBd0JBZixFQzFDQSxTQUFBeUcsc0RBRUEsSUFBQXpHLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLHlCQUNBQyxTQUFBLEVBQ0FDLE1BQUEsR0FFQUMsS0FBQUMsRUFDQUMsV0FBQW1HLEVBQ0FqRyxhQUFBLEtBQ0FDLGtCQUFBLEdBSUEsU0FBQUosRUFBQUYsRUFBQU8sRUFBQUMsRUFBQUMsSUFNQSxTQUFBNkYsRUFBQTFILEVBQUFDLEVBQUFDLEVBQUFHLEVBQUFELEVBQUF1SCxFQUFBeEgsRUFBQUcsR0FFQXdCLEtBR0F0QixNQUFBSCxFQUhBeUIsS0FJQXZCLFNBQUFILEVBSkEwQixLQUtBOEYsU0FBQUQsRUFMQTdGLEtBTUErRixPQUFBdkgsRUFzQkEsT0FqQ0FvSCxFQUFBM0YsUUFBQSxDQUFBLFNBQUEsT0FBQSxZQUFBLGVBQUEsa0JBQUEsb0JBQUEsb0JBQUEsaUJBaUNBZixFQzVDQSxTQUFBOEcsT0FBQUMsRUFBQUMsR0FDQUEsRUFBQUMsV0FBQSxJQUNBRixFQUVBRyxLQUFBLElBQUEsQ0FDQWhILFlBQUEsdUJBQ0FLLFdBQUEsaUJBQ0FFLGFBQUEsT0FFQXlHLEtBQUEsNkJBQUEsQ0FDQWhILFlBQUEsb0JBQ0FLLFdBQUEsb0JBQ0FFLGFBQUEsT0FFQTBHLFVBQUEsQ0FDQUMsV0FBQSxNQ25CQSxTQUFBQyx1QkFNQSxNQUpBLEdDRkEsU0FBQUMsYUFBQUMsR0FFQSxJQUFBQyxFQUFBLENBQ0FDLFVBQUEsRUFDQUMsVUFBQSxFQUNBQyxXQUFBLEVBQ0F6SCxZQUFBLHNCQUdBMEgsRUFBQSxDQUNBQyxnQkFBQSxRQUNBQyxpQkFBQSxLQUNBQyxXQUFBLFdBQ0FDLFNBQUEsd0JBR0FsSCxLQUFBbUgsVUFBQSxTQUFBQyxFQUFBQyxHQUdBLE9BRkFELElBQUFBLEVBQUEsSUFDQUEsRUFBQVQsU0FBQSxTQUNBM0csS0FBQXNILEtBQUFGLEVBQUFDLElBR0FySCxLQUFBc0gsS0FBQSxTQUFBRixFQUFBQyxHQUVBLElBQUFFLEVBQUEsR0FDQUMsRUFBQSxHQW9CQSxPQWpCQXpKLFFBQUEwSixPQUFBRixFQUFBYixFQUFBVSxHQUdBckosUUFBQTBKLE9BQUFELEVBQUFWLEVBQUFPLEdBRUFFLEVBQUE5SCxhQUNBOEgsRUFBQTlILFdBQUEsU0FBQXZCLEVBQUF3SixHQUNBeEosRUFBQTRJLGFBQUFVLEVBQ0F0SixFQUFBNEksYUFBQWEsR0FBQSxTQUFBQyxHQUNBRixFQUFBRyxNQUFBRCxJQUVBMUosRUFBQTRJLGFBQUFlLE1BQUEsU0FBQUQsR0FDQUYsRUFBQUksUUFBQSxhQUtBQyxPQUFBQyxLQUFBVCxHQUFBSyxRQzdDQSxTQUFBSyxjQUFBQyxHQThFQSxNQTVFQSxDQUNBQyxXQVFBLFNBQUFDLEVBQUFDLEdBSUEsT0FBQSxJQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBRUFOLEVBQUEsQ0FDQU8sT0FBQSxPQUNBTCxJQUFBQSxFQUNBTSxRQUFBLENBQ0FDLGVBQUEsb0JBRUFOLEtBQUFBLElBQ0EvRyxLQUFBLFNBQUFzSCxHQUVBN0osUUFBQUMsSUFBQSxvQkFBQTRKLEdBQ0FMLEVBQUFLLEVBQUFQLE9BRUEsU0FBQVEsR0FDQUwsRUFBQUssUUExQkFDLElBQUEsQ0FDQUMsU0ErQkEsV0FPQSxPQUFBLElBQUFULFFBQUEsU0FBQUMsRUFBQUMsR0FFQU4sRUFBQSxDQUNBTyxPQUFBLE1BQ0FMLElBQUEsa0JBQ0E5RyxLQUFBLFNBQUFzSCxHQUVBN0osUUFBQUMsSUFBQSxvQkFBQTRKLEdBQ0FMLEVBQUFLLEVBQUFQLE9BRUEsU0FBQVEsR0FDQUwsRUFBQUssUUFoREFHLGFBcURBLFdBR0EsT0FBQSxJQUFBVixRQUFBLFNBQUFDLEVBQUFDLEdBRUFOLEVBQUEsQ0FDQU8sT0FBQSxNQUNBTCxJQUFBLHFCQUNBOUcsS0FBQSxTQUFBc0gsR0FFQTdKLFFBQUFDLElBQUEsb0JBQUE0SixHQUNBTCxFQUFBSyxFQUFBUCxPQUVBLFNBQUFRLEdBQ0FMLEVBQUFLLFVDekVBLFNBQUFySyxjQUFBeUssRUFBQTdLLEVBQUE2SixFQUFBM0osR0FFQSxJQUFBMkMsRUFBQWpCLEtBWUEsU0FBQWtKLEVBQUFDLEdBR0E3SyxFQUFBOEssS0FBQUQsTUFBQUEsRUFHQWxCLEVBQUFFLFdBSkEsbUJBSUE3SixHQUNBZ0QsS0FBQSxTQUFBQyxHQUVBLElBQUE4SCxFQUFBLFlBQUE5SCxFQUFBOEcsS0FHQXRKLFFBQUFDLElBQUEscUJBQUFxSyxHQUdBakwsRUFBQWtMLEtBQUFELEdBQ0FKLEVBQUF4SCxXQUVBQyxNQUFBLFNBQUFDLEdBQ0E1QyxRQUFBQyxJQUFBLFNBQUEyQyxLQXVJQSxNQXBLQSxDQUNBdUgscUJBQUFBLEVBQ0FLLFdBZ0NBLFdBQ0F4SyxRQUFBQyxJQUFBLG1CQUNBaUMsRUFBQXVJLFlBQUFDLG9CQWpDQXJJLFNBQUEsQ0FDQUMsWUFtQ0EsV0FFQSxPQUFBLElBQUFpSCxRQUFBLFNBQUFDLEVBQUFDLEdBRUFQLEVBQUFhLElBQUFFLGVBQ0ExSCxLQUFBLFNBQUFDLEdBQ0FnSCxFQUFBaEgsS0FDQUcsTUFBQSxTQUFBQyxHQUNBNkcsRUFBQTdHLFNBekNBaEQsS0FnREEsV0FHQXNKLEVBQUFhLElBQUFDLFdBQ0F6SCxLQUFBLFNBQUFvSSxHQUVBekksRUFBQXVJLFlBQUEsSUFBQUcsY0FBQSxDQUNBQyxjQUFBRixFQUFBekgsR0FDQTRILFdBQUEsV0FDQUMsWUFBQSxDQUNBLENBQ0FDLFNBQUEsT0FDQUMsUUFBQSxXQUNBQyxnQkFBQSxnQkFHQUMsV0FBQSxDQUNBQyxVQUFBLGlCQUNBQyxZQUFBLHVCQUVBQyxJQUFBLENBQ0FGLFVBQUEsU0FDQUMsWUFBQSxPQUVBRSxlQUFBLENBQ0FILFVBQUEscUJBQ0FDLFlBQUEsU0FFQUcsV0FBQSxDQUNBSixVQUFBLGtCQUVBSyxVQUFBLENBSUFDLDBCQUFBLFNBQUFDLEVBQUF2QixFQUFBd0IsR0FDQUQsR0FDQTNMLFFBQUFDLElBQUEsc0JBQUEwTCxHQUNBekosRUFBQTJKLFlBQUFGLEVBQ0F6SixFQUFBNEosY0FBQSxJQUtBNUosRUFBQTJKLFlBQUEsR0FLQTFCLEVBQUFDLEtBaUJBMkIsMkJBQUEsYUFNQUMsbUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsV0FzQkFDLGtCQUFBLGdCQVFBakssRUFBQXVJLFlBQUEyQixVQUNBekosTUFBQSxTQUFBbUgsR0FDQTlKLFFBQUFDLElBQUE2SixPQ25LQSxTQUFBdEssYUFBQUQsR0E4R0EsTUE1R0EsQ0FDQWdILHNCQUFBLEVBQ0F2RSxpQkFBQSxDQUNBNkMsZUFBQSxDQUNBcEIsUUFBQSxDQUNBNEksS0FBQSxFQUNBQyxlQUFBLEVBQ0FDLGVBQUEsR0FFQXpILFNBQUEsR0FFQUMscUJBQUEsQ0FDQXRCLFFBQUEsQ0FDQTRJLEtBQUEsRUFDQUMsZUFBQSxFQUNBQyxlQUFBLEVBQ0FDLGNBQUEsR0FFQTFILFNBQUEsR0FFQTJILFlBQUEsQ0FDQUMsTUFBQSxrQkFHQUMsWUFBQSxDQUNBQyxVQUFBLENBQ0FuSixRQUFBLENBQ0FvSixnQkFBQSxFQUNBQyxZQUFBLEVBQ0FDLGNBQUEsR0FFQUMsV0FBQSxFQUNBQyxTQUFBLEVBQ0FDLFdBQUEsSUFHQS9LLFVBQUEsQ0FDQUMsWUFBQSxFQUNBK0ssWUFBQSxHQUVBQyxrQkFBQSxDQUNBcEwsa0JBQUEsRUFDQXFMLHVCQUFBLEVBQ0FWLGFBQUEsRUFDQVEsWUFBQSxHQUVBRyxrQkFBQSxDQUNBdEwsa0JBQUEsRUFDQXFMLHVCQUFBLEVBQ0FWLGFBQUEsRUFDQVEsWUFBQSxHQUVBSSxlQUFBLENBQ0F2TCxpQkFBQSxDQUNBd0wsV0FBQSxFQUNBQyxlQUFBLEdBRUFKLHNCQUFBLENBQ0FHLFdBQUEsRUFDQUMsZUFBQSxHQUVBZCxZQUFBLENBQ0FhLFdBQUEsRUFDQUMsZUFBQSxHQUVBTixXQUFBLENBQ0FLLFdBQUEsRUFDQUMsZUFBQSxJQUdBQyxpQkFpQkEsV0FFQSxJQUFBeEwsRUFBQWpCLEtBQ0EwTSxHQUFBLEVBR0FoSixPQUFBYyxLQUFBdkQsRUFBQW9MLG1CQUFBNUgsUUFBQSxTQUFBQyxHQUNBLEdBQUF6RCxFQUFBb0wsa0JBQUEzSCxLQUFBZ0ksR0FBQSxLQU1BekwsRUFBQTBMLGNBQUEsaUJBSEFELEdBQ0FFLG9CQUFBLEVBQ0EzTCxFQUFBMEwsY0FBQSxnQkFBQSxHQUNBLElBRUFDLG9CQUFBLEVBQ0EzTCxFQUFBMEwsY0FBQSxnQkFBQSxHQUNBLElBakNBQyxvQkFBQSxFQUNBRCxjQUFBLENBQ0F2QixLQUFBLEVBQ0F5QixhQUFBLEVBQ0F4QixlQUFBLEVBQ0F5QixpQkFBQSxJQzlFQSxTQUFBek8sa0JBQUE2SixHQUVBbEksS0FFQStNLE9BQUEsU0FBQXRPLEdBRUEsT0FBQSxJQUFBNkosUUFBQSxTQUFBQyxFQUFBQyxHQUVBTixFQUFBLENBQ0FPLE9BQUEsT0FDQUwsSUFBQSx1Q0FDQU0sUUFBQSxDQUNBQyxlQUFBLG9CQUVBTixLQUFBNUosSUFDQTZDLEtBQUEsU0FBQXNILEdBRUE3SixRQUFBQyxJQUFBLG9CQUFBNEosR0FDQUwsRUFBQUssSUFFQSxTQUFBQyxHQUNBTCxFQUFBSyxRQ3JCQSxTQUFBdkssa0JBMkNBLE1BekNBLENBQ0FnRSxLQUFBLENBQ0EwSyxNQUFBLEdBQ0FDLEtBQUEsSUFFQUMsUUFBQSxDQUNBQyxNQUFBLEdBQ0FDLE1BQUEsSUFFQTVILG9CQUFBLENBQ0FELE9BQUEsR0FDQUcsS0FBQSxHQUNBaEgsTUFBQSxHQUNBK0csSUFBQSxJQUVBeEcsZUFBQSxDQUNBc0csT0FBQSxHQUNBRyxLQUFBLEdBQ0FoSCxNQUFBLEdBQ0ErRyxJQUFBLElBRUEyRCxLQUFBLENBS0FELE1BQUEsR0FDQWtFLE1BQUEsR0FDQUMsS0FBQSxJQUVBQyxRQUFBLEdBQ0FDLFVBQUEsR0FDQTNMLE1BQUEsR0FDQUUsT0FBQSxDQUNBdUIsVUFBQSxFQUNBbUssU0FBQSxFQUNBckssTUFBQSxHQUVBc0ssZUFBQSxHQ3hDQSxTQUFBN0gsa0JBQUF0SCxFQUFBRCxHQXlCQSxNQXZCQSxDQUNBcVAsYUFHQSxXQUNBNU8sUUFBQUMsSUFBQSxtQ0FFQVQsRUFBQTROLGtCQUFBRCxZQUFBLEVBR0EzTixFQUFBOE4sa0JBQUFILFdBQUE1TixFQUFBb1AsY0FHQW5QLEVBQUE4TixrQkFBQUgsWUFDQTNOLEVBQUErTixlQUFBSixXQUFBSyxXQUFBLEVBQ0FoTyxFQUFBK04sZUFBQUosV0FBQU0sZUFBQSxJQUVBak8sRUFBQStOLGVBQUFKLFdBQUFLLFdBQUEsRUFDQWhPLEVBQUErTixlQUFBSixXQUFBTSxlQUFBLEtDcEJBLFNBQUF4SCxjQUVBaEYsS0FPQTROLFdBQUEsU0FBQXZGLEdBRUFBLEVBQUF3RixVQUNBOU8sUUFBQUMsSUFBQXFKLEVBQUF3RixXQUVBLFNBQUF4RixJQUdBeUYsVUFBQUMsS0FBQSxzQkFBQUMsSUFBQTNGLEVBQUEzQyxNQUNBb0ksVUFBQUMsS0FBQSx1QkFBQUMsSUFBQTNGLEVBQUEzSixTQWhCQXNCLEtBcUJBaU8sU0FBQSxTQUFBQyxHQUNBLElBQUFDLEVBQUFELEVBQUFFLFVBQUEsRUFBQSxHQUVBLEdBQUFELEVBQUE5SyxRQUFBLFdBQUFnTCxLQUFBRixJQUVBcFAsUUFBQUMsSUFBQSxlQUFBbVAsSW5CbENBcFEsUUFBQUMsT0FBQSxTQUFBeUIsV0FBQSxpQkFBQXhCLGdCQUVBQSxlQUFBZ0MsUUFBQSxDQUFBLFNBQUEsT0FBQSxZQUFBLG9CQUFBLGtCQUFBLGVBQUEsaUJDRkFsQyxRQUFBQyxPQUFBLFNBQUF5QixXQUFBLG9CQUFBYixtQkFFQUEsa0JBQUFxQixRQUFBLENBQUEsU0FBQSxPQUFBLGdCQ0ZBbEMsUUFBQUMsT0FBQSxTQUFBa0IsVUFBQSxpQkFBQUQsZ0JDQUFsQixRQUFBQyxPQUFBLFNBQUFrQixVQUFBLGVBQUFnQixjQ0FBbkMsUUFBQUMsT0FBQSxTQUFBa0IsVUFBQSxlQUFBa0IsY0NBQXJDLFFBQUFDLE9BQUEsU0FBQWtCLFVBQUEscUJBQUFvQixvQkNBQXZDLFFBQUFDLE9BQUEsU0FBQWtCLFVBQUEsbUJBQUE2QixrQkNBQWhELFFBQUFDLE9BQUEsU0FBQWtCLFVBQUEsV0FBQTJGLFVDQUE5RyxRQUFBQyxPQUFBLFNBQUFrQixVQUFBLHFCQUFBZ0csb0JDQUFuSCxRQUFBQyxPQUFBLFNBQUFrQixVQUFBLGVBQUF5RyxjQ0tBNUgsUUFDQUMsT0FBQSxTQUNBZ0ksT0FBQUEsUUNQQWpJLFFBQUFDLE9BQUEsU0FBQXNRLFFBQUEsdUJBQUEvSCxzQkFHQUEscUJBQUF0RyxRQUFBLEdDSEFsQyxRQUFBQyxPQUFBLFNBQUFzUSxRQUFBLGVBQUE5SCxjQUdBQSxhQUFBdkcsUUFBQSxDQUFBLGFDSEFsQyxRQUFBQyxPQUFBLFNBQUFzUSxRQUFBLGdCQUFBckcsZUFHQUEsY0FBQWhJLFFBQUEsQ0FBQSxTQ0hBbEMsUUFBQUMsT0FBQSxTQUFBc1EsUUFBQSxnQkFBQTlQLGVBR0FBLGNBQUF5QixRQUFBLENBQUEsYUFBQSxZQUFBLGdCQUFBLG1CQ0hBbEMsUUFBQUMsT0FBQSxTQUFBc1EsUUFBQSxlQUFBL1AsY0FHQUEsYUFBQTBCLFFBQUEsQ0FBQSxtQkNIQWxDLFFBQUFDLE9BQUEsU0FBQXNRLFFBQUEsb0JBQUFqUSxtQkFHQUEsa0JBQUE0QixRQUFBLENBQUEsU0NIQWxDLFFBQUFDLE9BQUEsU0FBQXNRLFFBQUEsa0JBQUFoUSxpQkFHQUEsZ0JBQUEyQixRQUFBLEdDSEFsQyxRQUFBQyxPQUFBLFNBQUFzUSxRQUFBLG9CQUFBekksbUJBR0FBLGtCQUFBNUYsUUFBQSxDQUFBLGVBQUEsbUJDSEFsQyxRQUFBQyxPQUFBLFNBQUFzUSxRQUFBLGNBQUF0SixhQUdBQSxZQUFBL0UsUUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2RlZmluZSB0aGUgbW9kdWxlXG5cbnZhciBhaE51dHMgPSBhbmd1bGFyLm1vZHVsZSgnYW5zdWInLCBbJ25nUm91dGUnLCAndWkuYm9vdHN0cmFwJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmNvbnRyb2xsZXIoJ21haW5Db250cm9sbGVyJywgbWFpbkNvbnRyb2xsZXIpO1xuXG5cdG1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnJGxvY2F0aW9uJywgJ3N1Ym1pc3Npb25TZXJ2aWNlJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnLCAnc3F1YXJlU2VydmljZSddO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBtYWluQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgc3VibWlzc2lvblNlcnZpY2UsIHVzZXJEYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlLCBzcXVhcmVTZXJ2aWNlKSB7XG5cdFx0Ly9ub3RpZnkgcHJvZ3Jlc3NcblxuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdC8vZGVmaW5lIHVzZXJkYXRhIG1vZGVsIHZhcmlhYmxlXG5cdFx0JHNjb3BlLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdCRzY29wZS5zdGF0ZSA9IHN0YXRlU2VydmljZTtcblxuXHRcdHNxdWFyZVNlcnZpY2UuaW5pdCgpO1xuXHRcdFxuXHRcdC8qdmFyIHJlY2lwaWFudFByb2ZpbGUgPSB7XG5cdFx0XHRuYW1lOiB7XG5cdFx0XHRcdGZpcnN0OiBcIlwiLFxuXHRcdFx0XHRsYXN0OiBcIlwiXG5cdFx0XHR9LFxuXHRcdFx0YWRkcmVzczoge1xuXHRcdFx0XHRzdHJlZXQxOiBcIlwiLFxuXHRcdFx0XHRzdHJlZXQyOiBcIlwiLFxuXHRcdFx0XHRzdHJlZXQzOiBcIlwiLFxuXHRcdFx0XHRjaXR5OiBcIlwiLFxuXHRcdFx0XHRzdGF0ZTogXCJcIixcblx0XHRcdFx0emlwOiBcIlwiXG5cdFx0XHR9LFxuXHRcdFx0Y29udGFjdDoge30sXG5cdFx0XHRyZWxhdGlvbnNoaXA6IFwiXCJcblx0XHR9O1xuXG5cdFx0dmFyIHNoaXBwaW5nU2NoZWR1bGVzID0ge1xuXHRcdFx0XCJ5ZWFybHlcIjogW1xuXHRcdFx0XHR7IGlkOiAxLCBuYW1lOiBcIlRyZWF0XCIsIHNoaXBEYXk6IFwiXCIsIGJpbGxEYXk6IFwiXCIgfVxuXHRcdFx0XSxcblx0XHRcdFwicXVhcnRlcmx5XCI6IFtcblx0XHRcdFx0eyBpZDogMSwgbmFtZTogXCJXaW50ZXJcIiwgc2hpcERheTogXCJcIiwgYmlsbERheTogXCJcIiB9LFxuXHRcdFx0XHR7IGlkOiAyLCBuYW1lOiBcIlNwcmluZ1wiLCBzaGlwRGF5OiBcIlwiLCBiaWxsRGF5OiBcIlwiIH0sXG5cdFx0XHRcdHsgaWQ6IDMsIG5hbWU6IFwiU3VtbWVyXCIsIHNoaXBEYXk6IFwiXCIsIGJpbGxEYXk6IFwiXCIgfSxcblx0XHRcdFx0eyBpZDogNCwgbmFtZTogXCJGYWxsXCIsIHNoaXBEYXk6IFwiXCIsIGJpbGxEYXk6IFwiXCIgfVxuXHRcdFx0XSxcblx0XHRcdFwibW9udGhseVwiOiBbXG5cdFx0XHRcdHsgaWQ6IDEsIG5hbWU6IFwiSmFudWFyeVwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDIsIG5hbWU6IFwiRmVicnVhcnlcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAzLCBuYW1lOiBcIk1hcmNoXCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogNCwgbmFtZTogXCJBcHJpbFwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDUsIG5hbWU6IFwiTWF5XCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogNiwgbmFtZTogXCJKdW5lXCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogNywgbmFtZTogXCJKdWx5XCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfSxcblx0XHRcdFx0eyBpZDogOCwgbmFtZTogXCJBdWd1c3RcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiA5LCBuYW1lOiBcIlNlcHRlbWJlclwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDEwLCBuYW1lOiBcIk9jdG9iZXJcIiwgc2hpcERheTogXCIzcmRcIiwgYmlsbERheTogXCIxc3RcIiB9LFxuXHRcdFx0XHR7IGlkOiAxMSwgbmFtZTogXCJOb3ZlbWJlclwiLCBzaGlwRGF5OiBcIjNyZFwiLCBiaWxsRGF5OiBcIjFzdFwiIH0sXG5cdFx0XHRcdHsgaWQ6IDEyLCBuYW1lOiBcIkRlY2VtYmVyXCIsIHNoaXBEYXk6IFwiM3JkXCIsIGJpbGxEYXk6IFwiMXN0XCIgfVxuXHRcdFx0XSxcblx0XHRcdFwid2Vla2x5XCI6IHdlZWtseUdlbmVyYXRvcigpXG5cblx0XHR9XG5cdFx0XG5cdFx0dmFyIHNoaXBwaW5nT2NjdXJhbmNlID0ge1xuXHRcdFx0aWQ6IDAsXG5cdFx0XHRuYW1lOiBcIlwiLFxuXHRcdFx0ZGF0ZTogXCJcIlxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB3ZWVrbHlHZW5lcmF0b3IoKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhbGxXZWVrcyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGkgPSAxOyBpIDw9IDUyOyBpKyspIHtcblx0XHRcdFx0dmFyIHdlZWtOYW1lID0gXCJXZWVrIFwiICsgaTtcblx0XHRcdFx0YWxsV2Vla3MucHVzaCh7IGlkOiBpLCBuYW1lOiB3ZWVrTmFtZSwgc2hpcERheTogXCJUdWVzZGF5XCIsIGJpbGxEYXk6IFwiRnJpZGF5XCIgfSk7XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4gYWxsV2Vla3M7XG5cdFx0fTsqL1xuXG5cdFx0Ly9kZWZpbmUgZmxhdm9yIHZhcmlhYmxlc1xuXHRcdC8qJHNjb3BlLmZsYXZvcnM9IFtcblx0XHRcdHsgbmFtZTogJ1NlY3JldCBSZWNpcGUgUGVjYW5zJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdTZWNyZXQgUmVjaXBlIEFsbW9uZHMnLCBkZXNjcmlwdGlvbjogXCIgXCIgfSxcblx0XHRcdHsgbmFtZTogJ1NlY3JldCBSZWNpcGUgQ2FzaGV3cycsIGRlc2NyaXB0aW9uOiBcIiBcIiB9LFxuXHRcdFx0eyBuYW1lOiAnU2VjcmV0IFJlY2lwZSBQZWFudXRzJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdDaW5uYW1vbiBQZWNhbnMnLCBkZXNjcmlwdGlvbjogXCIgXCIgfSxcblx0XHRcdHsgbmFtZTogJ0Npbm5hbW9uIEFsbW9uZHMnLCBkZXNjcmlwdGlvbjogXCIgXCIgfSxcblx0XHRcdHsgbmFtZTogJ0RydW5rZW4gUGVjYW5zJywgZGVzY3JpcHRpb246IFwiIFwiIH0sXG5cdFx0XHR7IG5hbWU6ICdNaXgtSXQtVXAnLCBkZXNjcmlwdGlvbjogXCIgXCIgfVxuXHRcdF07XG5cblx0XHQkc2NvcGUub3JkZXJTY2hlZHVsZSA9IFtcblx0XHRcdHsgaWQ6IDEgfVxuXHRcdF07Ki9cblxuXHRcdFxuXG5cdFx0Ly9kZWZpbmUgc3RhdGUgdmFyaWFibGVzXG5cdFx0Lyokc2NvcGUuc3RhdGUgPSB7XG5cdFx0XHR0ZW1wUmVjaXBpYW50OiB7XG5cdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRmaXJzdDogXCJcIixcblx0XHRcdFx0XHRsYXN0OiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0XHRzdHJlZXQxOiBcIlwiLFxuXHRcdFx0XHRcdHN0cmVldDI6IFwiXCIsXG5cdFx0XHRcdFx0c3RyZWV0MzogXCJcIixcblx0XHRcdFx0XHRjaXR5OiBcIlwiLFxuXHRcdFx0XHRcdHN0YXRlOiBcIlwiLFxuXHRcdFx0XHRcdHppcDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjb250YWN0OiB7XG5cdFx0XHRcdFx0ZW1haWw6IFwiXCIsXG5cdFx0XHRcdFx0cGhvbmU6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0cmVsYXRpb25zaGlwOiBcIlwiXG5cdFx0XHR9LFxuXHRcdFx0b3JkZXI6IHtcblx0XHRcdFx0cXR5OiBcIjFcIixcblx0XHRcdFx0dmlzaWJpbGl0eToge1xuXHRcdFx0XHRcdG9uZTogdHJ1ZSxcblx0XHRcdFx0XHR0d286IGZhbHNlLFxuXHRcdFx0XHRcdHRocmVlOiBmYWxzZSxcblx0XHRcdFx0XHRmb3VyOiBmYWxzZSxcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGZyZXF1ZW5jeToge1xuXHRcdFx0XHR2YWx1ZTogJ21vbnRobHknXG5cdFx0XHR9LFxuXHRcdFx0c2hpcHBpbmdEZXN0aW5hdGlvbnM6IFwiMVwiLFxuXHRcdFx0cmVjaXBpZW50c0JveDogXCIxXCIsXG5cdFx0XHRyZWNpcGlhbnRTZWxlY3RlZDoge1xuXHRcdFx0XHRzdGF0ZTogZmFsc2UsXG5cdFx0XHRcdGlkOiBcIlwiXG5cdFx0XHR9LFxuXHRcdFx0c3ViVHlwZToge30sXG5cdFx0XHRzZWxlY3RlZFJlY2lwaWFudDogMCxcblx0XHRcdGVycm9yczoge1xuXHRcdFx0XHRtaXNzaW5nUmVxdWlyZWQ6IGZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0JHNjb3BlLnN0YXRlVGVzdCA9IHN0YXRlU2VydmljZVxuXG5cdFx0Ly9sb2NhbCBmdW5jdGlvbnNcblx0XHRmdW5jdGlvbiBhZGRUb1JlY2lwaWFudExpc3QocmVsYXRpb25zaGlwKSB7XG5cdFx0XHRcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIG5ld1JlY2lwaWFudCA9IE9iamVjdC5jcmVhdGUocmVjaXBpYW50UHJvZmlsZSk7XG5cdFx0XHR2YXIgZXhpc3RzQWxyZWFkeSA9IGZhbHNlO1xuXHRcdFx0dmFyIGVudHJ5SW5kZXggPSAwO1xuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHQvLzEuIGNoZWNrIGZvciB0aGUgcmVsYXRpb25zaGlwXG5cdFx0XHQkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHJlY2lwaWFudCkge1xuXHRcdFx0XHRpZihyZWNpcGlhbnQucmVsYXRpb25zaGlwID09IHJlbGF0aW9uc2hpcCkge1xuXHRcdFx0XHRcdGV4aXN0c0FscmVhZHkgPSB0cnVlO1xuXHRcdFx0XHRcdGVudHJ5SW5kZXggPSBpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRpKys7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnYWRkaW5nJywgcmVsYXRpb25zaGlwLCAndG8gcmVjaXBpYW50IGxpc3QnLCAkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdCwgXCJhbHJlYWR5IEV4aXN0cz9cIiwgZXhpc3RzQWxyZWFkeSk7XG5cblx0XHRcdC8vaWYgcmVsYXRpb25zaGlwIGRvZXNuJ3QgZXhpc3QgeWV0LCBhZGQgaXRcblx0XHRcdGlmKCFleGlzdHNBbHJlYWR5KSB7XG5cdFx0XHRcdG5ld1JlY2lwaWFudC5yZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXA7XG5cdFx0XHRcdCRzY29wZS51c2VyRGF0YS5yZWNpcGlhbnRMaXN0LnB1c2gobmV3UmVjaXBpYW50KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9yZXR1cm4gcmVzdWx0XG5cdFx0XHRyZXR1cm4gZW50cnlJbmRleDtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlRnJvbVJlY2lwaWFudExpc3QocmVsYXRpb25zaGlwKSB7XG5cdFx0XHRcblx0XHRcdC8vY29uc29sZS5sb2coJ3JlbW92aW5nJywgcmVsYXRpb25zaGlwLCAndG8gcmVjaXBpYW50IGxpc3QnKTtcblxuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibHNcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Ly9pdGVyYXRlIHRocm91Z2ggYXJyYXlcblx0XHRcdCRzY29wZS51c2VyRGF0YS5yZWNpcGlhbnRMaXN0LmZvckVhY2goZnVuY3Rpb24ocmVjaXBpYW50KSB7XG5cdFx0XHRcdGlmKHJlY2lwaWFudC5yZWxhdGlvbnNoaXAgPT0gcmVsYXRpb25zaGlwKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3Quc3BsaWNlKGksIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGkrKztcblx0XHRcdH0pO1xuXG5cdFx0XHQvL3JldHVybiByZXN1bHRcblx0XHRcdHJldHVybiAwO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzZWxlY3RSZWNpcGlhbnQoaW5kZXgpIHtcblxuXHRcdFx0JHNjb3BlLnN0YXRlLnNlbGVjdGVkUmVjaXBpYW50ID0gaW5kZXg7XG5cdFx0fTtcblxuXHRcdC8vdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0XHQvL1VQREFURSBPUkRFUiBWSVNJQklMSVRZXG5cdFx0JHNjb3BlLnVwZGF0ZU9yZGVyVmlzaWJsaXR5ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGVzXG5cdFx0XHR2YXIgaGFzaCA9IHtcIm9uZVwiOiAxLCBcInR3b1wiOiAyLCBcInRocmVlXCI6IDMsIFwiZm91clwiOiA0fTtcblx0XHRcdFx0XG5cdFx0XHQvL2l0ZXJhdGUgdGhyb3VnaCB2YWx1ZXNcblx0XHRcdE9iamVjdC5rZXlzKCRzY29wZS5zdGF0ZS5vcmRlci52aXNpYmlsaXR5KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRpZihoYXNoW2tleV0gPD0gdmFsdWUpICRzY29wZS5zdGF0ZS5vcmRlci52aXNpYmlsaXR5W2tleV0gPSB0cnVlXG5cdFx0XHRcdFx0ZWxzZSAkc2NvcGUuc3RhdGUub3JkZXIudmlzaWJpbGl0eVtrZXldID0gZmFsc2Vcblx0XHRcdH0pO1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdjaGVja2luZyB2YWx1ZXMnLCB2YWx1ZSwgJHNjb3BlLnN0YXRlLm9yZGVyLnZpc2liaWxpdHkpO1xuXHRcdFx0XG5cdFx0fTtcblxuXHRcdC8vVVBEQVRFIEZSRVFVRU5DWVxuXHRcdCRzY29wZS51cGRhdGVGcmVxdWVuY3kgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0JHNjb3BlLnVzZXJEYXRhLnNoaXBwaW5nU2NoZWR1bGUgPSBzaGlwcGluZ1NjaGVkdWxlc1t2YWx1ZV07XG5cdFx0fTtcblxuXHRcdC8vVVBEQVRFIE9SREVSIFNDSEVEVUxFXG5cdFx0JHNjb3BlLnVwZGF0ZU9yZGVyU2NoZWR1bGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0fVxuXG5cdFx0Ly9VUERBVEUgVEhFIFNVQlNDUklQVElPTiBUWVBFXG5cdFx0JHNjb3BlLnVwZGF0ZVN1YlR5cGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgdXBkYXRlSW5kZXggPSAwO1xuXHRcdFx0JHNjb3BlLnVzZXJEYXRhLnN1YlR5cGUgPSB2YWx1ZTtcblxuXHRcdFx0aWYodmFsdWU9PVwibXlzZWxmXCIpIHtcblx0XHRcdFx0Ly8kc2NvcGUuc3RhdGUucmVjaXBpZW50c0JveCA9IFwiMTBcIjtcblx0XHRcdFx0YWRkVG9SZWNpcGlhbnRMaXN0KFwiTXlzZWxmXCIpO1xuXHRcdFx0XHRyZW1vdmVGcm9tUmVjaXBpYW50TGlzdChcIlNvbWVvbmVcIik7XG5cdFx0XHRcdHNlbGVjdFJlY2lwaWFudCgwKTtcblx0XHRcdH0gZWxzZSBpZih2YWx1ZT09XCJvdGhlcnNcIikge1xuXHRcdFx0XHQvLyRzY29wZS5zdGF0ZS5yZWNpcGllbnRzQm94ID0gXCIxMFwiO1xuXHRcdFx0XHR1cGRhdGVJbmRleCA9IGFkZFRvUmVjaXBpYW50TGlzdChcIlNvbWVvbmVcIik7XG5cdFx0XHRcdHJlbW92ZUZyb21SZWNpcGlhbnRMaXN0KFwiTXlzZWxmXCIpO1xuXHRcdFx0XHRzZWxlY3RSZWNpcGlhbnQoMCk7XG5cdFx0XHR9IGVsc2UgaWYodmFsdWU9PVwiYm90aFwiKSB7XG5cdFx0XHRcdC8vJHNjb3BlLnN0YXRlLnJlY2lwaWVudHNCb3ggPSBcIjEwXCI7XG5cdFx0XHRcdHVwZGF0ZUluZGV4ID0gYWRkVG9SZWNpcGlhbnRMaXN0KFwiTXlzZWxmXCIpO1xuXHRcdFx0XHRhZGRUb1JlY2lwaWFudExpc3QoXCJTb21lb25lXCIpO1xuXHRcdFx0XHRzZWxlY3RSZWNpcGlhbnQoMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5zZWxlY3RSZWNpcGlhbnQgPSBmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0c2VsZWN0UmVjaXBpYW50KGluZGV4KTtcblx0XHRcdCRzY29wZS5zdGF0ZS50ZW1wUmVjaXBpYW50ID0gJHNjb3BlLnVzZXJEYXRhLnJlY2lwaWFudExpc3RbaW5kZXhdO1xuXHRcdH07XG5cblx0XHQkc2NvcGUudXBkYXRlUmVjaXBpYW50VmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaW5kZXggPSAkc2NvcGUuc3RhdGUuc2VsZWN0ZWRSZWNpcGlhbnQ7XG5cdFx0XHQkc2NvcGUudXNlckRhdGEucmVjaXBpYW50TGlzdFtpbmRleF0gPSAkc2NvcGUuc3RhdGUudGVtcFJlY2lwaWFudDtcblx0XHR9OyovXG5cdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuY29udHJvbGxlcignc3VjY2Vzc0NvbnRyb2xsZXInLCBzdWNjZXNzQ29udHJvbGxlcik7XG5cbnN1Y2Nlc3NDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnJHJvdXRlUGFyYW1zJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc3VjY2Vzc0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkcm91dGVQYXJhbXMpIHtcblx0XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyYWlibGVzXG5cdCRzY29wZS5jb25maXJtYXRpb25Db2RlID0gJHJvdXRlUGFyYW1zLmNvbmZpcm1hdGlvbkNvZGU7XG5cblx0Ly9ub3RpZnkgcHJvZ3Jlc3Ncblx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgY29udHJvbGVyJywgJHJvdXRlUGFyYW1zLmNvbmZpcm1hdGlvbkNvZGUsICRzY29wZS5jb25maXJtYXRpb25Db2RlKTtcbn07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdiaWxsaW5nQWRkcmVzcycsIGJpbGxpbmdBZGRyZXNzKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gYmlsbGluZ0FkZHJlc3MoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2JpbGxpbmdBZGRyZXNzLmh0bScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBiaWxsaW5nQWRkcmVzc0NvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblx0XHRcblx0XHRiaWxsaW5nQWRkcmVzc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndXNlckRhdGFTZXJ2aWNlJywgJ3N0YXRlU2VydmljZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gYmlsbGluZ0FkZHJlc3NDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdXNlckRhdGFTZXJ2aWNlLCBzdGF0ZVNlcnZpY2UpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3bW9kZWwgdmFsdWVzXG5cdFx0XHRzZWxmLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0c2VsZi5zdGF0ZSA9IHN0YXRlU2VydmljZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gYmlsbGluZyBBRGRyZXNzIGNvbnRyb2xsZXInLCBzZWxmLnN0YXRlLnNoaXBpbmdTYW1lQXNCaWxsaW5nKTtcblxuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ2JpbGxpbmdJbnB1dCcsIGJpbGxpbmdJbnB1dCk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGJpbGxpbmdJbnB1dCgpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvYmlsbGluZ0lucHV0Lmh0bScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBiaWxsaW5nSW5wdXRDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0YmlsbGluZ0lucHV0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd1c2VyRGF0YVNlcnZpY2UnLCAnc3RhdGVTZXJ2aWNlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBiaWxsaW5nSW5wdXRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdXNlckRhdGFTZXJ2aWNlLCBzdGF0ZVNlcnZpY2UpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlld21vZGVsIHZhbHVlc1xuXHRcdFx0dm0udXNlckRhdGEgPSB1c2VyRGF0YVNlcnZpY2U7XG5cdFx0XHR2bS5zdGF0ZSA9IHN0YXRlU2VydmljZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gY29udGFjdElucHV0dENvbnRyb2xsZXInKTtcblxuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ2NvbnRhY3RJbnB1dCcsIGNvbnRhY3RJbnB1dCk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGNvbnRhY3RJbnB1dCgpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvY29udGFjdElucHV0Lmh0bScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBjb250YWN0SW5wdXR0Q29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXHRcdFxuXHRcdGNvbnRhY3RJbnB1dHRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGNvbnRhY3RJbnB1dHRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdXNlckRhdGFTZXJ2aWNlLCBzdGF0ZVNlcnZpY2UpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3bW9kZWwgdmFsdWVzXG5cdFx0XHRzZWxmLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0c2VsZi5zdGF0ZSA9IHN0YXRlU2VydmljZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gY29udGFjdElucHV0dENvbnRyb2xsZXInKTtcblxuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ2ZyZXF1ZW5jeVNlbGVjdGlvbicsIGZyZXF1ZW5jeVNlbGVjdGlvbik7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGZyZXF1ZW5jeVNlbGVjdGlvbigpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZnJlcXVlbmN5U2VsZWN0aW9uLmh0bScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBmcmVxdWVuY3lTZWxlY3Rpb25Db250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0ZnJlcXVlbmN5U2VsZWN0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gZnJlcXVlbmN5U2VsZWN0aW9uQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHRcdFx0c2VsZi5mcmVxdWVuY2llcyA9IFtcblx0XHRcdFx0XCJtb250aFwiLFxuXHRcdFx0XHRcInF1YXJ0ZXJcIixcblx0XHRcdFx0XCJ5ZWFyXCJcblx0XHRcdF07XG5cblx0XHRcdHNlbGYuc3RhcnRzID0ge1xuXHRcdFx0XHRtb250aDogW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIixcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sXG5cdFx0XHRcdHF1YXJ0ZXI6IFtcIldpbnRlclwiLCBcIlNwcmluZ1wiLCBcIlN1bW1lclwiLCBcIkZhbGxcIl0sXG5cdFx0XHRcdHllYXI6IFtcIjIwMThcIiwgXCIyMDE5XCIsIFwiMjAyMFwiXVxuXHRcdFx0fVxuXG5cdFx0XHRzZWxmLnNlbGVjdGVkRnJlcXVlbmN5ID0gJyc7XG5cdFx0XHRzZWxmLnN0YXJ0c0luID0gJyc7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2luIGZyZXF1ZW5jeVNlbGVjdGlvbkNvbnRyb2xsZXInKTtcblxuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1x0XHRcblx0fTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ3Byb2R1Y3RTZWxlY3Rpb24nLCBwcm9kdWN0U2VsZWN0aW9uKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gcHJvZHVjdFNlbGVjdGlvbigpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvcHJvZHVjdFNlbGVjdGlvbi5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHR9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlcixcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0XHR9O1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cdFx0fVxuXHRcdFxuXHRcdHByb2R1Y3RTZWxlY3Rpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnLCAnc3F1YXJlU2VydmljZSddO1xuXG5cdFx0LyogQG5nSW5qZWN0ICovXG5cdFx0ZnVuY3Rpb24gcHJvZHVjdFNlbGVjdGlvbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB1c2VyRGF0YVNlcnZpY2UsIHN0YXRlU2VydmljZSwgc3F1YXJlU2VydmljZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdFx0XHRzZWxmLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0c2VsZi5zdGF0ZSA9IHN0YXRlU2VydmljZS5wcm9kdWN0U2VsZWN0aW9uO1xuXHRcdFx0c2VsZi5zdGF0ZVsnaW5mb0JveCddID0gc3RhdGVTZXJ2aWNlLmluZm9Cb3hlcy5mbGF2b3JEZWZzO1xuXG5cdFx0XHQvLyBkb25sb2FkIHJlc291cmNlc1xuXHRcdFx0c3F1YXJlU2VydmljZS5kb3dubG9hZC5wcm9kdWN0TGlzdCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpe1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdnb3QgdGhpcyBwcm9kdWN0IGxpc3QnLCBzKTtcblx0XHRcdFx0c2VsZi5mbGF2b3JzID0gcztcblx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygncHJvZHVjdCBsaXN0IGVycm9yLCAnLCBlKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdFx0c2VsZi5vcmRlckxpc3QgPSB1c2VyRGF0YVNlcnZpY2Uub3JkZXI7XG5cblx0XHRcdHNlbGYucHJvZHVjdFByaWNlID0gMTY5OTtcblxuXHRcdFx0c2VsZi5vcmRlciA9IHVzZXJEYXRhU2VydmljZS50ZW5kZXI7XG5cblxuXHRcdFx0dmFyIHByb2R1Y3RPYmplY3QgPSB7IFxuXHRcdFx0XHRpZDogMSwgXG5cdFx0XHRcdGZsYXZvcjogXCJcIiwgXG5cdFx0XHRcdG1peGZsdnJDb3VudDogMCxcblx0XHRcdFx0bWl4Zmx2cnM6IHtcblx0XHRcdFx0XHRzcnBlYzogeyBpZDogXCJzcnBlY1wiLCBuYW1lOiBcIlNlY3JldCBSZWNpcGUgUGVjYW5zXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gfSxcblx0XHRcdFx0XHRzcmFsbTogeyBpZDogXCJzcmFsbVwiLCBuYW1lOiBcIlNlY3JldCBSZWNpcGUgQWxtb25kc1wiLCBzZWxlY3RlZDpmYWxzZSwgY2xhc3Nlczp7XCJsaXN0LWdyb3VwLWl0ZW1cIjogdHJ1ZSwgXCJhY3RpdmVcIjogZmFsc2V9ICB9LFxuXHRcdFx0XHRcdHNyY3NoOiB7IGlkOiBcInNyY3NoXCIsIG5hbWU6IFwiU2VjcmV0IFJlY2lwZSBDYXNoZXdzXCIsIHNlbGVjdGVkOmZhbHNlLCBjbGFzc2VzOntcImxpc3QtZ3JvdXAtaXRlbVwiOiB0cnVlLCBcImFjdGl2ZVwiOiBmYWxzZX0gIH0sXG5cdFx0XHRcdFx0c3JwZWE6IHsgaWQ6IFwic3JwZWFcIiwgbmFtZTogXCJTZWNyZXQgUmVjaXBlIFBlYW51dHNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfSxcblx0XHRcdFx0XHRjbnBlYzogeyBpZDogXCJjbnBlY1wiLCBuYW1lOiBcIkNpbm5hbW9uIFBlY2Fuc1wiLCBzZWxlY3RlZDpmYWxzZSwgY2xhc3Nlczp7XCJsaXN0LWdyb3VwLWl0ZW1cIjogdHJ1ZSwgXCJhY3RpdmVcIjogZmFsc2V9ICB9LFxuXHRcdFx0XHRcdGNuYWxtOiB7IGlkOiBcImNuYWxtXCIsIG5hbWU6IFwiQ2lubmFtb24gQWxtb25kc1wiLCBzZWxlY3RlZDpmYWxzZSwgY2xhc3Nlczp7XCJsaXN0LWdyb3VwLWl0ZW1cIjogdHJ1ZSwgXCJhY3RpdmVcIjogZmFsc2V9ICB9LFxuXHRcdFx0XHRcdGRycGVjOiB7IGlkOiBcImRycGVjXCIsIG5hbWU6IFwiRHJ1bmtlbiBQZWNhbnNcIiwgc2VsZWN0ZWQ6ZmFsc2UsIGNsYXNzZXM6e1wibGlzdC1ncm91cC1pdGVtXCI6IHRydWUsIFwiYWN0aXZlXCI6IGZhbHNlfSAgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtaXhGbHZyc1NlbGVjdGVkOiBbXSxcblx0XHRcdFx0bWl4OiBcIlwiXG5cdFx0XHR9O1xuXG5cdFx0XHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBwcm9kdWN0U2VsZWN0aW9uQ29udHJvbGxlcicpO1xuXG5cdFx0XHQvL2RlZmluZSBsb2NhbCBmdW5jdGlvbnNcblx0XHRcdGZ1bmN0aW9uIHN1bU9yZGVyKCkge1xuXG5cdFx0XHRcdHNlbGYub3JkZXIudG90YWwgPSAoc2VsZi5vcmRlckxpc3QubGVuZ3RoICogc2VsZi5wcm9kdWN0UHJpY2UpIC0gc2VsZi5vcmRlci5kaXNjb3VudHM7XG5cdFx0XHRcdGlmKHNlbGYub3JkZXJMaXN0Lmxlbmd0aCA9PSA0KSBzZWxmLm9yZGVyLnRvdGFsID0gc2VsZi5vcmRlci50b3RhbCAtIHNlbGYucHJvZHVjdFByaWNlO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly9kZWZpbmUgdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0XHRcdC8vQUREIEEgUFJPRFVDVCBCVVRUT05cblx0XHRcdHNlbGYuYWRkQVByb2R1Y3QgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFiZWxzXG5cdFx0XHRcdHZhciBub09mUHJvZHVjdHMgPSBzZWxmLm9yZGVyTGlzdC5sZW5ndGg7XG5cblx0XHRcdFx0Ly9pZiB0aGVyZSBpcyByb29tIGFkZCBhbm90aGVyIHByb2R1Y3Rcblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzIDwgNCkgc2VsZi5vcmRlckxpc3QucHVzaChPYmplY3QuY3JlYXRlKHByb2R1Y3RPYmplY3QpKTtcblxuXHRcdFx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgYXZhaWxhYmxlIHNsb3QgaGlkZSB0aGUgYWRkIGJ1dHRvblxuXHRcdFx0XHRpZihub09mUHJvZHVjdHMgPT0gMykgc2VsZi5zdGF0ZS5hZGRBUHJvZHVjdEJ0bi52aXNpYmxlID0gZmFsc2U7XG5cblx0XHRcdFx0Ly9pZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHByb2R1Y3QgYWRkIHRoZSByZW1vdmUgYnV0dG9uXG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA+IDApIHNlbGYuc3RhdGUucmVtb3ZlTGFzdFByb2R1Y3RCdG4udmlzaWJsZSA9IHRydWU7XG5cblx0XHRcdFx0Ly9tYWtlIHN1cmUgdGhlIGlkJ3MgYXJlIGNvcnJlY3Rcblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8PSBub09mUHJvZHVjdHM7IGkrKykge1xuXHRcdFx0XHRcdHNlbGYub3JkZXJMaXN0W2ldLmlkID0gaSArIDFcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vY2FsY3VsYXRlIG1vbmV5XG5cdFx0XHRcdC8vaWYobm9PZlByb2R1Y3RzID09IDMpIHNlbGYub3JkZXIuZGlzY291bnRzID0gc2VsZi5wcm9kdWN0UHJpY2U7XG5cblx0XHRcdFx0c3VtT3JkZXIoKTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnYWRkaW5nIGEgcHJvZHVjdCcpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly9SRU1PVkUgTEFTVCBQUk9EVUNUIEJVVFRPTlxuXHRcdFx0c2VsZi5yZW1vdmVMYXN0UHJvZHVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIG5vT2ZQcm9kdWN0cyA9IHNlbGYub3JkZXJMaXN0Lmxlbmd0aDtcblx0XHRcdFx0dmFyIHJlbW92ZUluZGV4ID0gbm9PZlByb2R1Y3RzIC0gMTtcblxuXHRcdFx0XHQvL2lmIHRoZXJlIGFyZSBhdCBsZWFzdCB0d28gcHJvZHVjdHMsIHJlbW92ZSBvbmVcblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzID4gMSkgc2VsZi5vcmRlckxpc3Quc3BsaWNlKHJlbW92ZUluZGV4LCAxKTtcblxuXHRcdFx0XHQvL2lmIGRvd24gdG8gb25lIGl0ZW0sIGhpZGUgdGhlIHJlbW92ZSBidXR0b25cblx0XHRcdFx0aWYobm9PZlByb2R1Y3RzID09IDIpIHNlbGYuc3RhdGUucmVtb3ZlTGFzdFByb2R1Y3RCdG4udmlzaWJsZSA9IGZhbHNlO1xuXG5cdFx0XHRcdC8vYnJpbmcgdGhlIGFkZCBidXR0b24gYmFja1xuXHRcdFx0XHRzZWxmLnN0YXRlLmFkZEFQcm9kdWN0QnRuLnZpc2libGUgPSB0cnVlO1xuXG5cdFx0XHRcdC8vY2FsY3VsYXRlIG1vbmV5XG5cdFx0XHRcdGlmKG5vT2ZQcm9kdWN0cyA9PSA0KSBzZWxmLm9yZGVyLmRpc2NvdW50cyA9IDA7XG5cblx0XHRcdFx0c3VtT3JkZXIoKTtcblxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdyZW1vdmluZyBwcm9kdWN0Jywgbm9PZlByb2R1Y3RzKTtcblx0XHRcdH07XG5cblx0XHRcdC8vUkVNT1ZFIEEgUFJPRFVDVCBCVVRUT05cblx0XHRcdHNlbGYucmVtb3ZlQVByb2R1Y3QgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIG5vT2ZQcm9kdWN0cyA9IHNlbGYub3JkZXJMaXN0Lmxlbmd0aDtcblx0XHRcdFx0dmFyIHJlbW92ZUluZGV4ID0gaWQgLSAxO1xuXG5cdFx0XHRcdC8vaWYgdGhlcmUgYXJlIGF0IGxlYXN0IHR3byBwcm9kdWN0cywgcmVtb3ZlIG9uZVxuXHRcdFx0XHRpZihub09mUHJvZHVjdHMgPiAxKSBzZWxmLm9yZGVyTGlzdC5zcGxpY2UocmVtb3ZlSW5kZXgsIDEpO1xuXG5cdFx0XHRcdC8vbWFrZSBzdXJlIHRoZSBpZCdzIGFyZSBjb3JyZWN0XG5cdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPD0gKHNlbGYub3JkZXJMaXN0Lmxlbmd0aCAtIDEpOyBpKyspIHtcblx0XHRcdFx0XHRzZWxmLm9yZGVyTGlzdFtpXS5pZCA9IGkgKyAxXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzdW1PcmRlcigpO1xuXHRcdFx0fVxuXG5cdFx0XHQvL1ZBTElEQVRFIFRIRSBQUk9EVUNUUyBXSEVOIENIQU5HRURcblx0XHRcdHNlbGYudmFsaWRhdGVQcm9kdWN0cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgdmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInZhbGlkYXRlaW5nIHByb2R1Y3RzXCIpO1xuXG5cdFx0XHRcdGlmKHZhbGlkKSBzZWxmLnN0YXRlLmhlYWRlclN0eWxlLmNvbG9yID0gXCJyZ2IoMCwxNjUsMTI4KVwiXG5cdFx0XHR9XG5cblx0XHRcdC8vXG5cdFx0XHRzZWxmLmNvdW50TWl4Rmxhdm9ycyA9IGZ1bmN0aW9uKGZsYXZvck9iamVjdCkge1xuXHRcdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0XHRcdC8vaXRlcmF0ZSB0aHJvZ3VoIG9iamVjdFxuXHRcdFx0XHRPYmplY3Qua2V5cyhmbGF2b3JPYmplY3QpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdFx0aWYoZmxhdm9yT2JqZWN0W2tleV0uc2VsZWN0ZWQpIGNvdW50ZXIrK1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHRcdH07XG5cblx0XHRcdHNlbGYudXBkYXRlU2hvcHBpbmdDYXJ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCd1cGRhdGluZyBzaG9wcGluZyBjYXJ0Jyk7XG5cdFx0XHRcdC8vc2VsZi51c2VyRGF0YS5vcmRlciA9IHNlbGYub3JkZXJMaXN0O1xuXG5cdFx0XHR9O1xuXG5cdFx0XHRzZWxmLmJ1aWxkRmxhdm9yTGlzdCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdC8vY2xlYW4gdGhlIGxpc3Rcblx0XHRcdFx0c2VsZi5vcmRlckxpc3RbaWRdLm1peEZsdnJzU2VsZWN0ZWQgPSBbXTtcblxuXHRcdFx0XHQvL25vdGlmeSBwcm9ncmVzc1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdidWlsaWRuZyBhIGZsYXZvciBsaXN0JywgaWQsIHNlbGYub3JkZXJMaXN0KTtcblxuXHRcdFx0XHQvL2l0cmF0ZSB0aHJvdWdoIGZsYXZvcnMsIGFkZCB0byBsaXN0IHdoZW4gdHJ1ZVxuXHRcdFx0XHRPYmplY3Qua2V5cyhzZWxmLm9yZGVyTGlzdFtpZF0ubWl4Zmx2cnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cblx0XHRcdFx0XHRpZihzZWxmLm9yZGVyTGlzdFtpZF0ubWl4Zmx2cnNba2V5XS5zZWxlY3RlZClcblx0XHRcdFx0XHRcdHNlbGYub3JkZXJMaXN0W2lkXS5taXhGbHZyc1NlbGVjdGVkLnB1c2goc2VsZi5vcmRlckxpc3RbaWRdLm1peGZsdnJzW2tleV0ubmFtZSk7XG5cdFx0XHRcdH0pO1xuXG5cblxuXHRcdFx0fTtcblxuXHRcdFx0Ly9zdGFydCB0aGlzIGJ5IGFkZGluZyBhIHByb2R1Y3QgdG8gdGhlIG9yZGVyIGxpc3Rcblx0XHRcdHNlbGYub3JkZXJMaXN0LnB1c2goT2JqZWN0LmNyZWF0ZShwcm9kdWN0T2JqZWN0KSk7XG5cblx0XHRcdHN1bU9yZGVyKCk7XG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHRcdFxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLmRpcmVjdGl2ZSgnc2hpcERlc3QnLCBzaGlwRGVzdCk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHNoaXBEZXN0KCkge1xuXHRcdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdFx0dGVtcGxhdGU6ICc8ZGl2PnRlc3Rpbmc8L2Rpdj4nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdFx0Y29udHJvbGxlcjogc2hpcERlc3RDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cdFx0XG5cdFx0c2hpcERlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ppcGNvbXBsZXRlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBzaGlwRGVzdENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB6aXBjb21wbGV0ZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYuemlwQ2hlY2sgPSB6aXBjb21wbGV0ZTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnaW4gc2hpcERlc3RDb250cm9sbGVyJyk7XG5cblxuXHRcdH1cblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XG5cdH0iLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5kaXJlY3RpdmUoJ3NpbmdsZUFkZHJlc3NJbnB1dCcsIHNpbmdsZUFkZHJlc3NJbnB1dCk7XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHNpbmdsZUFkZHJlc3NJbnB1dCgpIHtcblx0XHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2luZ2xlQWRkcmVzc0lucHV0Lmh0bScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0YWRkcmVzczogXCI9XCJcblx0XHRcdH0sXG5cdFx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRcdGNvbnRyb2xsZXI6IHNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXIsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblx0XHRcblx0XHRzaW5nbGVBZGRyZXNzSW5wdXRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3VzZXJEYXRhU2VydmljZScsICdzdGF0ZVNlcnZpY2UnXTtcblxuXHRcdC8qIEBuZ0luamVjdCAqL1xuXHRcdGZ1bmN0aW9uIHNpbmdsZUFkZHJlc3NJbnB1dENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB1c2VyRGF0YVNlcnZpY2UsIHN0YXRlU2VydmljZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vZGVmaW5lIHZpZXdtb2RlbCB2YWx1ZXNcblx0XHRcdHNlbGYudXNlckRhdGEgPSB1c2VyRGF0YVNlcnZpY2U7XG5cdFx0XHRzZWxmLnN0YXRlID0gc3RhdGVTZXJ2aWNlXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBzaW5nbGVBZGRyZXNzSW5wdXRDb250cm9sbGVyJyk7XG5cblx0XHRcdHNlbGYudXBkYXRlQmlsbGluZ0FkZHJlc3MgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoc2VsZi5zdGF0ZS5zaGlwaW5nU2FtZUFzQmlsbGluZykge1xuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3Muc3RyZWV0ID0gc2VsZi51c2VyRGF0YS5zaGlwcGluZ0Rlc3RpbmF0aW9uLnN0cmVldFxuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3MuemlwID0gc2VsZi51c2VyRGF0YS5zaGlwcGluZ0Rlc3RpbmF0aW9uLnppcFxuXHRcdFx0XHRcdHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3MuY2l0eSA9IHNlbGYudXNlckRhdGEuc2hpcHBpbmdEZXN0aW5hdGlvbi5jaXR5XG5cdFx0XHRcdFx0c2VsZi51c2VyRGF0YS5iaWxsaW5nQWRkcmVzcy5zdGF0ZSA9IHNlbGYudXNlckRhdGEuc2hpcHBpbmdEZXN0aW5hdGlvbi5zdGF0ZVxuXHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcdFx0XG5cdH07IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuZGlyZWN0aXZlKCdzdWJUZXJtc0NvbmQnLCBzdWJUZXJtc0NvbmQpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBzdWJUZXJtc0NvbmQoKSB7XG5cdFx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3N1YlRlcm1zQ29uZC5odG0nLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHR9LFxuXHRcdFx0bGluazogbGlua0Z1bmMsXG5cdFx0XHRjb250cm9sbGVyOiBzdWJUZXJtc0NvbmRDb250cm9sbGVyLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHRcdH07XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHR9XG5cdFx0XG5cdFx0c3ViVGVybXNDb25kQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnc3RhdGVTZXJ2aWNlJywgJ3VzZXJEYXRhU2VydmljZScsICd2YWxpZGF0aW9uU2VydmljZScsICdzdWJtaXNzaW9uU2VydmljZScsICdzcXVhcmVTZXJ2aWNlJ107XG5cblx0XHQvKiBAbmdJbmplY3QgKi9cblx0XHRmdW5jdGlvbiBzdWJUZXJtc0NvbmRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCBzdGF0ZVNlcnZpY2UsIHVzZXJEYXRhU2VydmljZSwgdmFsaWRhdGlvblNlcnZpY2UsIHN1Ym1pc3Npb25TZXJ2aWNlLCBzcXVhcmVTZXJ2aWNlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0XHRcdHNlbGYuc3RhdGUgPSBzdGF0ZVNlcnZpY2U7XG5cdFx0XHRzZWxmLnVzZXJEYXRhID0gdXNlckRhdGFTZXJ2aWNlO1xuXHRcdFx0c2VsZi52YWxpZGF0ZSA9IHZhbGlkYXRpb25TZXJ2aWNlO1xuXHRcdFx0c2VsZi5zcXVhcmUgPSBzcXVhcmVTZXJ2aWNlO1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdpbiBzdWJUZXJtc0NvbmRDb250cm9sbGVyJyk7XG5cdFx0XHQvKnNlbGYuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWJtaXR0aWcgdGhlIGZvcm0nKTtcblxuXHRcdFx0XHQvL3N1Ym1pdCB0aGUgZm9ybVxuXHRcdFx0XHRzdWJtaXNzaW9uU2VydmljZS5zdWJtaXQoc2VsZi51c2VyRGF0YSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcdFx0dmFyIG5ld1BhdGggPSAnL3N1Y2Nlc3MvJyArIHMuZGF0YTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcGF0aCBiYWNrJywgbmV3UGF0aClcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aChuZXdQYXRoKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3RoZXJlIHdhcyBhbiBlcnJvcicsIGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0qL1xuXG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHRcdFxuXHR9OyIsIi8qXG4qXHRST1VURVMtQ09ORklHXG4qXG4qXHRUaGlzIG1vZHVsZSBzZXRzIHVwIGFsbCB0aGUgcmVxdWlyZWQgYW5ndWxhciByb3V0ZXMgZm9yIHRoaXMgd2ViIGFwcC5cbiovXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnYW5zdWInKVxuICAgIC5jb25maWcoY29uZmlnKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJycpO1xuICAgICRyb3V0ZVByb3ZpZGVyXG5cdC8vUFVCTElDIFJPVVRFU1xuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL21vbnRobHlTdWIuaHRtJywgICAgICAvLyd2aWV3cy9tb250aGx5U3ViLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ21haW5Db250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc3VjY2Vzcy86Y29uZmlybWF0aW9uQ29kZScsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zdWNjZXNzLmh0bScsICAgICAgLy8ndmlld3Mvc3VjY2Vzcy5odG1sJ1xuICAgICAgICBjb250cm9sbGVyOiAnc3VjY2Vzc0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nc3VjY2VzcydcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcblx0Lm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG4vKlxuKiAgIFJFUVVJUkVEIEZVTkNUSU9OU1xuKlxuKi9cblxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdlcnJvckhhbmRsaW5nU2VydmljZScsIGVycm9ySGFuZGxpbmdTZXJ2aWNlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xuZXJyb3JIYW5kbGluZ1NlcnZpY2UuJGluamVjdCA9IFtdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGVycm9ySGFuZGxpbmdTZXJ2aWNlKCkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIGVycm9ySGFuZGxpbmcgPSB7XG5cdFx0XG5cdH07XG5cblx0cmV0dXJuIGVycm9ySGFuZGxpbmc7XG59O1x0IiwiXHRhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdtb2RhbFNlcnZpY2UnLCBtb2RhbFNlcnZpY2UpO1xuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRtb2RhbFNlcnZpY2UuJGluamVjdCA9IFsnJHVpYk1vZGFsJ107XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIG1vZGFsU2VydmljZSgkdWliTW9kYWwpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgbW9kYWxEZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgICAgICAgICBtb2RhbEZhZGU6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL21vZGFsLmh0bSdcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgbW9kYWxPcHRpb25zID0ge1xuICAgICAgICAgICAgY2xvc2VCdXR0b25UZXh0OiAnQ2xvc2UnLFxuICAgICAgICAgICAgYWN0aW9uQnV0dG9uVGV4dDogJ09LJyxcbiAgICAgICAgICAgIGhlYWRlclRleHQ6ICdQcm9jZWVkPycsXG4gICAgICAgICAgICBib2R5VGV4dDogJ1BlcmZvcm0gdGhpcyBhY3Rpb24/J1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2hvd01vZGFsID0gZnVuY3Rpb24gKGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFjdXN0b21Nb2RhbERlZmF1bHRzKSBjdXN0b21Nb2RhbERlZmF1bHRzID0ge307XG4gICAgICAgICAgICBjdXN0b21Nb2RhbERlZmF1bHRzLmJhY2tkcm9wID0gJ3N0YXRpYyc7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93KGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucykge1xuICAgICAgICAgICAgLy9DcmVhdGUgdGVtcCBvYmplY3RzIHRvIHdvcmsgd2l0aCBzaW5jZSB3ZSdyZSBpbiBhIHNpbmdsZXRvbiBzZXJ2aWNlXG4gICAgICAgICAgICB2YXIgdGVtcE1vZGFsRGVmYXVsdHMgPSB7fTtcbiAgICAgICAgICAgIHZhciB0ZW1wTW9kYWxPcHRpb25zID0ge307XG5cbiAgICAgICAgICAgIC8vTWFwIGFuZ3VsYXItdWkgbW9kYWwgY3VzdG9tIGRlZmF1bHRzIHRvIG1vZGFsIGRlZmF1bHRzIGRlZmluZWQgaW4gc2VydmljZVxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodGVtcE1vZGFsRGVmYXVsdHMsIG1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsRGVmYXVsdHMpO1xuXG4gICAgICAgICAgICAvL01hcCBtb2RhbC5odG1sICRzY29wZSBjdXN0b20gcHJvcGVydGllcyB0byBkZWZhdWx0cyBkZWZpbmVkIGluIHNlcnZpY2VcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHRlbXBNb2RhbE9wdGlvbnMsIG1vZGFsT3B0aW9ucywgY3VzdG9tTW9kYWxPcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKCF0ZW1wTW9kYWxEZWZhdWx0cy5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgdGVtcE1vZGFsRGVmYXVsdHMuY29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbE9wdGlvbnMgPSB0ZW1wTW9kYWxPcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxPcHRpb25zLm9rID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsT3B0aW9ucy5jbG9zZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICRtb2RhbC5vcGVuKHRlbXBNb2RhbERlZmF1bHRzKS5yZXN1bHQ7XG4gICAgICAgIH07XG5cdFx0XG5cdH07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdzZXJ2ZXJTZXJ2aWNlJywgc2VydmVyU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnNlcnZlclNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzZXJ2ZXJTZXJ2aWNlKCRodHRwKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgc2VydmVyU2VydmljZSA9IHtcblx0XHRjaGFyZ2VDYXJkOiBjaGFyZ2VDYXJkLFxuXHRcdGdldDoge1xuXHRcdFx0c3FyQXBwSWQ6IGdldFNxckFwcElkLFxuXHRcdFx0c3FyUHJkY3RMaXN0OiBnZXRTcXJQcmRjdExpc3Rcblx0XHR9XG5cdH07XG5cblx0Ly9jaGFyZ2UgYSBjcmVkaXQgY2FyZFxuXHRmdW5jdGlvbiBjaGFyZ2VDYXJkKHVybCwgZGF0YSkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBkYXRhXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcmVzcG9uc2UnLCByZXNwb25zZSk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XHRcdFx0XG5cdH07XG5cblx0Ly9nZXRzdCB0aGUgcmVxdWlyZWQgY29kZVxuXHRmdW5jdGlvbiBnZXRTcXJBcHBJZCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcblx0XHQvL2xvZyBwcm9ncmVzc1xuXHRcdC8vJGxvZy5pbmZvKCdzZW5kaW5nIGZyb20gc3FyJyk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9zcXVhcmVJZCdcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdnb3QgdGhpcyByZXNwb25zZScsIHJlc3BvbnNlKTtcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcdFxuXHR9O1xuXG5cdGZ1bmN0aW9uIGdldFNxclByZGN0TGlzdCgpIHtcblxuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9wcm9kdWN0TGlzdCdcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdnb3QgdGhpcyByZXNwb25zZScsIHJlc3BvbnNlKTtcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4gc2VydmVyU2VydmljZTtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdzcXVhcmVTZXJ2aWNlJywgc3F1YXJlU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnNxdWFyZVNlcnZpY2UuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnc2VydmVyU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzcXVhcmVTZXJ2aWNlKCRyb290U2NvcGUsICRsb2NhdGlvbiwgc2VydmVyU2VydmljZSwgdXNlckRhdGFTZXJ2aWNlKSB7XG5cdC8vZGVmaW5lIGxvY2FsIHZhcmFpYmxlc1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0dmFyIHNxdWFyZVNlcnZpY2UgPSB7XG5cdFx0X2NoYXJnZUNhcmRXaXRoTm9uY2U6IF9jaGFyZ2VDYXJkV2l0aE5vbmNlLFxuXHRcdHN1Ym1pdEZvcm06IHN1Ym1pdEZvcm0sXG5cdFx0ZG93bmxvYWQ6IHtcblx0XHRcdHByb2R1Y3RMaXN0OiBkb3dubG9hZFByb2R1Y3RMaXN0XG5cdFx0fSxcblx0XHRpbml0OiBpbml0XG5cdH07XG5cblx0Ly9jaGFyZ2UgY2FyZCB3aXRoIG5vbmNlXG5cdGZ1bmN0aW9uIF9jaGFyZ2VDYXJkV2l0aE5vbmNlKG5vbmNlKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVybCA9ICcvYXBpL2NoYXJnZV9jYXJkJztcblx0XHR1c2VyRGF0YVNlcnZpY2UuY2FyZC5ub25jZSA9IG5vbmNlO1xuXG5cdFx0Ly9wYXNzIHRoZSBkYXRhIHRvIHRoZSBzZXJ2ZXJcblx0XHRzZXJ2ZXJTZXJ2aWNlLmNoYXJnZUNhcmQodXJsLCB1c2VyRGF0YVNlcnZpY2UpXG5cdFx0LnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBuZXdQYXRoID0gJy9zdWNjZXNzLycgKyBzLmRhdGE7XG5cblx0XHRcdC8vbG9nIHByb2dyZXNzXG5cdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcGF0aCBiYWNrJywgbmV3UGF0aCk7XG5cblx0XHRcdC8vcmUtcm91dGUgdGhlIHBhZ2Vcblx0XHRcdCRsb2NhdGlvbi5wYXRoKG5ld1BhdGgpO1xuXHRcdFx0JHJvb3RTY29wZS4kYXBwbHkoKTtcblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdFcnJvcjonLGUpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8vc3VibWl0cyB0aGUgZm9ybSBmb3IgdXNcblx0ZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHtcblx0XHRjb25zb2xlLmxvZygnc3VibWl0dGluZyBmb3JtJyk7XG5cdFx0c2VsZi5wYXltZW50Rm9ybS5yZXF1ZXN0Q2FyZE5vbmNlKCk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRQcm9kdWN0TGlzdCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2l0IHRoZSBzZXJ2ZXIgXG5cdFx0XHRzZXJ2ZXJTZXJ2aWNlLmdldC5zcXJQcmRjdExpc3QoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcdHJlc29sdmUocyk7XG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fTtcblxuXHRmdW5jdGlvbiBpbml0KCkge1xuXG5cdFx0Ly9jb2xsZWN0IHRoZSBzcXVhcmVBcHBJZFxuXHRcdHNlcnZlclNlcnZpY2UuZ2V0LnNxckFwcElkKClcblx0XHQudGhlbihmdW5jdGlvbihzcUFwcCkge1xuXG5cdFx0XHRzZWxmLnBheW1lbnRGb3JtID0gbmV3IFNxUGF5bWVudEZvcm0oe1xuXHRcdCAgICBhcHBsaWNhdGlvbklkOiBzcUFwcC5pZCxcblx0XHQgICAgaW5wdXRDbGFzczogJ3NxLWlucHV0Jyxcblx0XHQgICAgaW5wdXRTdHlsZXM6IFtcblx0XHQgICAgICB7XG5cdFx0ICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICAgICAgXHRwYWRkaW5nOiAnN3B4IDEycHgnLFxuICAgICAgICAgICAgXHRiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIlxuXHRcdCAgICAgIH1cblx0XHQgICAgXSxcblx0XHQgICAgY2FyZE51bWJlcjoge1xuXHRcdCAgICAgIGVsZW1lbnRJZDogJ3NxLWNhcmQtbnVtYmVyJyxcblx0XHQgICAgICBwbGFjZWhvbGRlcjogJ+KAouKAouKAouKAoiDigKLigKLigKLigKIg4oCi4oCi4oCi4oCiIOKAouKAouKAouKAoidcblx0XHQgICAgfSxcblx0XHQgICAgY3Z2OiB7XG5cdFx0ICAgICAgZWxlbWVudElkOiAnc3EtY3Z2Jyxcblx0XHQgICAgICBwbGFjZWhvbGRlcjogJ0NWVidcblx0XHQgICAgfSxcblx0XHQgICAgZXhwaXJhdGlvbkRhdGU6IHtcblx0XHQgICAgICBlbGVtZW50SWQ6ICdzcS1leHBpcmF0aW9uLWRhdGUnLFxuXHRcdCAgICAgIHBsYWNlaG9sZGVyOiAnTU0vWVknXG5cdFx0ICAgIH0sXG5cdFx0ICAgIHBvc3RhbENvZGU6IHtcblx0XHQgICAgICBlbGVtZW50SWQ6ICdzcS1wb3N0YWwtY29kZSdcblx0XHQgICAgfSxcblx0XHQgICAgY2FsbGJhY2tzOiB7XG5cblx0XHRcdCAgICAgIC8vIENhbGxlZCB3aGVuIHRoZSBTcVBheW1lbnRGb3JtIGNvbXBsZXRlcyBhIHJlcXVlc3QgdG8gZ2VuZXJhdGUgYSBjYXJkXG5cdFx0XHQgICAgICAvLyBub25jZSwgZXZlbiBpZiB0aGUgcmVxdWVzdCBmYWlsZWQgYmVjYXVzZSBvZiBhbiBlcnJvci5cblx0XHRcdCAgICAgIGNhcmROb25jZVJlc3BvbnNlUmVjZWl2ZWQ6IGZ1bmN0aW9uKGVycm9ycywgbm9uY2UsIGNhcmREYXRhKSB7XG5cdFx0XHQgICAgICAgIGlmIChlcnJvcnMpIHtcblx0XHRcdCAgICAgICAgICBjb25zb2xlLmxvZyhcIkVuY291bnRlcmVkIGVycm9yczpcIiwgZXJyb3JzKTtcblx0XHRcdCAgICAgICAgICBzZWxmLmNhcmRfZXJyb3JzID0gZXJyb3JzO1xuXHQgICAgICAgICAgICBcdCAgc2VsZi5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgXHQgIC8vJHNjb3BlLiRhcHBseSgpOyAvLyByZXF1aXJlZCBzaW5jZSB0aGlzIGlzIG5vdCBhbiBhbmd1bGFyIGZ1bmN0aW9uXG5cblx0XHRcdCAgICAgICAgLy8gTm8gZXJyb3JzIG9jY3VycmVkLiBFeHRyYWN0IHRoZSBjYXJkIG5vbmNlLlxuXHRcdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdFx0ICAgICAgICAgIHNlbGYuY2FyZF9lcnJvcnMgPSBbXTtcblx0XHRcdCAgICAgICAgICAvLyBEZWxldGUgdGhpcyBsaW5lIGFuZCB1bmNvbW1lbnQgdGhlIGxpbmVzIGJlbG93IHdoZW4geW91J3JlIHJlYWR5XG5cdFx0XHQgICAgICAgICAgLy8gdG8gc3RhcnQgc3VibWl0dGluZyBub25jZXMgdG8geW91ciBzZXJ2ZXIuXG5cdFx0XHQgICAgICAgICAgLy9hbGVydCgnTm9uY2UgcmVjZWl2ZWQ6ICcgKyBub25jZSk7XG5cblx0XHRcdCAgICAgICAgICBfY2hhcmdlQ2FyZFdpdGhOb25jZShub25jZSk7XG5cblx0XHRcdCAgICAgICAgICAvKlxuXHRcdFx0ICAgICAgICAgICAgVGhlc2UgbGluZXMgYXNzaWduIHRoZSBnZW5lcmF0ZWQgY2FyZCBub25jZSB0byBhIGhpZGRlbiBpbnB1dFxuXHRcdFx0ICAgICAgICAgICAgZmllbGQsIHRoZW4gc3VibWl0IHRoYXQgZmllbGQgdG8geW91ciBzZXJ2ZXIuXG5cdFx0XHQgICAgICAgICAgICBVbmNvbW1lbnQgdGhlbSB3aGVuIHlvdSdyZSByZWFkeSB0byB0ZXN0IG91dCBzdWJtaXR0aW5nIG5vbmNlcy5cblxuXHRcdFx0ICAgICAgICAgICAgWW91J2xsIGFsc28gbmVlZCB0byBzZXQgdGhlIGFjdGlvbiBhdHRyaWJ1dGUgb2YgdGhlIGZvcm0gZWxlbWVudFxuXHRcdFx0ICAgICAgICAgICAgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHNhbXBsZSwgdG8gY29ycmVzcG9uZCB0byB0aGUgVVJMIHlvdSB3YW50IHRvXG5cdFx0XHQgICAgICAgICAgICBzdWJtaXQgdGhlIG5vbmNlIHRvLlxuXHRcdFx0ICAgICAgICAgICovXG5cdFx0XHQgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQtbm9uY2UnKS52YWx1ZSA9IG5vbmNlO1xuXHRcdFx0ICAgICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub25jZS1mb3JtJykuc3VibWl0KCk7XG5cblx0XHRcdCAgICAgICAgfVxuXHRcdFx0ICAgICAgfSxcblxuXHRcdFx0ICAgICAgdW5zdXBwb3J0ZWRCcm93c2VyRGV0ZWN0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgICAgICAvLyBGaWxsIGluIHRoaXMgY2FsbGJhY2sgdG8gYWxlcnQgYnV5ZXJzIHdoZW4gdGhlaXIgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkLlxuXHRcdFx0ICAgICAgfSxcblxuXHRcdFx0ICAgICAgLy8gRmlsbCBpbiB0aGVzZSBjYXNlcyB0byByZXNwb25kIHRvIHZhcmlvdXMgZXZlbnRzIHRoYXQgY2FuIG9jY3VyIHdoaWxlIGFcblx0XHRcdCAgICAgIC8vIGJ1eWVyIGlzIHVzaW5nIHRoZSBwYXltZW50IGZvcm0uXG5cdFx0XHQgICAgICBpbnB1dEV2ZW50UmVjZWl2ZWQ6IGZ1bmN0aW9uKGlucHV0RXZlbnQpIHtcblx0XHRcdCAgICAgICAgc3dpdGNoIChpbnB1dEV2ZW50LmV2ZW50VHlwZSkge1xuXHRcdFx0ICAgICAgICAgIGNhc2UgJ2ZvY3VzQ2xhc3NBZGRlZCc6XG5cdFx0XHQgICAgICAgICAgICAvLyBIYW5kbGUgYXMgZGVzaXJlZFxuXHRcdFx0ICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgICAgICAgY2FzZSAnZm9jdXNDbGFzc1JlbW92ZWQnOlxuXHRcdFx0ICAgICAgICAgICAgLy8gSGFuZGxlIGFzIGRlc2lyZWRcblx0XHRcdCAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgICAgICAgIGNhc2UgJ2Vycm9yQ2xhc3NBZGRlZCc6XG5cdFx0XHQgICAgICAgICAgICAvLyBIYW5kbGUgYXMgZGVzaXJlZFxuXHRcdFx0ICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHQgICAgICAgICAgY2FzZSAnZXJyb3JDbGFzc1JlbW92ZWQnOlxuXHRcdFx0ICAgICAgICAgICAgLy8gSGFuZGxlIGFzIGRlc2lyZWRcblx0XHRcdCAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgICAgICAgIGNhc2UgJ2NhcmRCcmFuZENoYW5nZWQnOlxuXHRcdFx0ICAgICAgICAgICAgLy8gSGFuZGxlIGFzIGRlc2lyZWRcblx0XHRcdCAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0ICAgICAgICAgIGNhc2UgJ3Bvc3RhbENvZGVDaGFuZ2VkJzpcblx0XHRcdCAgICAgICAgICAgIC8vIEhhbmRsZSBhcyBkZXNpcmVkXG5cdFx0XHQgICAgICAgICAgICBicmVhaztcblx0XHRcdCAgICAgICAgfVxuXHRcdFx0ICAgICAgfSxcblxuXHRcdFx0ICAgICAgcGF5bWVudEZvcm1Mb2FkZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgICAgICAvLyBGaWxsIGluIHRoaXMgY2FsbGJhY2sgdG8gcGVyZm9ybSBhY3Rpb25zIGFmdGVyIHRoZSBwYXltZW50IGZvcm0gaXNcblx0XHRcdCAgICAgICAgLy8gZG9uZSBsb2FkaW5nIChzdWNoIGFzIHNldHRpbmcgdGhlIHBvc3RhbCBjb2RlIGZpZWxkIHByb2dyYW1tYXRpY2FsbHkpLlxuXHRcdFx0ICAgICAgICAvLyBwYXltZW50Rm9ybS5zZXRQb3N0YWxDb2RlKHNlbGYudXNlckRhdGEuYmlsbGluZ0FkZHJlc3MuemlwKTtcblxuXHRcdFx0ICAgICAgfVxuXHRcdFx0ICAgIH1cblx0XHRcdH0pO1xuXHQgICAgXHRzZWxmLnBheW1lbnRGb3JtLmJ1aWxkKCk7XG4gICAgXHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgIFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgXHR9KTtcblxuXHR9XG5cblx0cmV0dXJuIHNxdWFyZVNlcnZpY2U7XG59O1x0IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgnc3RhdGVTZXJ2aWNlJywgc3RhdGVTZXJ2aWNlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xuc3RhdGVTZXJ2aWNlLiRpbmplY3QgPSBbJ3VzZXJEYXRhU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHN0YXRlU2VydmljZSh1c2VyRGF0YVNlcnZpY2UpIHtcblx0Ly9kZWZpbmUgbG9jYWwgdmFyYWlibGVzXG5cdHZhciBzdGF0ZSA9IHtcblx0XHRzaGlwaW5nU2FtZUFzQmlsbGluZzogdHJ1ZSxcblx0XHRwcm9kdWN0U2VsZWN0aW9uOiB7XG5cdFx0XHRhZGRBUHJvZHVjdEJ0bjoge1xuXHRcdFx0XHRjbGFzc2VzOiB7XG5cdFx0XHRcdFx0J2J0bic6IHRydWUsXG5cdFx0XHRcdFx0J2J0bi1zdWNjZXNzJzogdHJ1ZSxcblx0XHRcdFx0XHQnYnRuLXdhcm5pbmcnOiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aXNpYmxlOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0cmVtb3ZlTGFzdFByb2R1Y3RCdG46IHtcblx0XHRcdFx0Y2xhc3Nlczoge1xuXHRcdFx0XHRcdCdidG4nOiB0cnVlLFxuXHRcdFx0XHRcdCdidG4tc3VjY2Vzcyc6IGZhbHNlLFxuXHRcdFx0XHRcdCdidG4td2FybmluZyc6IGZhbHNlLFxuXHRcdFx0XHRcdCdidG4tZGFuZ2VyJzogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aXNpYmxlOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdGhlYWRlclN0eWxlOiB7XG5cdFx0XHRcdGNvbG9yOiBcInJnYig1MSw1MSw1MSlcIlxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Y29udGFjdEluZm86IHtcblx0XHRcdGZpcnN0bmFtZToge1xuXHRcdFx0XHRjbGFzc2VzOiB7XG5cdFx0XHRcdFx0XCJmb3JtLWNvbnRyb2xcIjogdHJ1ZSxcblx0XHRcdFx0XHRcImlzLXZhbGlkXCI6IGZhbHNlLFxuXHRcdFx0XHRcdFwiaXMtaW52YWxpZFwiOiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRhZGRyZXNzZWQ6IGZhbHNlLFxuXHRcdFx0XHRpc1ZhbGlkOiBmYWxzZSxcblx0XHRcdFx0aXNJbnZhbGlkOiBmYWxzZVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0aW5mb0JveGVzOiB7XG5cdFx0XHRmbGF2b3JEZWZzOiBmYWxzZSxcblx0XHRcdHRlcm1zQ29uZHM6IGZhbHNlXG5cdFx0fSxcblx0XHRzZWN0aW9uc0FkZHJlc3NlZDoge1xuXHRcdFx0cHJvZHVjdFNlbGVjdGlvbjogZmFsc2UsXG5cdFx0XHRzaW5nbGVTaGlwcGluZ0FkZHJlc3M6IGZhbHNlLFxuXHRcdFx0Y29udGFjdEluZm86IGZhbHNlLFxuXHRcdFx0dGVybXNDb25kczogZmFsc2Vcblx0XHR9LFxuXHRcdHNlY3Rpb25zQ29tcGxldGVkOiB7XG5cdFx0XHRwcm9kdWN0U2VsZWN0aW9uOiB0cnVlLFxuXHRcdFx0c2luZ2xlU2hpcHBpbmdBZGRyZXNzOiB0cnVlLFxuXHRcdFx0Y29udGFjdEluZm86IHRydWUsXG5cdFx0XHR0ZXJtc0NvbmRzOiBmYWxzZVxuXHRcdH0sXG5cdFx0c2VjdGlvbkhlYWRlcnM6IHtcblx0XHRcdHByb2R1Y3RTZWxlY3Rpb246IHtcblx0XHRcdFx0c2hvd0Vycm9yOiBmYWxzZSxcblx0XHRcdFx0c2hvd0NvbXBsZXRlZDogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHRzaW5nbGVTaGlwcGluZ0FkZHJlc3M6IHtcblx0XHRcdFx0c2hvd0Vycm9yOiBmYWxzZSxcblx0XHRcdFx0c2hvd0NvbXBsZXRlZDogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHRjb250YWN0SW5mbzoge1xuXHRcdFx0XHRzaG93RXJyb3I6IGZhbHNlLFxuXHRcdFx0XHRzaG93Q29tcGxldGVkOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdHRlcm1zQ29uZHM6IHtcblx0XHRcdFx0c2hvd0Vycm9yOiBmYWxzZSxcblx0XHRcdFx0c2hvd0NvbXBsZXRlZDogZmFsc2Vcblx0XHRcdH1cblx0XHR9LFxuXHRcdGNoZWNrQ29tcGxldG5lc3M6IGNoZWNrQ29tcGxldG5lc3MsXG5cdFx0cmVhZHlGb3JTdWJtaXNzaW9uOiBmYWxzZSxcblx0XHRzdWJtaXNzaW9uQnRuOiB7XG5cdFx0XHRcImJ0blwiOiB0cnVlLFxuXHRcdFx0XCJidG4tYmxvY2tcIjogdHJ1ZSxcblx0XHRcdFwiYnRuLXN1Y2Nlc3NcIjogZmFsc2UsXG5cdFx0XHRcImJ0bi1zZWNvbmRhcnlcIjogdHJ1ZVxuXHRcdH1cblx0fTtcblxuXHRmdW5jdGlvbiB0ZXJtc0NvbmRzQXJlR29vZCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcblxuXHRcdHJldHVybiB1c2VyRGF0YVNlcnZpY2UuYWdyZWVkVG9UZXJtcztcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrQ29tcGxldG5lc3MoKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHZhciBub0ZsYWdzID0gdHJ1ZTtcblxuXHRcdC8vaXRlcmF0ZSB0aHJvdWdoIHJlcXVpcm5tZW50c1xuXHRcdE9iamVjdC5rZXlzKHNlbGYuc2VjdGlvbnNDb21wbGV0ZWQpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRpZihzZWxmLnNlY3Rpb25zQ29tcGxldGVkW2tleV0gPT0gZmFsc2UpIG5vRmxhZ3MgPSBmYWxzZTtcblx0XHR9KTtcblxuXHRcdGlmKG5vRmxhZ3MpIHtcblx0XHRcdHJlYWR5Rm9yU3VibWlzc2lvbiA9IHRydWU7XG5cdFx0XHRzZWxmLnN1Ym1pc3Npb25CdG5bXCJidG4tc3VjY2Vzc1wiXSA9IHRydWU7XG5cdFx0XHRzZWxmLnN1Ym1pc3Npb25CdG5bXCJidG4tc2Vjb25kYXJ5XCJdID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlYWR5Rm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHRcdFx0c2VsZi5zdWJtaXNzaW9uQnRuW1wiYnRuLXN1Y2Nlc3NcIl0gPSBmYWxzZTtcblx0XHRcdHNlbGYuc3VibWlzc2lvbkJ0bltcImJ0bi1zZWNvbmRhcnlcIl0gPSB0cnVlO1xuXHRcdH07XG5cdH1cdFxuXG5cdHJldHVybiBzdGF0ZTtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCdzdWJtaXNzaW9uU2VydmljZScsIHN1Ym1pc3Npb25TZXJ2aWNlKTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0c3VibWlzc2lvblNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gc3VibWlzc2lvblNlcnZpY2UoJGh0dHApIHtcblx0XHQvL2NvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSBzdWJtaXNzaW9uIHNlcnZpY2UnKTtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRzZWxmLnN1Ym1pdCA9IGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdzdWJtaXR0aW5nJywgdXNlckRhdGEpO1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHQvL3RyeSBQT1NUXG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHR1cmw6ICcvc3Vic2NyaXB0aW9uLWFwcGxpY2F0aW9uLXN1Ym1pc3Npb24nLFxuXHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHVzZXJEYXRhXG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgcmVzcG9uc2UnLCByZXNwb25zZSk7XG5cdFx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0fTtcblxuXHR9OyIsImFuZ3VsYXIubW9kdWxlKCdhbnN1YicpLnNlcnZpY2UoJ3VzZXJEYXRhU2VydmljZScsIHVzZXJEYXRhU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnVzZXJEYXRhU2VydmljZS4kaW5qZWN0ID0gW107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdXNlckRhdGFTZXJ2aWNlKCkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHVzZXJEYXRhID0ge1xuXHRcdG5hbWU6IHtcblx0XHRcdGZpcnN0OiBcIlwiLFxuXHRcdFx0bGFzdDogXCJcIlxuXHRcdH0sXG5cdFx0Y29udGFjdDoge1xuXHRcdFx0ZW1haWw6IFwiXCIsXG5cdFx0XHRwaG9uZTogXCJcIlxuXHRcdH0sXG5cdFx0c2hpcHBpbmdEZXN0aW5hdGlvbjoge1xuXHRcdFx0c3RyZWV0OiBcIlwiLFxuXHRcdFx0Y2l0eTogXCJcIixcblx0XHRcdHN0YXRlOiBcIlwiLFxuXHRcdFx0emlwOiBcIlwiXG5cdFx0fSxcblx0XHRiaWxsaW5nQWRkcmVzczoge1xuXHRcdFx0c3RyZWV0OiBcIlwiLFxuXHRcdFx0Y2l0eTogXCJcIixcblx0XHRcdHN0YXRlOiBcIlwiLFxuXHRcdFx0emlwOiBcIlwiXG5cdFx0fSxcblx0XHRjYXJkOiB7XG5cdFx0XHQvL2NhcmRfbnVtYmVyOiBcIlwiLFxuXHRcdFx0Ly9jdnY6IFwiXCIsXG5cdFx0XHQvL2V4cGlyYXRpb25fZGF0ZTogXCJcIixcblx0XHRcdC8vcG9zdGFsX2NvZGU6IFwiXCIsXG5cdFx0XHRub25jZTogXCJcIixcblx0XHRcdGxhc3Q0OiBcIlwiLFxuXHRcdFx0dHlwZTogXCJcIlxuXHRcdH0sXG5cdFx0b3JkZXJObzogXCJcIixcblx0XHRvcmRlckRhdGU6IFwiXCIsXG5cdFx0b3JkZXI6IFtdLFxuXHRcdHRlbmRlcjoge1xuXHRcdFx0ZGlzY291bnRzOiAwLFxuXHRcdFx0c2hpcHBpbmc6IDAsXG5cdFx0XHR0b3RhbDogMFxuXHRcdH0sXG5cdFx0YWdyZWVkVG9UZXJtczogZmFsc2Vcblx0fTtcblxuXHRyZXR1cm4gdXNlckRhdGE7XG59O1x0IiwiYW5ndWxhci5tb2R1bGUoJ2Fuc3ViJykuc2VydmljZSgndmFsaWRhdGlvblNlcnZpY2UnLCB2YWxpZGF0aW9uU2VydmljZSk7XG5cdFx0XG4vKiBAbmdJbmplY3QgKi9cbnZhbGlkYXRpb25TZXJ2aWNlLiRpbmplY3QgPSBbJ3N0YXRlU2VydmljZScsICd1c2VyRGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB2YWxpZGF0aW9uU2VydmljZShzdGF0ZVNlcnZpY2UsIHVzZXJEYXRhU2VydmljZSkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHZhbGlkYXRpb24gPSB7XG5cdFx0dGVybXNBbmRDb25kOiB0ZXJtc0FuZENvbmRcblx0fTtcblxuXHRmdW5jdGlvbiB0ZXJtc0FuZENvbmQoKSB7XG5cdFx0Y29uc29sZS5sb2coJ3ZhbGlkYXRpbmcgdGVybXMgYW5kIGNvbmRpdGlvbnMnKTtcblx0XHQvL21ha2Ugc3VyZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBpcyBtYXJrZWQgYXMgYWRkcmVzc2VkXG5cdFx0c3RhdGVTZXJ2aWNlLnNlY3Rpb25zQWRkcmVzc2VkLnRlcm1zQ29uZHMgPSB0cnVlO1xuXG5cdFx0Ly9zZWN0aW9uIGNvbWxldGVuZXNzIGlzIGEgcmVmbGVjdGlvbiBvZiB0aGUgYWdyZWVtZW50IHN0YXR1c1xuXHRcdHN0YXRlU2VydmljZS5zZWN0aW9uc0NvbXBsZXRlZC50ZXJtc0NvbmRzID0gdXNlckRhdGFTZXJ2aWNlLmFncmVlZFRvVGVybXM7XG5cblx0XHQvL3RvZ2dsZSBjb21wbGV0bmVzc1xuXHRcdGlmKHN0YXRlU2VydmljZS5zZWN0aW9uc0NvbXBsZXRlZC50ZXJtc0NvbmRzKSB7XG5cdFx0XHRzdGF0ZVNlcnZpY2Uuc2VjdGlvbkhlYWRlcnMudGVybXNDb25kcy5zaG93RXJyb3IgPSBmYWxzZTtcblx0XHRcdHN0YXRlU2VydmljZS5zZWN0aW9uSGVhZGVycy50ZXJtc0NvbmRzLnNob3dDb21wbGV0ZWQgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdGF0ZVNlcnZpY2Uuc2VjdGlvbkhlYWRlcnMudGVybXNDb25kcy5zaG93RXJyb3IgPSB0cnVlO1xuXHRcdFx0c3RhdGVTZXJ2aWNlLnNlY3Rpb25IZWFkZXJzLnRlcm1zQ29uZHMuc2hvd0NvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdH07XG5cblx0fTtcblxuXHRyZXR1cm4gdmFsaWRhdGlvbjtcbn07XHQiLCJhbmd1bGFyLm1vZHVsZSgnYW5zdWInKS5zZXJ2aWNlKCd6aXBjb21wbGV0ZScsIHppcGNvbXBsZXRlKTtcblx0XHRcbi8qIEBuZ0luamVjdCAqL1xuemlwY29tcGxldGUuJGluamVjdCA9IFtdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHppcGNvbXBsZXRlKCkge1xuXHQvL2RlZmluZSBsb2NhbCB2YXJhaWJsZXNcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR2YXIgY2xpZW50S2V5ID0gXCJtU2FqVllEOHVyRlNPalczdHVKZmhkblNqTXJldmttZ2xYNDBXMmJ6MTJLbTRjVks1dllacG9nUWdUY2ZwNmp3XCI7XG5cdHZhciBjYWNoZSA9IHt9O1xuXHQvL3ZhciBjb250YWluZXIgPSAkKFwiI2V4YW1wbGUxXCIpO1xuXHQvL3ZhciBlcnJvckRpdiA9IGNvbnRhaW5lci5maW5kKFwiZGl2LnRleHQtZXJyb3JcIik7XG5cblx0Ly9sb2NhbCBmdW5jdGlvbiBcblx0c2VsZi5oYW5kbGVSZXNwID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdC8vIENoZWNrIGZvciBlcnJvclxuXHRcdGlmIChkYXRhLmVycm9yX21zZylcblx0XHRcdGNvbnNvbGUubG9nKGRhdGEuZXJyb3JfbXNnKTtcblx0XHRcdC8vZXJyb3JEaXYudGV4dChkYXRhLmVycm9yX21zZyk7XG5cdFx0ZWxzZSBpZiAoXCJjaXR5XCIgaW4gZGF0YSlcblx0XHR7XG5cdFx0XHQvLyBTZXQgY2l0eSBhbmQgc3RhdGVcblx0XHRcdGNvbnRhaW5lci5maW5kKFwiaW5wdXRbbmFtZT0nY2l0eSddXCIpLnZhbChkYXRhLmNpdHkpO1xuXHRcdFx0Y29udGFpbmVyLmZpbmQoXCJpbnB1dFtuYW1lPSdzdGF0ZSddXCIpLnZhbChkYXRhLnN0YXRlKTtcblx0XHR9IFxuXHR9O1xuXG5cdC8vemlwIGNoZWNrZXJcblx0c2VsZi5jaGVja1ppcCA9IGZ1bmN0aW9uKGVudGVyZWRaaXApIHtcblx0XHR2YXIgemlwY29kZSA9IGVudGVyZWRaaXAuc3Vic3RyaW5nKDAsIDUpOyBcblxuXHRcdGlmICh6aXBjb2RlLmxlbmd0aCA9PSA1ICYmIC9eWzAtOV0rJC8udGVzdCh6aXBjb2RlKSkge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnY2hlY2tpbmcgemlwJywgemlwY29kZSk7XG5cdFx0fVx0XG5cdFx0XG5cdH07XG59O1x0Il19
